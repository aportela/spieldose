import{default as spieldoseAPI}from"./api.js";const getPlayerData=function(){"use strict";let r={loading:!1,isPlaying:!1,isPaused:!1,isStopped:!0,repeatTracksMode:"none",currentPlaylist:{id:null,name:null},currentTrack:{index:0,track:null},playback:{},tracks:[],download:function(r){r&&(window.location="api/track/get/"+r)},love:function(t){r.loading=!0,spieldoseAPI.track.love(t.id,(a=>{a.ok?(r.loading=!1,t.loved=a.body.loved):r.loading=!1}))},unlove:function(t){r.loading=!0,spieldoseAPI.track.unlove(t.id,(a=>{a.ok?(r.loading=!1,t.loved=a.body.loved):r.loading=!1}))}};return r.currentTrack.unset=()=>{r.currentTrack.index=0,r.currentTrack.track=null},r.currentTrack.download=function(){r.currentTrack.track&&r.download(r.currentTrack.track.id)},r.currentTrack.setLoved=function(){r.currentTrack.track&&r.love(r.currentTrack.track)},r.currentTrack.unSetLoved=function(){r.currentTrack.track&&r.unlove(r.currentTrack.track)},r.currentPlaylist.unset=function(){r.currentPlaylist.id=null,r.currentPlaylist.name=null},r.currentPlaylist.empty=function(){r.currentTrack.unset(),r.tracks=[]},r.currentPlaylist.replace=function(t){r.currentPlaylist.empty(),r.tracks=t,r.playback.play()},r.currentPlaylist.enqueue=function(t){if(t.length>0)for(var a=0;a<t.length;a++)r.tracks.push(t[a])},r.currentPlaylist.isSet=function(){return!!r.currentPlaylist.id},r.currentPlaylist.set=function(t,a){r.currentPlaylist.id=t,r.currentPlaylist.name=a},r.currentPlaylist.unset=function(){r.currentPlaylist.id=null,r.currentPlaylist.name=null},r.currentPlaylist.empty=function(){r.isPaused=!1,r.isPlaying=!1,r.currentTrack.unset(),r.tracks=[]},r.currentPlaylist.loadRandomTracks=function(t,a){r.playback.stop(),r.tracks=[],r.loading=!0,r.currentTrack.unset(),spieldoseAPI.track.searchTracks("","","",!1,1,t,"random",(t=>{t.ok?(t.body.tracks&&t.body.tracks.length>0&&(r.tracks=t.body.tracks),r.loading=!1,r.playback.play(),a&&"function"==typeof a&&a()):(r.loading=!1,a&&"function"==typeof a&&a())}))},r.currentPlaylist.playAtIdx=function(t){r.tracks.length>0&&t<r.tracks.length&&(r.currentTrack.index=t,r.currentTrack.track=r.tracks[r.currentTrack.index],r.isPlaying=!0,r.isPaused=!1,r.isStopped=!1)},r.currentPlaylist.shuffle=function(){!function(r){var t,a,e;for(e=r.length-1;e>0;e--)t=Math.floor(Math.random()*(e+1)),a=r[e],r[e]=r[t],r[t]=a}(r.tracks),r.currentPlaylist.playAtIdx(0)},r.currentPlaylist.moveItemUp=function(t){if(r.tracks.length>0&&t>0){var a=r.tracks[t-1];r.tracks.splice(t-1,1),r.tracks.splice(t,0,a)}},r.currentPlaylist.moveItemDown=function(t){if(r.tracks.length>0&&t<r.tracks.length-1){var a=r.tracks[t];r.tracks.splice(t,1),r.tracks.splice(t+1,0,a)}},r.currentPlaylist.removeItem=function(t){r.tracks.length>0&&t<r.tracks.length&&(t==r.currentTrack.index&&(r.isPlaying||r.isPaused)&&r.currentPlaylist.playNext(),r.tracks.splice(t,1))},r.currentPlaylist.playPrevious=function(){r.currentTrack.index>0&&(r.currentTrack.index--,r.currentTrack.track=r.tracks[r.currentTrack.index],r.isPaused&&(r.isPaused=!1,r.isPlaying=!0))},r.currentPlaylist.playNext=function(){r.tracks.length>0&&"track"!=r.repeatTracksMode&&(r.currentTrack.index<r.tracks.length-1?(r.currentTrack.index++,r.currentTrack.track=r.tracks[r.currentTrack.index],r.isPaused&&(r.isPaused=!1,r.isPlaying=!0)):"all"==r.repeatTracksMode&&(r.currentTrack.index=0,r.currentTrack.track=r.tracks[r.currentTrack.index],r.isPaused&&(r.isPaused=!1,r.isPlaying=!0)))},r.playback.play=function(){r.tracks.length>0&&(r.currentTrack.track=r.tracks[r.currentTrack.index],r.isPlaying=!0,r.isPaused=!1,r.isStopped=!1)},r.playback.stop=function(){r.isPaused=!1,r.isPlaying=!1,r.isStopped=!0},r.playback.pause=function(){r.isPlaying&&(r.isPaused=!0,r.isPlaying=!1,r.isStopped=!1)},r.playback.resume=function(){r.isPaused&&(r.isPaused=!1,r.isPlaying=!0,r.isStopped=!1)},r.playback.toggleRepeatMode=function(){switch(r.repeatTracksMode){case"none":r.repeatTracksMode="track";break;case"track":r.repeatTracksMode="all";break;default:r.repeatTracksMode="none"}},r.dispose=function(){r.playback.stop(),r.currentPlaylist.unset(),r.currentPlaylist.empty()},r},sharedPlayerData=getPlayerData();export default sharedPlayerData;