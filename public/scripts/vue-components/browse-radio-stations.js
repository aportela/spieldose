import{default as spieldoseAPI}from"../api.js";import{mixinAPIError,mixinPagination,mixinLiveSearches,mixinPlayer,mixinAlbums}from"../mixins.js";import{default as inputTypeAHead}from"./input-typeahead.js";import{default as pagination}from"./pagination";import{default as apiError}from"./api-error.js";import{default as deleteConfirmationModal}from"./delete-confirmation-modal.js";const template=function(){return'\n        <div class="container is-fluid box is-marginless">\n        <p class="title is-1 has-text-centered">{{ $t("browseRadioStations.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="{ \'is-loading\': loading }">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationSearchNamePlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationSearchNamePlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="nameFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseRadioStations.buttons.search") }}</span>\n                        </a>\n                    </p>\n                    <p class="control">\n                        <a class="button is-info" v-bind:disabled="showForm" v-on:click.prevent="showAddRadioStationForm();">\n                            <span class="icon">\n                                <i class="fas fa-plus" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseRadioStations.buttons.add") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <div v-if="showForm">\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationName") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationNamePlaceholder\')" v-model.trim="formRadioStationName">\n                                </div>\n                            </div>\n                            <div class="field">\n                                <div class="control">\n                                    <div class="select">\n                                        <select v-model.number="formRadioStationType">\n                                            <option value="0">{{ $t("browseRadioStations.selects.optionDirectStream") }}</option>\n                                            <option value="1">{{ $t("browseRadioStations.selects.optionM3U") }}</option>\n                                            <option value="2">{{ $t("browseRadioStations.selects.optionPLS") }}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationUrl") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationPlaceholderUrl\')" v-model.trim="formRadioStationUrl">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationImage") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationPlaceholderImage\')" v-model.trim="formRadioStationImage">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                        </div>\n                        <div class="field-body">\n                            <div class="field is-grouped">\n                                <div class="control">\n                                    <a class="button is-link" v-on:click.prevent="save();" v-bind:disabled="! allowSave">\n                                        <span class="icon">\n                                            <i class="fas fa-save" aria-hidden="true"></i>\n                                        </span>\n                                        <span>{{ $t("browseRadioStations.buttons.save") }}</span>\n                                    </a>\n                                </div>\n                                <div class="control">\n                                    <a class="button is-info" v-on:click.prevent="hideAddRadioStationForm();">\n                                        <span class="icon">\n                                            <i class="fas fa-ban" aria-hidden="true"></i>\n                                        </span>\n                                        <span>{{ $t("browseRadioStations.buttons.cancel") }}</span>\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div v-else>\n                    <spieldose-pagination v-bind:loading="loading" v-bind:data="pager" v-on:pagination-changed="onPaginationChanged"></spieldose-pagination>\n                    <div class="radio-station-item browse-radio-station-item box has-text-centered" v-for="radioStation in radioStations" v-show="! loading">\n                        <img class="radio-station-thumbnail" v-bind:src="radioStation.image | getAlbumImageUrl" v-on:error="radioStation.image = null;">\n                        <p class="radio-station-info">\n                            <strong>“{{ radioStation.name }}”</strong>\n                        </p>\n                        <div class="field has-addons">\n                            <p class="control">\n                                <a class="button is-small is-link" v-on:click.prevent="playRadioStation(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-play"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.play") }}</span>\n                                </a>\n                            </p>\n                            <p class="control">\n                                <a class="button is-small is-info" v-on:click.prevent="showUpdateRadioStationForm(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-edit"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.update") }}</span>\n                                </a>\n                            </p>\n                            <p class="control">\n                                <a class="button is-small is-danger" v-on:click.prevent="onShowDeleteModal(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-times"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.remove") }}</span>\n                                </a>\n                            </p>\n                        </div>\n                    </div>\n                    <div class="is-clearfix"></div>\n                </div>\n                <delete-confirmation-modal v-bind:id="deleteItemId" v-if="showDeleteConfirmationModal" v-on:confirm-delete="onConfirmDelete" v-on:cancel-delete="onCancelDelete"></delete-confirmation-modal>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    '};export default{name:"spieldose-browse-radio-stations",template:'\n        <div class="container is-fluid box is-marginless">\n        <p class="title is-1 has-text-centered">{{ $t("browseRadioStations.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="{ \'is-loading\': loading }">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationSearchNamePlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationSearchNamePlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="nameFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseRadioStations.buttons.search") }}</span>\n                        </a>\n                    </p>\n                    <p class="control">\n                        <a class="button is-info" v-bind:disabled="showForm" v-on:click.prevent="showAddRadioStationForm();">\n                            <span class="icon">\n                                <i class="fas fa-plus" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseRadioStations.buttons.add") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <div v-if="showForm">\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationName") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationNamePlaceholder\')" v-model.trim="formRadioStationName">\n                                </div>\n                            </div>\n                            <div class="field">\n                                <div class="control">\n                                    <div class="select">\n                                        <select v-model.number="formRadioStationType">\n                                            <option value="0">{{ $t("browseRadioStations.selects.optionDirectStream") }}</option>\n                                            <option value="1">{{ $t("browseRadioStations.selects.optionM3U") }}</option>\n                                            <option value="2">{{ $t("browseRadioStations.selects.optionPLS") }}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationUrl") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationPlaceholderUrl\')" v-model.trim="formRadioStationUrl">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                            <label class="label">{{ $t("browseRadioStations.labels.radioStationImage") }}</label>\n                        </div>\n                        <div class="field-body">\n                            <div class="field">\n                                <div class="control">\n                                    <input class="input" type="text" v-bind:placeholder="$t(\'browseRadioStations.inputs.radioStationPlaceholderImage\')" v-model.trim="formRadioStationImage">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="field is-horizontal">\n                        <div class="field-label">\n                        </div>\n                        <div class="field-body">\n                            <div class="field is-grouped">\n                                <div class="control">\n                                    <a class="button is-link" v-on:click.prevent="save();" v-bind:disabled="! allowSave">\n                                        <span class="icon">\n                                            <i class="fas fa-save" aria-hidden="true"></i>\n                                        </span>\n                                        <span>{{ $t("browseRadioStations.buttons.save") }}</span>\n                                    </a>\n                                </div>\n                                <div class="control">\n                                    <a class="button is-info" v-on:click.prevent="hideAddRadioStationForm();">\n                                        <span class="icon">\n                                            <i class="fas fa-ban" aria-hidden="true"></i>\n                                        </span>\n                                        <span>{{ $t("browseRadioStations.buttons.cancel") }}</span>\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div v-else>\n                    <spieldose-pagination v-bind:loading="loading" v-bind:data="pager" v-on:pagination-changed="onPaginationChanged"></spieldose-pagination>\n                    <div class="radio-station-item browse-radio-station-item box has-text-centered" v-for="radioStation in radioStations" v-show="! loading">\n                        <img class="radio-station-thumbnail" v-bind:src="radioStation.image | getAlbumImageUrl" v-on:error="radioStation.image = null;">\n                        <p class="radio-station-info">\n                            <strong>“{{ radioStation.name }}”</strong>\n                        </p>\n                        <div class="field has-addons">\n                            <p class="control">\n                                <a class="button is-small is-link" v-on:click.prevent="playRadioStation(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-play"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.play") }}</span>\n                                </a>\n                            </p>\n                            <p class="control">\n                                <a class="button is-small is-info" v-on:click.prevent="showUpdateRadioStationForm(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-edit"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.update") }}</span>\n                                </a>\n                            </p>\n                            <p class="control">\n                                <a class="button is-small is-danger" v-on:click.prevent="onShowDeleteModal(radioStation.id);">\n                                    <span class="icon is-small"><i class="fas fa-times"></i></span>\n                                    <span>{{ $t("browseRadioStations.buttons.remove") }}</span>\n                                </a>\n                            </p>\n                        </div>\n                    </div>\n                    <div class="is-clearfix"></div>\n                </div>\n                <delete-confirmation-modal v-bind:id="deleteItemId" v-if="showDeleteConfirmationModal" v-on:confirm-delete="onConfirmDelete" v-on:cancel-delete="onCancelDelete"></delete-confirmation-modal>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    ',mixins:[mixinAPIError,mixinPagination,mixinLiveSearches,mixinPlayer,mixinAlbums],data:function(){return{loading:!1,nameFilter:null,radioStations:[],showDeleteConfirmationModal:!1,deleteItemId:null,showForm:!1,formRadioStationId:null,formRadioStationName:null,formRadioStationUrl:null,formRadioStationType:0,formRadioStationImage:null}},computed:{allowSave:function(){return this.formRadioStationName&&this.formRadioStationUrl}},components:{"spieldose-input-typeahead":inputTypeAHead,"spieldose-pagination":pagination,"spieldose-api-error-component":apiError,"delete-confirmation-modal":deleteConfirmationModal},methods:{onPaginationChanged:function(i){this.$router.push({name:"radioStationsPaged",params:{page:i}})},onTypeahead:function(i){this.nameFilter=i,this.search()},onShowDeleteModal:function(i){i&&(this.deleteItemId=i,this.showDeleteConfirmationModal=!0)},onConfirmDelete:function(i){i&&(this.loading=!0,this.clearAPIErrors(),spieldoseAPI.radioStation.remove(i,(i=>{i.ok?this.search():this.setAPIError(i.getApiErrorData()),this.showDeleteConfirmationModal=!1,this.deleteItemId=null})))},onCancelDelete:function(){this.showDeleteConfirmationModal=!1,this.deleteItemId=null},showAddRadioStationForm:function(){this.showForm=!0,this.formRadioStationId=null,this.formRadioStationName=null,this.formRadioStationUrl=null,this.formRadioStationType=0,this.formRadioStationImage=null},hideAddRadioStationForm:function(){this.showForm=!1},showUpdateRadioStationForm:function(i){spieldoseAPI.radioStation.get(i,(i=>{i.ok?(this.formRadioStationId=i.body.radioStation.id,this.formRadioStationName=i.body.radioStation.name,this.formRadioStationUrl=i.body.radioStation.url,this.formRadioStationType=i.body.radioStation.urlType,this.formRadioStationImage=i.body.radioStation.image,this.showForm=!0):this.setAPIError(i.getApiErrorData())}))},save:function(){this.formRadioStationId?this.update():this.add()},add:function(){this.loading=!0,this.clearAPIErrors(),spieldoseAPI.radioStation.add(this.formRadioStationName,this.formRadioStationUrl,this.formRadioStationType,this.formRadioStationImage,(i=>{i.ok?(this.showForm=!1,this.search()):this.setAPIError(i.getApiErrorData())}))},update:function(){this.loading=!0,this.clearAPIErrors(),spieldoseAPI.radioStation.update(this.formRadioStationId,this.formRadioStationName,this.formRadioStationUrl,this.formRadioStationType,this.formRadioStationImage,(i=>{i.ok?(this.showForm=!1,this.search()):this.setAPIError(i.getApiErrorData())}))},search:function(){this.loading=!0,this.clearAPIErrors(),spieldoseAPI.radioStation.search(this.nameFilter,this.pager.actualPage,this.pager.resultsPage,(i=>{i.ok?(this.pager.actualPage=i.body.pagination.actualPage,this.pager.totalPages=i.body.pagination.totalPages,this.pager.totalResults=i.body.pagination.totalResults,i.body.radioStations&&i.body.radioStations.length>0?this.radioStations=i.body.radioStations:this.radioStations=[],this.loading=!1):(this.errors=!0,this.apiError=i.getApiErrorData(),this.loading=!1)}))}}};