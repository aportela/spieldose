import{default as spieldoseAPI}from"../api.js";import{mixinAPIError,mixinPagination,mixinLiveSearches,mixinNavigation,mixinArtists}from"../mixins.js";import{default as inputTypeAHead}from"./input-typeahead.js";import{default as pagination}from"./pagination";import{default as apiError}from"./api-error.js";const template=function(){return'\n        <div class="container is-fluid box is-marginless">\n            <p class="title is-1 has-text-centered">{{ $t("browseArtists.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field is-expanded has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="{ \'is-loading\': loading }">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'browseArtists.inputs.artistNamePlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" placeholder="$t(\'browseArtists.inputs.artistNamePlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="nameFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <div class="control">\n                        <div class="select">\n                            <select v-model="filterNotScraped">\n                                <option value="0">{{ $t("browseArtists.dropdowns.filterAllArtists") }}</option>\n                                <option value="1">{{ $t("browseArtists.dropdowns.filterNotScrapedArtists") }}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseArtists.buttons.search") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <spieldose-pagination v-bind:loading="loading" v-bind:data="pager" v-on:pagination-changed="onPaginationChanged"></spieldose-pagination>\n                <div class="browse-artist-item is-pulled-left" v-for="artist in artists" v-show="! loading">\n                    <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(artist.name);">\n                        <img v-bind:src="artist.image | getArtistImageUrl" v-on:error="artist.image = null;">\n                        <i class="fas fa-search fa-4x"></i>\n                    </a>\n                    <div class="artist-info is-clipped">\n                        <p class="artist-name has-text-centered">{{ artist.name }}</p>\n                    </div>\n                </div>\n                <div class="is-clearfix"></div>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    '};export default{name:"spieldose-browse-artists",template:'\n        <div class="container is-fluid box is-marginless">\n            <p class="title is-1 has-text-centered">{{ $t("browseArtists.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field is-expanded has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="{ \'is-loading\': loading }">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'browseArtists.inputs.artistNamePlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" placeholder="$t(\'browseArtists.inputs.artistNamePlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="nameFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <div class="control">\n                        <div class="select">\n                            <select v-model="filterNotScraped">\n                                <option value="0">{{ $t("browseArtists.dropdowns.filterAllArtists") }}</option>\n                                <option value="1">{{ $t("browseArtists.dropdowns.filterNotScrapedArtists") }}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("browseArtists.buttons.search") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <spieldose-pagination v-bind:loading="loading" v-bind:data="pager" v-on:pagination-changed="onPaginationChanged"></spieldose-pagination>\n                <div class="browse-artist-item is-pulled-left" v-for="artist in artists" v-show="! loading">\n                    <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(artist.name);">\n                        <img v-bind:src="artist.image | getArtistImageUrl" v-on:error="artist.image = null;">\n                        <i class="fas fa-search fa-4x"></i>\n                    </a>\n                    <div class="artist-info is-clipped">\n                        <p class="artist-name has-text-centered">{{ artist.name }}</p>\n                    </div>\n                </div>\n                <div class="is-clearfix"></div>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    ',mixins:[mixinAPIError,mixinPagination,mixinLiveSearches,mixinNavigation,mixinArtists],data:function(){return{loading:!1,nameFilter:null,artists:[],filterNotScraped:0}},watch:{filterNotScraped:function(i){this.liveSearch&&this.search()}},components:{"spieldose-input-typeahead":inputTypeAHead,"spieldose-pagination":pagination,"spieldose-api-error-component":apiError},methods:{onPaginationChanged:function(i){this.$router.push({name:"artistsPaged",params:{page:i}})},onTypeahead:function(i){this.nameFilter=i,this.search()},search:function(){this.loading=!0,this.clearAPIErrors(),spieldoseAPI.artist.search(this.nameFilter,1==this.filterNotScraped,this.pager.actualPage,this.pager.resultsPage,(i=>{i.ok?(this.pager.actualPage=i.body.pagination.actualPage,this.pager.totalPages=i.body.pagination.totalPages,this.pager.totalResults=i.body.pagination.totalResults,i.body.artists&&i.body.artists.length>0?this.artists=i.body.artists:this.artists=[]):this.setAPIError(i.getApiErrorData()),this.loading=!1}))}}};