import{default as spieldoseAPI}from"../api.js";import{mixinAPIError,mixinNavigation,mixinLiveSearches,mixinPlayer,mixinAlbums,mixinArtists}from"../mixins.js";import{default as inputTypeAHead}from"./input-typeahead.js";const template=function(){return'\n        <div class="container is-fluid box is-marginless">\n            <p class="title is-1 has-text-centered">{{ $t("search.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="loading ? \'is-loading\': \'\'">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'search.inputs.searchTextPlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" v-bind:placeholder="$t(\'search.inputs.searchTextPlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="textFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("search.buttons.search") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <div class="columns is-desktop">\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.artists") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="artist, i in artists" v-bind:key="i">\n                            <div class="media-left">\n                                <figure class="image is-48x48">\n                                    <img class="border-radius-50" v-bind:src="artist.image | getArtistImageUrl" v-on:error="artist.image = null;">\n                                </figure>\n                            </div>\n                            <div class="media-content">\n                                <div class="content">\n                                    <p class="subtitle is-6"><a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(artist.name);">{{ artist.name }}</a></p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.albums") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="album, i in albums" v-bind:key="i">\n                            <div class="media-left">\n                                <figure class="image is-48x48">\n                                    <img class="border-radius-50" v-bind:src="album.image | getAlbumImageUrl" v-on:error="album.image = null;"/>\n                                </figure>\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <p class="subtitle is-6">\n                                        <i class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisAlbum\')" v-on:click.prevent="playAlbumTracks(album.name, album.artist, album.year);"></i>\n                                        <i class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisAlbum\')" v-on:click.prevent="enqueueAlbumTracks(album.name, album.artist, album.year);"></i>\n                                        <span>{{ album.name }}</span>\n                                        <br>\n                                        <span v-if="album.artist">{{ $t("commonLabels.by" )}} <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(album.artist);">{{ album.artist }}</a></span>\n                                    </p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.tracks") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="track, i in tracks" v-bind:key="track.id">\n                            <div class="media-left">\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <i class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisTrack\')" v-on:click.prevent="playTrack(track);"></i>\n                                    <i class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisTrack\')" v-on:click.prevent="enqueueTrack(track);"></i>\n                                    <span>{{ track.title }}</span>\n                                    <br >\n                                    <span v-if="track.artist">{{ $t("commonLabels.by" )}} <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(track.artist);">{{ track.artist }}</a></span> <span v-if="track.album"> / {{ track.album }}</span>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.playlists") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="playlist in playlists" v-bind:key="playlist.id">\n                            <div class="media-left">\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <p class="subtitle is-6">\n                                    <i v-on:click="playPlaylistTracks(playlist.id);" class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisPlaylist\')"></i>\n                                    <i v-on:click="enqueuePlaylistTracks(playlist.id);" class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisPlaylist\')"></i>\n                                    {{ playlist.name }} ({{ playlist.trackCount}} {{$t("commonLabels.tracksCount")}})\n                                    </p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                </div>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    '};export default{name:"spieldose-search",template:'\n        <div class="container is-fluid box is-marginless">\n            <p class="title is-1 has-text-centered">{{ $t("search.labels.sectionName") }}</p>\n            <div v-if="! hasAPIErrors">\n                <div class="field has-addons">\n                    <div class="control is-expanded has-icons-left" v-bind:class="loading ? \'is-loading\': \'\'">\n                        <spieldose-input-typeahead v-if="liveSearch" v-bind:loading="loading" v-bind:placeholder="$t(\'search.inputs.searchTextPlaceholder\')" v-on:on-value-change="onTypeahead"></spieldose-input-typeahead>\n                        <input type="text" class="input" v-bind:placeholder="$t(\'search.inputs.searchTextPlaceholder\')" v-else v-bind:disabled="loading" v-model.trim="textFilter" v-on:keyup.enter="search();">\n                        <span class="icon is-small is-left">\n                            <i class="fas fa-search"></i>\n                        </span>\n                    </div>\n                    <p class="control" v-if="! liveSearch">\n                        <a class="button is-info" v-on:click.prevent="search();">\n                            <span class="icon">\n                                <i class="fas fa-search" aria-hidden="true"></i>\n                            </span>\n                            <span>{{ $t("search.buttons.search") }}</span>\n                        </a>\n                    </p>\n                </div>\n                <div class="columns is-desktop">\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.artists") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="artist, i in artists" v-bind:key="i">\n                            <div class="media-left">\n                                <figure class="image is-48x48">\n                                    <img class="border-radius-50" v-bind:src="artist.image | getArtistImageUrl" v-on:error="artist.image = null;">\n                                </figure>\n                            </div>\n                            <div class="media-content">\n                                <div class="content">\n                                    <p class="subtitle is-6"><a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(artist.name);">{{ artist.name }}</a></p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.albums") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="album, i in albums" v-bind:key="i">\n                            <div class="media-left">\n                                <figure class="image is-48x48">\n                                    <img class="border-radius-50" v-bind:src="album.image | getAlbumImageUrl" v-on:error="album.image = null;"/>\n                                </figure>\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <p class="subtitle is-6">\n                                        <i class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisAlbum\')" v-on:click.prevent="playAlbumTracks(album.name, album.artist, album.year);"></i>\n                                        <i class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisAlbum\')" v-on:click.prevent="enqueueAlbumTracks(album.name, album.artist, album.year);"></i>\n                                        <span>{{ album.name }}</span>\n                                        <br>\n                                        <span v-if="album.artist">{{ $t("commonLabels.by" )}} <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(album.artist);">{{ album.artist }}</a></span>\n                                    </p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.tracks") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="track, i in tracks" v-bind:key="track.id">\n                            <div class="media-left">\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <i class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisTrack\')" v-on:click.prevent="playTrack(track);"></i>\n                                    <i class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisTrack\')" v-on:click.prevent="enqueueTrack(track);"></i>\n                                    <span>{{ track.title }}</span>\n                                    <br >\n                                    <span v-if="track.artist">{{ $t("commonLabels.by" )}} <a v-bind:title="$t(\'commonLabels.navigateToArtistPage\')" v-on:click.prevent="navigateToArtistPage(track.artist);">{{ track.artist }}</a></span> <span v-if="track.album"> / {{ track.album }}</span>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                    <div class="column is-one-quarter is-clipped">\n                        <h1 class="title is-6 has-text-centered">{{ $t("search.tabs.playlists") }}</h1>\n                        <hr class="dropdown-divider">\n                        <article class="media" v-for="playlist in playlists" v-bind:key="playlist.id">\n                            <div class="media-left">\n                            </div>\n                            <div class="media-content">\n                                <div class="content cut-text">\n                                    <p class="subtitle is-6">\n                                    <i v-on:click="playPlaylistTracks(playlist.id);" class="cursor-pointer fa fa-play" v-bind:title="$t(\'commonLabels.playThisPlaylist\')"></i>\n                                    <i v-on:click="enqueuePlaylistTracks(playlist.id);" class="cursor-pointer fa fa-plus-square" v-bind:title="$t(\'commonLabels.enqueueThisPlaylist\')"></i>\n                                    {{ playlist.name }} ({{ playlist.trackCount}} {{$t("commonLabels.tracksCount")}})\n                                    </p>\n                                </div>\n                            </div>\n                        </article>\n                    </div>\n                </div>\n            </div>\n            <spieldose-api-error-component v-else v-bind:apiError="apiError"></spieldose-api-error-component>\n        </div>\n    ',mixins:[mixinAPIError,mixinNavigation,mixinLiveSearches,mixinPlayer,mixinAlbums,mixinArtists],data:function(){return{loading:!1,textFilter:null,artists:[],albums:[],tracks:[],playlists:[]}},components:{"spieldose-input-typeahead":inputTypeAHead},methods:{onTypeahead:function(a){this.textFilter=a,this.search()},search:function(){this.loading=!0,this.clearAPIErrors(),spieldoseAPI.globalSearch(this.textFilter,1,8,(a=>{a.ok?(a.body.artists&&a.body.artists.length>0?this.artists=a.body.artists:this.artists=[],a.body.albums&&a.body.albums.length>0?this.albums=a.body.albums:this.albums=[],a.body.tracks&&a.body.tracks.length>0?this.tracks=a.body.tracks:this.tracks=[],a.body.playlists&&a.body.playlists.length>0?this.playlists=a.body.playlists:this.playlists=[]):this.setAPIError(a.getApiErrorData()),this.loading=!1}))}}};