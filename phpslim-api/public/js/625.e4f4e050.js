"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[625],{2719:(e,t,a)=>{a.d(t,{d:()=>i});var l=a(1809),n=a(8612),s=a.n(n);const r={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},i=(0,l.Q_)("currentPlaylist",{state:()=>({elements:[],currentIndex:-1,elementsLastChangeTimestamp:null}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,getElementsLastChangeTimestamp:e=>e.elementsLastChangeTimestamp,getCurrentIndex:e=>e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=s()(r),t=e.get("currentPlaylistElements");t&&(this.elements=t);const a=e.get("currentPlaylistElementIndex");a>=0&&(this.currentIndex=a)},saveElements(e){this.elements=e,this.currentIndex=e&&e.length>0?0:-1;const t=s()(r);t.set("currentPlaylistElements",e),t.set("currentPlaylistElementIndex",e&&e.length>0?0:-1),this.elementsLastChangeTimestamp=Date.now()},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=s()(r);t.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,a)=>{a.d(t,{n:()=>r});var l=a(1809),n=a(1320);const s=(0,n.l)(),r=(0,l.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),s.setStatusStopped()},load(){},play(e){e?(this.element.play(),s.setStatusPlaying()):s.isPlaying?(this.element.pause(),s.setStatusPaused()):s.isPaused?(this.element.play(),s.setStatusPlaying()):(this.element.load(),this.element.play(),s.setStatusPlaying())}}})},1320:(e,t,a)=>{a.d(t,{l:()=>n});var l=a(1809);const n=(0,l.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},4625:(e,t,a)=>{a.r(t),a.d(t,{default:()=>De});a(9665);var l=a(9835),n=a(499),s=a(6970),r=a(8339),i=a(1569),u=a(5253),o=a(9302),d=a(7712),m=a(4537),c=a(1957),p=a(4958);const v="background: url(images/vinyl.png) no-repeat; background-size: cover;",g={__name:"SidebarPlayerAlbumCover",props:{rotateVinyl:Boolean,smallVinylImage:String,coverImage:String},setup(e){const t=e,a=(0,n.iH)(null),r=(0,n.iH)(null),i=(0,l.Fl)((()=>t.smallVinylImage)),u=(0,l.Fl)((()=>t.coverImage));(0,l.YP)(i,(e=>{a.value=e})),(0,l.YP)(u,(e=>{r.value=e})),a.value=i.value,r.value=u.value;const o=(0,n.iH)(!1);function d(){o.value=!o.value}return(t,n)=>{const i=(0,l.up)("q-img");return o.value?((0,l.wg)(),(0,l.iD)("div",{key:0,id:"vinyl_container",class:(0,s.C_)({rotation_enabled:e.rotateVinyl}),style:v,onClick:d},[a.value?((0,l.wg)(),(0,l.j4)(i,{key:0,src:a.value,onError:n[0]||(n[0]=e=>a.value=null),"img-class":"vinyl_mini_cover","no-spinner":""},null,8,["src"])):(0,l.kq)("",!0)],2)):((0,l.wg)(),(0,l.iD)("div",{key:1,id:"cover_container",onClick:d},[r.value?((0,l.wg)(),(0,l.j4)(i,{key:0,src:r.value,onError:n[1]||(n[1]=e=>r.value=null),alt:"Album cover",width:"400px",height:"400px","spinner-color":"pink"},null,8,["src"])):((0,l.wg)(),(0,l.j4)(i,{key:1,src:"images/vinyl.png",alt:"Vinyl",width:"400px",height:"400px"}))]))}}};var b=a(335),k=a(9984),w=a.n(k);const f=g,_=f;w()(g,"components",{QImg:b.Z});var y=a(6574);const h={__name:"SidebarPlayerSpectrumAnalyzer",setup(e){const t=(0,p.n)(),a=(0,n.iH)(t.getElement),s=(0,n.iH)(null),r=(0,n.iH)(4);function i(){if(!s.value){s.value=new y.Z(document.getElementById("analyzer-container"),{source:a.value,mode:r.value,height:40,ledBars:!1,showScaleX:!1,showScaleY:!1,stereo:!1,splitGradient:!1,start:!1,bgAlpha:1,overlay:!0,showBgColor:!0});const e={bgColor:"#fff",dir:"v",colorStops:["#d30320","#e399a3"]};s.value.registerGradient("my-grad",e),s.value.gradient="my-grad"}s.value.isOn||s.value.toggleAnalyzer()}function u(){r.value++,r.value>8&&(r.value=0),s.value.setOptions({mode:r.value})}return(0,l.bv)((()=>{i()})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",{id:"analyzer-container",style:{height:"50px"},class:"cursor-pointer",onClick:u}))}},x=h,S=x,W={__name:"SidebarPlayerVolumeControl",props:{disabled:Boolean,defaultValue:Number},emits:["volumeChange"],setup(e,{emit:t}){const a=e,r=(0,n.iH)(0),i=(0,n.iH)(a.defaultValue||1),u=(0,n.iH)(!1);(0,l.YP)(i,((e,t)=>{e>0&&u.value&&(u.value=!1)}));const o=(0,l.Fl)((()=>0==i.value?"volume_off":i.value<.4?"volume_mute":i.value<.7?"volume_down":"volume_up")),d=(0,l.Fl)((()=>Math.round(100*i.value)));function m(){u.value?i.value=r.value:(r.value=i.value,i.value=0),u.value=!u.value,t("volumeChange",i.value)}function p(e){t("volumeChange",e)}return(t,a)=>{const n=(0,l.up)("q-icon"),r=(0,l.up)("q-item-section"),v=(0,l.up)("q-slider"),g=(0,l.up)("q-item"),b=(0,l.up)("q-list");return(0,l.wg)(),(0,l.j4)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:(0,s.C_)(["cursor-pointer",{"text-pink":u.value}]),name:o.value,onClick:(0,c.iM)(m,["prevent"])},null,8,["name","onClick","class"])])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{disable:e.disabled,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),min:0,max:1,step:.05,label:"","label-value":d.value+"%",onChange:a[1]||(a[1]=e=>p(i.value))},null,8,["disable","modelValue","label-value"])])),_:1}),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(d.value)+"% ",1)])),_:1})])),_:1})])),_:1})}}};var P=a(3246),E=a(490),I=a(1233),C=a(2857),q=a(8423);const T=W,Q=T;w()(W,"components",{QList:P.Z,QItem:E.Z,QItemSection:I.Z,QIcon:C.Z,QSlider:q.Z});const Z={key:0,id:"song_info"},z={class:"song_info_track text-center text-weight-bolder",style:{color:"#d30320"}},U={class:"song_info_album text-center"},L={class:"song_info_artist text-center"},N={key:1},V={__name:"SidebarPlayerTrackInfo",props:{currentElement:Object},setup(e){return(t,a)=>{const n=(0,l.up)("router-link");return e.currentElement&&e.currentElement.track?((0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("p",z,(0,s.zw)(e.currentElement.track.title||" "),1),(0,l._)("p",U,(0,s.zw)(e.currentElement.track.album.title||" "),1),(0,l._)("p",L,[e.currentElement.track.artist.name?((0,l.wg)(),(0,l.j4)(n,{key:0,style:{"text-decoration":"none"},to:{name:"artist",params:{name:e.currentElement.track.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.currentElement.track.artist.name),1)])),_:1},8,["to"])):((0,l.wg)(),(0,l.iD)("span",N," "))])])):(0,l.kq)("",!0)}}},D=V,H=D,A={id:"player_controls"},F={class:"q-pa-md q-gutter-sm text-center"},B={__name:"SidebarPlayerMainControls",props:{disabled:Boolean,allowSkipPrevious:Boolean,allowPlay:Boolean,allowSkipNext:Boolean,isPlaying:Boolean},emits:["skipPrevious","play","skipNext"],setup(e,{emit:t}){function a(){t("play")}function n(){t("skipPrevious")}function r(){t("skipNext")}return(t,i)=>{const u=(0,l.up)("q-icon"),o=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",A,[(0,l._)("div",F,[(0,l.Wm)(o,{round:"",dense:"",size:"md",disable:e.disabled||!e.allowSkipPrevious,onClick:n},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"skip_previous",title:"Skip to previous track"})])),_:1},8,["disable"]),(0,l.Wm)(o,{round:"",dense:"",size:"lg",disable:e.disabled||!e.allowPlay,onClick:a,class:"q-mx-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:e.isPlaying?"pause":"play_arrow",title:"Play/Pause/Resume track",class:(0,s.C_)({"text-pink-6":e.isPlaying})},null,8,["name","class"])])),_:1},8,["disable"]),(0,l.Wm)(o,{round:"",dense:"",size:"md",disable:e.disabled||!e.allowSkipNext,onClick:r},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"skip_next",title:"Skip to next track"})])),_:1},8,["disable"])])])}}};var R=a(8879);const j=B,M=j;w()(B,"components",{QBtn:R.Z,QIcon:C.Z});const Y={__name:"SidebarPlayerSeekControl",props:{disabled:Boolean,currentElementTimeData:Object},emits:["seek"],setup(e,{emit:t}){const a=e,r=(0,l.Fl)((()=>a.currentElementTimeData.position));(0,l.YP)(r,(e=>{i.value=parseFloat(e)}));const i=(0,n.iH)(0);function u(){t("seek",i.value)}function o(e,t){if(e&&e>0){var a=Math.floor(e/3600),l=Math.floor((e-3600*a)/60),n=Math.floor(e-3600*a-60*l);return l<10&&(l="0"+l),n<10&&(n="0"+n),l+":"+n}return"00:00"}return(t,a)=>{const n=(0,l.up)("q-item-section"),r=(0,l.up)("q-slider"),d=(0,l.up)("q-item"),m=(0,l.up)("q-list");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o(e.currentElementTimeData.currentTime)),1)])),_:1}),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{disable:e.disabled,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),min:0,max:1,step:.01,label:"","label-value":o(e.currentElementTimeData.currentTime),onChange:u},null,8,["disable","modelValue","label-value"])])),_:1}),(0,l.Wm)(n,{side:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o(e.currentElementTimeData.duration)),1)])),_:1})])),_:1})])),_:1})}}},G=Y,O=G;w()(Y,"components",{QList:P.Z,QItem:E.Z,QItemSection:I.Z,QSlider:q.Z});const K={id:"current_track_actions"},X={__name:"SidebarPlayerTrackActions",props:{disabled:Boolean,favorited:Number,downloadURL:String},emits:["toggleAnalyzer","toggleFavorite"],setup(e,{emit:t}){function a(){t("toggleAnalyzer")}function n(){t("toggleFavorite")}function s(){t("toggleTrackDetailsModal")}return(t,r)=>{const i=(0,l.up)("q-icon"),u=(0,l.up)("q-btn"),o=(0,l.up)("q-btn-group");return(0,l.wg)(),(0,l.iD)("div",K,[(0,l.Wm)(o,{spread:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Toggle navigation menu"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"reorder"})])),_:1},8,["disable"]),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Toggle analyzer"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"bar_chart",onClick:a})])),_:1},8,["disable"]),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Love/unlove track"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"favorite",color:e.favorited?"pink":"",onClick:n},null,8,["color"])])),_:1},8,["disable"]),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Toggle random sort"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"shuffle"})])),_:1},8,["disable"]),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Toggle repeat mode"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"replay"})])),_:1},8,["disable"]),e.downloadURL?((0,l.wg)(),(0,l.j4)(u,{key:0,dense:"",unelevated:"",size:"md",disable:e.disabled,title:"Download track",href:e.downloadURL},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"file_download"})])),_:1},8,["disable","href"])):((0,l.wg)(),(0,l.j4)(u,{key:1,dense:"",unelevated:"",size:"md",disable:"",title:"Download track"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"file_download"})])),_:1})),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"screenshot_monitor",title:"Toggle section details"})])),_:1},8,["disable"]),(0,l.Wm)(u,{dense:"",unelevated:"",size:"md",disable:e.disabled,onClick:s},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"tag",title:"Track tags details "})])),_:1},8,["disable"])])),_:1})])}}};var J=a(7236);const $=X,ee=$;w()(X,"components",{QBtnGroup:J.Z,QBtn:R.Z,QIcon:C.Z});const te={class:"-mb-md"},ae={__name:"SidebarPlayerTrackDetailsModal",props:{coverImage:String,track:Object},emits:["hide"],setup(e,{emit:t}){const a=(0,n.iH)(!0);function s(){t("hide")}return(t,n)=>{const r=(0,l.up)("q-img"),i=(0,l.up)("q-input"),u=(0,l.up)("q-icon"),o=(0,l.up)("q-card-section"),d=(0,l.up)("q-separator"),m=(0,l.up)("q-card"),c=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(c,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),onHide:s},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{src:e.coverImage,width:"400px",height:"400px"},null,8,["src"]),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l._)("div",te,[(0,l.Wm)(i,{size:"xs",disable:"",square:"",outlined:"",type:"text",label:"Title","model-value":e.track?e.track.title:"No title"},null,8,["model-value"]),(0,l.Wm)(i,{size:"xs",disable:"",square:"",outlined:"",type:"text",label:"Album","model-value":e.track?e.track.album:"No album"},null,8,["model-value"]),(0,l.Wm)(i,{size:"xs",disable:"",square:"",outlined:"",type:"text",label:"Artist","model-value":e.track?e.track.artist:"No artist"},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"link"}),(0,l.Wm)(u,{name:"link"})])),_:1},8,["model-value"])])])),_:1}),(0,l.Wm)(d)])),_:1})])),_:1},8,["modelValue"])}}};var le=a(2074),ne=a(4458),se=a(3190),re=a(6611),ie=a(926);const ue=ae,oe=ue;w()(ae,"components",{QDialog:le.Z,QCard:ne.Z,QImg:b.Z,QCardSection:se.Z,QInput:re.Z,QIcon:C.Z,QSeparator:ie.Z});var de=a(2719),me=a(1320);const ce=(0,l._)("audio",{id:"audio",class:"is-hidden"},null,-1),pe={__name:"SidebarPlayer",setup(e){const t=(0,o.Z)(),{t:a}=(0,d.QT)(),s=(0,u.F)();s.load();const r=(0,n.iH)(!1),m=s.getVolume||1,v=(0,p.n)(),g=(0,n.iH)(null),b=(0,n.iH)(!1),k=(0,n.iH)(!0),w=(0,de.d)(),f=(0,me.l)(),y=(0,l.Fl)((()=>{const e=w.getCurrentElement;return null!=e.track})),h=(0,l.Fl)((()=>{const e=w.getCurrentElement;return e&&e.track&&e.track.id||null})),x=(0,l.Fl)((()=>{const e=w.getCurrentElement;return e&&e.track&&e.track.favorited||null})),W=(0,l.Fl)((()=>{const e=w.getCurrentElement;return e&&e.track&&e.track.covers&&e.track.covers.normal||null})),P=(0,l.Fl)((()=>{const e=w.getCurrentElement;return e&&e.track&&e.track.covers&&e.track.covers.small||null})),E=(0,l.Fl)((()=>null==h.value)),I=(0,n.iH)({duration:0,currentTime:0,currentProgress:0,position:0});function C(e){i.api.track.increasePlayCount(e).then((e=>{})).catch((e=>{switch(r.value=!1,e.response.status){default:t.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function q(){const e=w.getCurrentElement;if(e&&e.track){r.value=!0;const l=e.track.favorited?i.api.track.unSetFavorite:i.api.track.setFavorite;l(e.track.id).then((t=>{e.track.favorited=t.data.favorited,r.value=!1})).catch((e=>{switch(r.value=!1,e.response.status){default:t.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}}function T(){v.interact(),C(h.value),w.skipPrevious()}function Z(e){v.interact(),v.play(e)}function z(){v.interact(),C(h.value),w.skipNext()}function U(e){v.setVolume(e),s.saveVolume(e)}function L(e){e>=0&&e<1&&v.setCurrentTime(v.getDuration*e)}return(0,l.bv)((()=>{g.value=v.getElement,v.setVolume(m),g.value.addEventListener("ended",(e=>{console.debug("Audio is ended"),y.value&&C(h.value),w.allowSkipNext?z():f.setStatusStopped()})),g.value.addEventListener("error",(e=>{console.debug("Audio loading error"),console.log(e)})),g.value.addEventListener("timeupdate",(e=>{I.value.currentProgress=g.value.currentTime/g.value.duration,I.value.duration=Math.floor(g.value.duration),I.value.currentTime=Math.floor(g.value.currentTime),isNaN(I.value.currentProgress)?I.value.position=0:I.value.position=Number(I.value.currentProgress.toFixed(2))}))})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(_,{coverImage:W.value,smallVinylImage:P.value,rotateVinyl:(0,n.SU)(f).isPlaying},null,8,["coverImage","smallVinylImage","rotateVinyl"]),ce,(0,l.wy)((0,l.Wm)(S,null,null,512),[[c.F8,k.value]]),(0,l.Wm)(Q,{disabled:E.value,defaultValue:(0,n.SU)(m),onVolumeChange:U},null,8,["disabled","defaultValue"]),(0,l.Wm)(H,{currentElement:(0,n.SU)(w).getCurrentElement},null,8,["currentElement"]),(0,l.Wm)(M,{disabled:E.value,allowSkipPrevious:(0,n.SU)(w).allowSkipPrevious,allowPlay:!0,allowSkipNext:(0,n.SU)(w).allowSkipNext,isPlaying:(0,n.SU)(f).isPlaying,onSkipPrevious:T,onPlay:Z,onSkipNext:z},null,8,["disabled","allowSkipPrevious","allowSkipNext","isPlaying"]),(0,l.Wm)(O,{disabled:E.value,currentElementTimeData:I.value,onSeek:L},null,8,["disabled","currentElementTimeData"]),(0,l.Wm)(ee,{disabled:E.value,downloadURL:(0,n.SU)(w).getCurrentElementURL,favorited:x.value,onToggleAnalyzer:t[0]||(t[0]=e=>k.value=!k.value),onToggleTrackDetailsModal:t[1]||(t[1]=e=>b.value=!0),onToggleFavorite:q},null,8,["disabled","downloadURL","favorited"]),b.value?((0,l.wg)(),(0,l.j4)(oe,{key:0,coverImage:W.value,track:(0,n.SU)(w).getCurrentElement,onHide:t[2]||(t[2]=e=>b.value=!1)},null,8,["coverImage","track"])):(0,l.kq)("",!0)]))}},ve=pe,ge=ve,be={__name:"AppLeftSidebar",setup(e){return(e,t)=>{const a=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(a,{class:"q-ma-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(ge)])),_:1})}}},ke=be,we=ke;w()(be,"components",{QCard:ne.Z});const fe=(0,l._)("img",{src:"icons/favicon-96x96.png"},null,-1),_e={class:"text-center"},ye={__name:"MainLayout",setup(e){const{t}=(0,d.QT)(),a=(0,o.Z)(),c=(0,r.tv)(),v=(0,p.n)(),g=(0,de.d)(),b=(0,me.l)(),k=(0,n.iH)(null),w=(0,u.F)(),f=(0,n.iH)(null),_=(0,n.iH)([]),y=(0,n.iH)(!1),h=(0,n.iH)([]);function x(e,l){e&&e.trim().length>0?y.value||(_.value=[],y.value=!0,l((()=>{i.api.track.search({text:e},1,5,!1,"title","ASC").then((e=>{h.value=e.data.data.items,_.value=h.value.map((e=>({id:e.id,label:e.title,caption:t("fastSearchResultCaption",{artistName:e.artist.name,albumTitle:e.album.title,albumYear:e.album.year})}))),y.value=!1})).catch((e=>{y.value=!1,a.notify({type:"negative",message:t("API Error: fatal error"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}))):l((()=>{_.value=[]}))}function S(e){const t=h.value.find((t=>t.id==e));t&&(g.saveElements([{track:t}]),b.isPlaying||v.play())}const W=(0,n.iH)([{shortLabel:"EN",label:"English",value:"en-US"},{shortLabel:"ES",label:"Español",value:"es-ES"},{shortLabel:"GL",label:"Galego",value:"gl-GL"}]),P=W.value.find((e=>e.value==m.defaultLocale)),E=(0,n.iH)(P||W.value[0]);function I(e,t){E.value=e,m.i18n.global.locale.value=e.value,t&&w.saveLocale(e.value)}const C=[{name:"dashboard",text:"Dashboard",icon:"analytics",linkRouteName:"dashboard"},{name:"current_playlist",text:"Current playlist",icon:"list_alt",linkRouteName:"currentPlaylist"},{name:"search",text:"Search",icon:"search",linkRouteName:"search"},{name:"browse_artists",text:"Browse artists",icon:"person",linkRouteName:"artists"},{name:"browse_albums",text:"Browse albums",icon:"album",linkRouteName:"albums"},{name:"browse_paths",text:"Browse paths",icon:"folder_open",linkRouteName:"paths"},{name:"browse_playlists",text:"Browse playlists",icon:"list",linkRouteName:"playlists"},{name:"browse_radio_stations",text:"Browse radio stations",icon:"radio",linkRouteName:"radioStations"}],q=(0,l.Fl)((()=>{const e=g.getCurrentElement;return e&&e.track?e.track.url:null}));function T(){v.stop(),i.api.user.signOut().then((e=>{w.signOut(),c.push({name:"signIn"})})).catch((e=>{a.notify({type:"negative",message:t("API Error: fatal error"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}return(0,l.YP)(q,(e=>{k.value&&(k.value.src=e,v.hasPreviousUserInteractions&&v.play(!0))})),v.create(),k.value=v.getElement,g.load(),v.hasPreviousUserInteractions&&(b.isPlaying||v.play(!0)),(e,a)=>{const r=(0,l.up)("q-avatar"),i=(0,l.up)("q-toolbar-title"),u=(0,l.up)("q-spinner"),o=(0,l.up)("q-item-section"),d=(0,l.up)("q-item"),m=(0,l.up)("q-icon"),c=(0,l.up)("q-item-label"),p=(0,l.up)("q-list"),v=(0,l.up)("q-select"),g=(0,l.up)("q-space"),b=(0,l.up)("q-route-tab"),k=(0,l.up)("q-tabs"),w=(0,l.up)("q-separator"),h=(0,l.up)("q-menu"),P=(0,l.up)("q-btn"),q=(0,l.up)("q-toolbar"),Q=(0,l.up)("q-header"),Z=(0,l.up)("q-drawer"),z=(0,l.up)("q-ajax-bar"),U=(0,l.up)("router-view"),L=(0,l.up)("q-page-container"),N=(0,l.up)("q-layout"),V=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(N,{view:"hHh Lpr lff"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q,{class:"bg-grey-3 text-black shadow-2 rounded-borders"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{square:"",size:"42px",class:"q-mr-sm"},{default:(0,l.w5)((()=>[fe])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Spieldose")])),_:1}),(0,l.Wm)(v,{ref:"search",dense:"",standout:"","use-input":"","hide-selected":"",class:"q-mx-md",filled:"",color:"pink","stack-label":!1,label:(0,n.SU)(t)("Search..."),modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),options:_.value,onFilter:x,style:{width:"40%","max-width":"500px"}},(0,l.Nv)({option:(0,l.w5)((e=>[(0,l.Wm)(p,{class:"bg-grey-2 text-dark"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,(0,l.dG)(e.itemProps,{onClick:t=>S(e.opt.id)}),{default:(0,l.w5)((()=>[(0,l.Wm)(o,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"music_note"})])),_:1}),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.opt.label),1)])),_:2},1024),(0,l.Wm)(c,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.opt.caption),1)])),_:2},1024)])),_:2},1024)])),_:2},1040,["onClick"])])),_:2},1024)])),_:2},[y.value?{name:"no-option",fn:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l._)("div",_e,[(0,l.Wm)(u,{color:"pink",size:"32px"})])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["label","modelValue","options"]),(0,l.Wm)(g),(0,l.Wm)(k,{shrink:""},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(C,(e=>(0,l.Wm)(b,{key:e.name,to:{name:e.linkRouteName},name:e.name,icon:e.icon,label:(0,n.SU)(t)(e.text),"no-caps":"","inline-label":"",exact:""},null,8,["to","name","icon","label"]))),64))])),_:1}),(0,l.Wm)(P,{flat:"","no-caps":"",stack:"",icon:"language"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(E.value.shortLabel)+" ",1),(0,l.Wm)(m,{name:"arrow_drop_down",size:"16px"}),(0,l.Wm)(h,{"auto-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{dense:"",style:{"min-width":"200px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"GL__menu-link-signed-in"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Uk)((0,s.zw)((0,n.SU)(t)("Selected language"))+": ",1),(0,l._)("strong",null,(0,s.zw)(E.value.label),1)])])),_:1})])),_:1}),(0,l.Wm)(w),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(W.value,(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(d,{clickable:"",disable:E.value.value==e.value,key:e.value,onClick:t=>I(e,!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,s.zw)(e.label),1)])),_:2},1024)])),_:2},1032,["disable","onClick"])),[[V]]))),128))])),_:1})])),_:1})])),_:1}),(0,l.Wm)(P,{icon:"logout",label:(0,n.SU)(t)("Signout"),flat:"","no-caps":"",stack:"",onClick:T},null,8,["label"])])),_:1})])),_:1}),(0,l.Wm)(Z,{side:"left",persistent:"","show-if-above":"",width:450,class:"bg-grey-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(we)])),_:1}),(0,l.Wm)(L,{class:"bg-grey-3 q-mt-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(z),(0,l.Wm)(U)])),_:1})])),_:1})}}};var he=a(7605),xe=a(6602),Se=a(1663),We=a(1357),Pe=a(1973),Ee=a(8401),Ie=a(3902),Ce=a(3115),qe=a(136),Te=a(7817),Qe=a(3333),Ze=a(5290),ze=a(906),Ue=a(2133),Le=a(1602),Ne=a(2146);const Ve=ye,De=Ve;w()(ye,"components",{QLayout:he.Z,QHeader:xe.Z,QToolbar:Se.Z,QAvatar:We.Z,QToolbarTitle:Pe.Z,QSelect:Ee.Z,QItem:E.Z,QItemSection:I.Z,QSpinner:Ie.Z,QList:P.Z,QIcon:C.Z,QItemLabel:Ce.Z,QSpace:qe.Z,QTabs:Te.Z,QRouteTab:Qe.Z,QBtn:R.Z,QMenu:Ze.Z,QSeparator:ie.Z,QImg:b.Z,QDrawer:ze.Z,QPageContainer:Ue.Z,QAjaxBar:Le.Z}),w()(ye,"directives",{ClosePopup:Ne.Z})}}]);