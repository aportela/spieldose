"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[187],{1187:(e,a,t)=>{t.r(a),t.d(a,{default:()=>He});var l=t(9835),s=t(499),n=t(6970),o=t(9302),r=t(6647),i=t(4376);const u={class:"text-h6 row"},m={class:"col text-left"},c={class:"col text-right"},p={key:1},d={__name:"DashboardBaseBlock",props:{className:{type:String},loading:{type:Boolean},icon:{type:String},title:{type:String}},emits:["refresh"],setup(e,{emit:a}){const{t}=(0,r.QT)();function o(){a("refresh")}return(a,r)=>{const i=(0,l.up)("q-icon"),d=(0,l.up)("q-spinner"),y=(0,l.up)("q-card-section"),b=(0,l.up)("q-skeleton"),k=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(k,{class:"my-card q-ma-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"bg-grey-3 text-black"},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l._)("div",m,[(0,l.Wm)(i,{name:e.icon,class:"cursor-pointer q-mr-sm"},null,8,["name"]),(0,l.Uk)((0,n.zw)(e.title),1)]),(0,l._)("div",c,[e.loading?((0,l.wg)(),(0,l.j4)(d,{key:0,color:"pink",size:"sm",class:"q-ml-sm",thickness:8})):((0,l.wg)(),(0,l.j4)(i,{key:1,name:"refresh",class:"cursor-pointer",onClick:o,title:(0,s.SU)(t)("reload")},null,8,["title"]))])])])),_:1}),(0,l.Wm)(y,{class:"bg-white text-black",style:{"min-height":"17em"}},{default:(0,l.w5)((()=>[(0,l.WI)(a.$slots,"body",{},(()=>[e.loading?((0,l.wg)(),(0,l.j4)(b,{key:0,type:"text",square:"",animation:"blink",height:"198px"})):((0,l.wg)(),(0,l.iD)("div",p,[(0,l.WI)(a.$slots,"tabs"),(0,l.WI)(a.$slots,"list"),(0,l.WI)(a.$slots,"chart")]))]))])),_:3})])),_:3})}}};var y=t(4458),b=t(3190),k=t(2857),g=t(3902),w=t(7133),v=t(9984),D=t.n(v);const h=d,q=h;D()(d,"components",{QCard:y.Z,QCardSection:b.Z,QIcon:k.Z,QSpinner:g.Z,QSkeleton:w.ZP});var _=t(8106);const f={key:0,class:"is-size-6-5 dashboard_list_item"},S={key:0},W={__name:"DashboardBaseBlockListElementTrack",props:{track:{type:Object}},setup(e){const{t:a}=(0,r.QT)();return(t,o)=>{const r=(0,l.up)("q-icon"),i=(0,l.up)("router-link");return e.track?((0,l.wg)(),(0,l.iD)("li",f,[(0,l.WI)(t.$slots,"prepend"),(0,l.Wm)(r,{name:"play_arrow",size:"sm",title:(0,s.SU)(a)("play track"),class:"cursor-pointer q-mr-xs",onClick:o[0]||(o[0]=a=>(0,s.SU)(_.dC).play(e.track))},null,8,["title"]),(0,l.Wm)(r,{name:"add_box",size:"sm",title:(0,s.SU)(a)("enqueue track"),class:"cursor-pointer q-mr-xs",onClick:o[1]||(o[1]=a=>(0,s.SU)(_.dC).enqueue(e.track))},null,8,["title"]),(0,l._)("span",null,(0,n.zw)(e.track.title),1),e.track.artist.name?((0,l.wg)(),(0,l.iD)("span",S,[(0,l.Uk)(" / "),(0,l.Wm)(i,{to:{name:"artist",params:{name:e.track.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.track.artist.name),1)])),_:1},8,["to"])])):(0,l.kq)("",!0),(0,l.WI)(t.$slots,"append")])):(0,l.kq)("",!0)}}},U=W,x=U;D()(W,"components",{QIcon:k.Z});const Y={key:0,class:"is-size-6-5 dashboard_list_item"},T={key:0},Z={__name:"DashboardBaseBlockListElementArtist",props:{artist:{type:Object}},setup(e){return(a,t)=>{const s=(0,l.up)("q-icon"),o=(0,l.up)("router-link");return e.artist?((0,l.wg)(),(0,l.iD)("li",Y,[(0,l.WI)(a.$slots,"prepend"),(0,l.Wm)(s,{name:"link",size:"sm",class:"q-mr-xs"}),e.artist.name?((0,l.wg)(),(0,l.iD)("span",T,[(0,l.Wm)(o,{to:{name:"artist",params:{name:e.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.artist.name),1)])),_:1},8,["to"])])):(0,l.kq)("",!0),(0,l.WI)(a.$slots,"append")])):(0,l.kq)("",!0)}}},P=Z,z=P;D()(Z,"components",{QIcon:k.Z});const Q={key:0,class:"is-size-6-5 dashboard_list_item"},C={key:0},H={key:1},I={__name:"DashboardBaseBlockListElementAlbum",props:{album:{type:Object}},setup(e){return(a,t)=>{const s=(0,l.up)("q-icon"),o=(0,l.up)("router-link");return e.album?((0,l.wg)(),(0,l.iD)("li",Q,[(0,l.WI)(a.$slots,"prepend"),(0,l.Wm)(s,{name:"album",size:"sm",class:"q-mr-xs"}),(0,l._)("span",null,(0,n.zw)(e.album.title),1),e.album.year?((0,l.wg)(),(0,l.iD)("span",C," ("+(0,n.zw)(e.album.year)+") ",1)):(0,l.kq)("",!0),e.album.albumArtistName?((0,l.wg)(),(0,l.iD)("span",H,[(0,l.Uk)(" / "),(0,l.Wm)(o,{to:{name:"artist",params:{name:e.album.albumArtistName}}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.album.albumArtistName),1)])),_:1},8,["to"])])):(0,l.kq)("",!0),(0,l.WI)(a.$slots,"append")])):(0,l.kq)("",!0)}}},A=I,B=A;D()(I,"components",{QIcon:k.Z});const M={key:0,class:"is-size-6-5 dashboard_list_item"},N={__name:"DashboardBaseBlockListElementGenre",props:{genre:{type:Object}},setup(e){return(a,t)=>{const s=(0,l.up)("q-icon");return e.genre?((0,l.wg)(),(0,l.iD)("li",M,[(0,l.WI)(a.$slots,"prepend"),(0,l.Wm)(s,{name:"tag",size:"sm"}),(0,l._)("span",null,(0,n.zw)(e.genre.name),1),(0,l.WI)(a.$slots,"append")])):(0,l.kq)("",!0)}}},j=N,E=j;D()(N,"components",{QIcon:k.Z});var L=t(1569);const K={key:0,class:"q-px-sm"},V={class:"q-ml-sm"},$={key:1,class:"q-px-sm"},F={class:"q-ml-sm"},R={key:2,class:"q-px-sm"},G={class:"q-ml-sm"},O={key:3,class:"q-px-sm"},J={class:"q-ml-sm"},X={key:4},ee={key:0,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},ae={key:1,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},te=5,le={__name:"DashboardBaseBlockTop",props:{icon:{type:String},entity:{type:String},globalStats:Boolean},setup(e){const a=e,t=(0,o.Z)(),{t:u}=(0,r.QT)(),m=(0,s.iH)(!1),c=(0,s.iH)([]),p=(0,s.iH)(null),d=(0,l.Fl)((()=>a.globalStats||!1));(0,l.YP)(d,(e=>{y.global=d.value,D()}));let y={fromDate:null,toDate:null,global:d.value};(0,l.YP)(p,(e=>{switch(y={fromDate:null,toDate:null,global:d.value},e){case"today":y.fromDate=i.ZP.formatDate(Date.now(),"YYYYMMDD"),y.toDate=i.ZP.formatDate(Date.now(),"YYYYMMDD");break;case"lastWeek":y.fromDate=i.ZP.formatDate(i.ZP.addToDate(Date.now(),{days:-7}),"YYYYMMDD"),y.toDate=i.ZP.formatDate(Date.now(),"YYYYMMDD");break;case"lastMonth":y.fromDate=i.ZP.formatDate(i.ZP.addToDate(Date.now(),{months:-1}),"YYYYMMDD"),y.toDate=i.ZP.formatDate(Date.now(),"YYYYMMDD");break;case"lastYear":y.fromDate=i.ZP.formatDate(i.ZP.addToDate(Date.now(),{years:-1}),"YYYYMMDD"),y.toDate=i.ZP.formatDate(Date.now(),"YYYYMMDD");break;case"always":break}D()}));const b=[{label:"Today",value:"today"},{label:"Last week",value:"lastWeek"},{label:"Last month",value:"lastMonth"},{label:"Last year",value:"lastYear"},{label:"Always",value:"always"}],k=(0,l.Fl)((()=>{switch(a.entity){case"tracks":return u("Top played tracks");case"artists":return u("Top played artists");case"albums":return u("Top played albums");case"genres":return u("Top played genres");default:return null}}));let g=null;switch(a.entity){case"tracks":g=L.api.metrics.getTracks;break;case"artists":g=L.api.metrics.getArtists;break;case"albums":g=L.api.metrics.getAlbums;break;case"genres":g=L.api.metrics.getGenres;break}const w=(0,s.iH)(Date.now()),v=(0,s.iH)(!1);function D(){v.value=!1,p.value&&(m.value=!0,g(y,"playCount",te).then((e=>{c.value=e.data.data,w.value=Date.now(),m.value=!1})).catch((e=>{v.value=!0,m.value=!1,t.notify({type:"negative",message:"API Error: error loading metrics",caption:u("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})})))}return p.value="lastWeek",(a,t)=>{const o=(0,l.up)("q-tab"),r=(0,l.up)("q-tabs"),i=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.j4)((0,l.LL)(q),{icon:e.icon||"format_list_numbered",title:k.value,loading:m.value,onRefresh:D},{tabs:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),"no-caps":"",class:"text-pink-7 q-mb-md"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(b,(e=>(0,l.Wm)(o,{key:e.value,name:e.value,label:(0,s.SU)(u)(e.label)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),list:(0,l.w5)((()=>["tracks"==e.entity?((0,l.wg)(),(0,l.iD)("ol",K,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.value,((e,a,t,o)=>{const r=w.value;if(o&&o.key===e.id&&(0,l.nQ)(o,r))return o;const i=((0,l.wg)(),(0,l.j4)(x,{key:e.id,track:e.track},{append:(0,l.w5)((()=>[(0,l._)("span",V,(0,n.zw)(e.playCount)+" "+(0,n.zw)((0,s.SU)(u)(e.playCount>1?"nPlayCounts":"onePlayCount")),1)])),_:2},1032,["track"]));return i.memo=r,i}),t,1),128))])):"artists"==e.entity?((0,l.wg)(),(0,l.iD)("ol",$,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.value,((e,a,t,o)=>{const r=w.value;if(o&&o.key===e.id&&(0,l.nQ)(o,r))return o;const i=((0,l.wg)(),(0,l.j4)(z,{key:e.id,artist:e},{append:(0,l.w5)((()=>[(0,l._)("span",F,(0,n.zw)(e.playCount)+" "+(0,n.zw)((0,s.SU)(u)(e.playCount>1?"nPlayCounts":"onePlayCount")),1)])),_:2},1032,["artist"]));return i.memo=r,i}),t,3),128))])):"albums"==e.entity?((0,l.wg)(),(0,l.iD)("ol",R,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.value,((e,a,t,o)=>{const r=w.value;if(o&&o.key===e.id&&(0,l.nQ)(o,r))return o;const i=((0,l.wg)(),(0,l.j4)(B,{key:e.id,album:e},{append:(0,l.w5)((()=>[(0,l._)("span",G,(0,n.zw)(e.playCount)+" "+(0,n.zw)((0,s.SU)(u)(e.playCount>1?"nPlayCounts":"onePlayCount")),1)])),_:2},1032,["album"]));return i.memo=r,i}),t,5),128))])):"genres"==e.entity?((0,l.wg)(),(0,l.iD)("ol",O,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.value,((e,a,t,o)=>{const r=w.value;if(o&&o.key===e.id&&(0,l.nQ)(o,r))return o;const i=((0,l.wg)(),(0,l.j4)(E,{key:e.id,genre:e},{append:(0,l.w5)((()=>[(0,l._)("span",J,(0,n.zw)(e.playCount)+" "+(0,n.zw)((0,s.SU)(u)(e.playCount>1?"nPlayCounts":"onePlayCount")),1)])),_:2},1032,["genre"]));return i.memo=r,i}),t,7),128))])):(0,l.kq)("",!0),m.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",X,[v.value?((0,l.wg)(),(0,l.iD)("h5",ee,[(0,l.Wm)(i,{name:"error",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(u)("Error loading data")),1)])):c.value&&c.value.length>0?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("h5",ae,[(0,l.Wm)(i,{name:"warning",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(u)("No enought data")),1)]))]))])),_:1},40,["icon","title","loading"])}}};var se=t(7817),ne=t(7661);const oe=le,re=oe;D()(le,"components",{QTabs:se.Z,QTab:ne.Z,QIcon:k.Z});var ie=t(8442);const ue={key:0,class:"q-px-sm"},me={key:1,class:"q-px-sm"},ce={key:2,class:"q-px-sm"},pe={key:3,class:"q-px-sm"},de={key:4},ye={key:0,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},be={key:1,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},ke=5,ge={__name:"DashboardBaseBlockRecently",props:{icon:{type:String},played:{type:Boolean},added:{type:Boolean},globalStats:Boolean},setup(e){const a=e,t=(0,o.Z)(),{t:i}=(0,r.QT)(),u=(0,s.iH)(!1),m=(0,s.iH)([]),c=(0,l.Fl)((()=>{let e=null;return a.played?e=i("Recently played"):a.added&&(e=i("Recently added")),e})),p=(0,s.iH)(null);(0,l.YP)(p,(()=>{b={global:y.value},w()}));const d=[{label:"Tracks",value:"tracks",function:L.api.metrics.getTracks,listItemType:""},{label:"Artists",value:"artists",function:L.api.metrics.getArtists},{label:"Albums",value:"albums",function:L.api.metrics.getAlbums},{label:"Genres",value:"genres",function:L.api.metrics.getGenres}],y=(0,l.Fl)((()=>a.globalStats||!1));(0,l.YP)(y,(e=>{a.played&&(b.global=y.value,w())}));let b={global:y.value};const k=(0,s.iH)(Date.now()),g=(0,s.iH)(!1);function w(){if(g.value=!1,p.value){m.value=[];const e=d.filter((e=>e.value==p.value))[0].function;u.value=!0;let l=null;a.played?l="recentlyPlayed":a.added&&(l="recentlyAdded"),e(b,l,ke).then((e=>{m.value=e.data.data,k.value=Date.now(),u.value=!1})).catch((e=>{g.value=!0,u.value=!1,t.notify({type:"negative",message:"API Error: error loading metrics",caption:i("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})}))}}return p.value="tracks",(a,t)=>{const o=(0,l.up)("q-tab"),r=(0,l.up)("q-tabs"),y=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.j4)((0,l.LL)(q),{icon:e.icon||"format_list_numbered",title:c.value,loading:u.value,onRefresh:w},{tabs:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),"no-caps":"",class:"text-pink-7 q-mb-md"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(d,(e=>(0,l.Wm)(o,{key:e.value,name:e.value,label:(0,s.SU)(i)(e.label)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),list:(0,l.w5)((()=>["tracks"==p.value?((0,l.wg)(),(0,l.iD)("ol",ue,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.value,((a,t,s,n)=>{const o=k.value;if(n&&n.key===a.id&&(0,l.nQ)(n,o))return n;const r=((0,l.wg)(),(0,l.j4)(x,{key:a.id,track:a.track},(0,l.Nv)({_:2},[e.played?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.lastPlayTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"0"}:e.added?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.addedTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"1"}:void 0]),1032,["track"]));return r.memo=o,r}),t,1),128))])):"artists"==p.value?((0,l.wg)(),(0,l.iD)("ol",me,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.value,((a,t,s,n)=>{const o=k.value;if(n&&n.key===a.id&&(0,l.nQ)(n,o))return n;const r=((0,l.wg)(),(0,l.j4)(z,{key:a.id,artist:a},(0,l.Nv)({_:2},[e.played?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.lastPlayTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"0"}:e.added?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.addedTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"1"}:void 0]),1032,["artist"]));return r.memo=o,r}),t,3),128))])):"albums"==p.value?((0,l.wg)(),(0,l.iD)("ol",ce,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.value,((a,t,s,n)=>{const o=k.value;if(n&&n.key===a.id&&(0,l.nQ)(n,o))return n;const r=((0,l.wg)(),(0,l.j4)(B,{key:a.id,album:a},(0,l.Nv)({_:2},[e.played?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.lastPlayTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"0"}:e.added?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.addedTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"1"}:void 0]),1032,["album"]));return r.memo=o,r}),t,5),128))])):"genres"==p.value?((0,l.wg)(),(0,l.iD)("ol",pe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.value,((a,t,s,n)=>{const o=k.value;if(n&&n.key===a.name&&(0,l.nQ)(n,o))return n;const r=((0,l.wg)(),(0,l.j4)(E,{key:a.name,genre:a},(0,l.Nv)({_:2},[e.played?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.lastPlayTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"0"}:e.added?{name:"append",fn:(0,l.w5)((()=>[(0,l.Wm)(ie.Z,{className:"q-ml-sm",timestamp:1e3*a.addedTimestamp},{prepend:(0,l.w5)((()=>[(0,l.Uk)("(")])),append:(0,l.w5)((()=>[(0,l.Uk)(")")])),_:2},1032,["timestamp"])])),key:"1"}:void 0]),1032,["genre"]));return r.memo=o,r}),t,7),128))])):(0,l.kq)("",!0),u.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",de,[g.value?((0,l.wg)(),(0,l.iD)("h5",ye,[(0,l.Wm)(y,{name:"error",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(i)("Error loading data")),1)])):m.value&&m.value.length>0?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("h5",be,[(0,l.Wm)(y,{name:"warning",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(i)("No enought data")),1)]))]))])),_:1},40,["icon","title","loading"])}}},we=ge,ve=we;D()(ge,"components",{QTabs:se.Z,QTab:ne.Z,QIcon:k.Z});var De=t(1957),he=t(9844);const qe={class:"ct-chart"},_e={key:0},fe={key:0,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},Se={key:1,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},We={__name:"DashboardBaseBlockChart",props:{icon:{type:String},globalStats:Boolean},setup(e){const a=e,t=(0,o.Z)(),{t:i}=(0,r.QT)(),u=(0,s.iH)(!1);let m=[];const c=(0,s.iH)(null);(0,l.YP)(c,(e=>{g()}));const p=[{label:"Hour",value:"hour"},{label:"Weekday",value:"weekday"},{label:"Month",value:"month"},{label:"Year",value:"year"}],d=(0,l.Fl)((()=>a.globalStats||!1));(0,l.YP)(d,(e=>{g()}));const y={low:0,showArea:!0,fullWidth:!0,chartPadding:{left:48,right:48}};function b(){let e=[],a=[];switch(c.value){case"hour":e=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],a=new Array(24).fill(0),m.forEach((e=>{a[new Number(e.hour)]=e.total}));break;case"weekday":e=[i("Sunday"),i("Monday"),i("Tuesday"),i("Wednesday"),i("Thursday"),i("Friday"),i("Saturday")],a=new Array(7).fill(0),m.forEach((e=>{a[new Number(e.weekday)]=e.total}));break;case"month":e=[i("January"),i("February"),i("March"),i("April"),i("May"),i("June"),i("July"),i("August"),i("September"),i("October"),i("November"),i("December")],a=new Array(12).fill(0),m.forEach((e=>{a[new Number(e.month)]=e.total}));break;case"year":e=m.map((e=>e.year)),a=m.map((e=>e.total));break}e.length>1?new he.wW(".ct-chart",{labels:e,series:[a]},y):new he.vz(".ct-chart",{labels:e,series:[a]},y)}const k=(0,s.iH)(!1);function g(){k.value=!1,c.value&&(u.value=!0,L.api.metrics.getDataRanges({dateRange:c.value,global:d.value}).then((e=>{m=e.data.data,u.value=!1,(0,l.Y3)((()=>{b()}))})).catch((e=>{k.value=!0,u.value=!1,t.notify({type:"negative",message:"API Error: error loading metrics",caption:i("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})})})))}return c.value="hour",(a,t)=>{const o=(0,l.up)("q-tab"),r=(0,l.up)("q-tabs"),d=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.j4)((0,l.LL)(q),{icon:e.icon||"analytics",title:(0,s.SU)(i)("Play stats"),loading:u.value,onRefresh:g},{tabs:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),"no-caps":"",class:"text-pink-7 q-mb-md"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(p,(e=>(0,l.Wm)(o,{key:e.value,name:e.value,label:(0,s.SU)(i)(e.label)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),chart:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",qe,null,512),[[De.F8,(0,s.SU)(m)&&(0,s.SU)(m).length>0]]),u.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",_e,[k.value?((0,l.wg)(),(0,l.iD)("h5",fe,[(0,l.Wm)(d,{name:"error",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(i)("Error loading data")),1)])):(0,s.SU)(m)&&(0,s.SU)(m).length>0?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("h5",Se,[(0,l.Wm)(d,{name:"warning",size:"xl"}),(0,l.Uk)(" "+(0,n.zw)((0,s.SU)(i)("No enought data")),1)]))]))])),_:1},40,["icon","title","loading"])}}},Ue=We,xe=Ue;D()(We,"components",{QTabs:se.Z,QTab:ne.Z,QIcon:k.Z});const Ye={class:"row"},Te={class:"row"},Ze={class:"col-12"},Pe={__name:"DashboardPage",setup(e){const a=(0,o.Z)(),{t}=(0,r.QT)(),i=(0,s.iH)([{label:"My stats",value:"myStats",icon:"person"},{label:"Global stats",value:"globalStats",icon:"public"}]),u=(0,s.iH)(i.value[0].value),m=(0,l.Fl)((()=>a.screen.width>=2560?"col-xl-4":"col-xl-6"));return(e,a)=>{const o=(0,l.up)("q-breadcrumbs-el"),r=(0,l.up)("q-breadcrumbs"),c=(0,l.up)("q-tab"),p=(0,l.up)("q-tabs"),d=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(d,{class:"q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{icon:"home",label:"Spieldose"}),(0,l.Wm)(o,{icon:"analytics",label:(0,s.SU)(t)("Dashboard")},null,8,["label"])])),_:1}),(0,l.Wm)(p,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),"inline-label":"","no-caps":"",dense:"",class:"text-pink-7 q-mb-md shadow-2"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.value,(e=>((0,l.wg)(),(0,l.j4)(c,{key:e.value,name:e.value,icon:e.icon,label:(0,s.SU)(t)(e.label)},null,8,["name","icon","label"])))),128))])),_:1},8,["modelValue"]),(0,l._)("div",Ye,[(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(re,{entity:"tracks",globalStats:"globalStats"==u.value},null,8,["globalStats"])],2),(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(re,{entity:"artists",globalStats:"globalStats"==u.value},null,8,["globalStats"])],2),(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(re,{entity:"albums",globalStats:"globalStats"==u.value},null,8,["globalStats"])],2),(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(re,{entity:"genres",globalStats:"globalStats"==u.value},null,8,["globalStats"])],2),(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(ve,{played:!0,globalStats:"globalStats"==u.value},null,8,["globalStats"])],2),(0,l._)("div",{class:(0,n.C_)(["col-lg-6 col-12",m.value])},[(0,l.Wm)(ve,{added:!0,globalStats:"globalStats"==u.value},null,8,["globalStats"])],2)]),(0,l._)("div",Te,[(0,l._)("div",Ze,[(0,l.Wm)(xe,{globalStats:"globalStats"==u.value},null,8,["globalStats"])])])])),_:1})}}};var ze=t(2605),Qe=t(8052);const Ce=Pe,He=Ce;D()(Pe,"components",{QCard:y.Z,QBreadcrumbs:ze.Z,QBreadcrumbsEl:Qe.Z,QTabs:se.Z,QTab:ne.Z})}}]);