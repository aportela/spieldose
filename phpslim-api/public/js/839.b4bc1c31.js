"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[839],{4958:(e,a,s)=>{s.d(a,{n:()=>n});var t=s(1809),l=s(1320);const r=(0,l.l)(),n=(0,t.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player",this.element.crossOrigin="anonymous"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),r.setStatusStopped()},load(){},play(e){e?(this.element.play(),r.setStatusPlaying()):r.isPlaying?(this.element.pause(),r.setStatusPaused()):r.isPaused?(this.element.play(),r.setStatusPlaying()):(this.element.load(),this.element.play(),r.setStatusPlaying())}}})},1320:(e,a,s)=>{s.d(a,{l:()=>l});var t=s(1809);const l=(0,t.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},8839:(e,a,s)=>{s.r(a),s.d(a,{default:()=>I});s(9665);var t=s(9835),l=s(1957),r=s(6970),n=s(499),u=s(9302),i=s(8339),o=s(7712),d=s(1569),p=s(4958);const m=["onSubmit"],c={class:"text-grey-8"},g={class:"text-grey-8"},v={class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},h={__name:"SignInPage",setup(e){const a=(0,p.n)(),{t:s}=(0,o.QT)(),h=(0,u.Z)(),f=(0,i.tv)(),y=(0,n.iH)(!1),w=(0,n.iH)({email:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),b=[e=>!!e||s("Field is required")],S=(0,n.iH)(null),_=(0,n.iH)(null),P=(0,n.iH)(null),E=(0,n.iH)(null);function k(){w.value.email.hasErrors=!1,w.value.email.message=null,w.value.password.hasErrors=!1,w.value.password.message=null,_.value.resetValidation(),E.value.resetValidation()}function I(){k(),_.value.validate(),E.value.validate(),(0,t.Y3)((()=>{_.value.hasError||E.value.hasError||U()}))}function U(){y.value=!0,d.api.user.signIn(S.value,P.value).then((e=>{a.interact(),f.push({name:"dashboard"}),y.value=!1})).catch((e=>{switch(y.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(h.notify({type:"negative",message:s("API Error: missing email param")}),_.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(h.notify({type:"negative",message:s("API Error: missing password param")}),E.value.focus()):h.notify({type:"negative",message:s("API Error: invalid/missing param")});break;case 404:w.value.email.hasErrors=!0,w.value.email.message=s("Email not registered"),(0,t.Y3)((()=>{_.value.focus()}));break;case 401:w.value.password.hasErrors=!0,w.value.password.message=s("Invalid password"),(0,t.Y3)((()=>{E.value.focus()}));break;default:h.notify({type:"negative",message:s("API Error: fatal error"),caption:s("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}return(e,a)=>{const u=(0,t.up)("q-card-section"),i=(0,t.up)("q-icon"),o=(0,t.up)("q-input"),d=(0,t.up)("q-spinner-hourglass"),p=(0,t.up)("q-btn"),h=(0,t.up)("router-link"),f=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(f,{class:"q-pa-md my_card"},{default:(0,t.w5)((()=>[(0,t._)("form",{onSubmit:(0,l.iM)(I,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",style:{padding:"1.25rem"}},[(0,t.Wm)(u,{class:"text-center"},{default:(0,t.w5)((()=>[(0,t._)("h3",null,(0,r.zw)(e.$t("Spieldose")),1),(0,t._)("div",c,(0,r.zw)(e.$t("Sign in below to access your account")),1)])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,{dense:"",outlined:"",ref_key:"emailRef",ref:_,modelValue:S.value,"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),type:"email",name:"email",label:(0,n.SU)(s)("Email"),disable:y.value,autofocus:!0,rules:b,"lazy-rules":"",error:w.value.email.hasErrors,errorMessage:w.value.email.message},{prepend:(0,t.w5)((()=>[(0,t.Wm)(i,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,t.Wm)(o,{dense:"",outlined:"",class:"q-mt-md",ref_key:"passwordRef",ref:E,modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),name:"password",type:"password",label:(0,n.SU)(s)("Password"),disable:y.value,rules:b,"lazy-rules":"",error:w.value.password.hasErrors,errorMessage:w.value.password.message},{prepend:(0,t.w5)((()=>[(0,t.Wm)(i,{name:"key"})])),_:1},8,["modelValue","label","disable","error","errorMessage"])])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,{color:"dark",size:"md",label:e.$t("Sign in"),"no-caps":"",class:"full-width",icon:"account_circle",disable:y.value||!(S.value&&P.value),loading:y.value,type:"submit"},{loading:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"on-left"}),(0,t.Uk)(" "+(0,r.zw)((0,n.SU)(s)("Loading...")),1)])),_:1},8,["label","disable","loading"])])),_:1}),(0,t.Wm)(u,{class:"text-center q-pt-none"},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t.Uk)((0,r.zw)((0,n.SU)(s)("Don't have an account yet ?"))+" ",1),(0,t.Wm)(h,{to:{name:"signUp"}},{default:(0,t.w5)((()=>[(0,t._)("span",v,(0,r.zw)((0,n.SU)(s)("Click here to sign up")),1)])),_:1})])])),_:1})],40,m)])),_:1})}}};var f=s(4458),y=s(3190),w=s(6611),b=s(2857),S=s(8879),_=s(3358),P=s(9984),E=s.n(P);const k=h,I=k;E()(h,"components",{QCard:f.Z,QCardSection:y.Z,QInput:w.Z,QIcon:b.Z,QBtn:S.Z,QSpinnerHourglass:_.Z})}}]);