"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[916],{2719:(e,t,a)=>{a.d(t,{d:()=>u});var l=a(1809),n=a(8612),s=a.n(n);const r={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},u=(0,l.Q_)("currentPlaylist",{state:()=>({elements:[],currentIndex:-1}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,getCurrentIndex:e=>e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=s()(r),t=e.get("currentPlaylistElements");t&&(this.elements=t);const a=e.get("currentPlaylistElementIndex");a>=0&&(this.currentIndex=a)},saveElements(e){this.elements=e,this.currentIndex=e&&e.length>0?0:-1;const t=s()(r);t.set("currentPlaylistElements",e),t.set("currentPlaylistElementIndex",e&&e.length>0?0:-1)},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=s()(r);t.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,a)=>{a.d(t,{n:()=>r});var l=a(1809),n=a(1320);const s=(0,n.l)(),r=(0,l.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),s.setStatusStopped()},load(){},play(e){if(e){const e=this.element.play();void 0!==e&&e.then((()=>{})).catch((e=>{this.element.playback.pause(),this.element.currentTime=0})),s.setStatusPlaying()}else s.isPlaying?(this.element.pause(),s.setStatusPaused()):s.isPaused?(this.element.play(),s.setStatusPlaying()):(this.element.load(),this.element.play(),s.setStatusPlaying())}}})},1320:(e,t,a)=>{a.d(t,{l:()=>n});var l=a(1809);const n=(0,l.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},5916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var l=a(9835),n=a(1957),s=a(6970),r=a(499),u=a(9302),o=a(1569),i=a(4958),c=a(1320),d=a(2719);const m=["onSubmit"],p={key:0},b={key:0,class:"q-pa-lg flex flex-center"},h={class:"q-pa-sm bg-grey-2"},v={class:"bg-grey-2 text-grey-10"},k=(0,l._)("th",{class:"text-center"},"Actions",-1),g={class:"text-left cursor-pointer"},x={class:"text-left"},w={class:"text-left"},_={class:"text-left"},y=(0,l._)("span",{class:"is-clickable"},[(0,l._)("i",{class:"fas fa-link ml-1"})],-1),f={class:"text-right"},S={class:"text-right"},q={class:"text-center"},P={__name:"SearchPage",setup(e){const t=(0,u.Z)(),a=(0,d.d)(),P=(0,i.n)(),W=(0,c.l)(),V=(0,r.iH)(""),I=(0,r.iH)([]),C=(0,r.iH)(!1),E=(0,r.iH)("global"),U=((0,r.iH)(!1),(0,r.iH)(!1)),T=(0,r.iH)(0),Q=(0,r.iH)(1),Z=(0,r.iH)("title"),z=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],A=(0,r.iH)(z[0]);function D(e){Q.value=e,j(!1)}function H(e){e==Z.value?A.value="DESC"==A.value.value?z[0]:z[1]:(A.value=z[0],Z.value=e),j()}function j(e){e&&(Q.value=1),U.value=!1,V.value&&V.value.trim().length>0&&(C.value=!0,o.api.track.search({text:V.value},Q.value,16,!1,Z.value,A.value.value).then((e=>{T.value=e.data.data.pager.totalPages,I.value=e.data.data.items.map((e=>({track:e}))),U.value=!0,C.value=!1})).catch((e=>{C.value=!1,t.notify({type:"negative",message:"API Error: error searching tracks",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"})})))}function N(e){P.interact(),a.saveElements([e])}function B(){P.interact(),W.isStopped||P.stop(),a.saveElements(I.value),U.value=!1,(0,l.Y3)((()=>{P.play(!0)}))}return(e,t)=>{const a=(0,l.up)("q-breadcrumbs-el"),r=(0,l.up)("q-breadcrumbs"),u=(0,l.up)("q-tab"),o=(0,l.up)("q-tabs"),i=(0,l.up)("q-separator"),c=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),P=(0,l.up)("q-tab-panel"),W=(0,l.up)("q-tab-panels"),z=(0,l.up)("q-card"),Y=(0,l.up)("q-pagination"),G=(0,l.up)("q-btn"),K=(0,l.up)("router-link"),L=(0,l.up)("q-btn-group"),M=(0,l.up)("q-spinner-gears"),R=(0,l.up)("q-inner-loading"),F=(0,l.up)("q-markup-table"),J=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(J,null,{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{icon:"home",label:"Spieldose"}),(0,l.Wm)(a,{icon:"search",label:"Search"})])),_:1}),(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=e=>E.value=e),dense:"",class2:"text-grey","active-color2":"primary","indicator-color2":"primary",align:"justify","narrow-indicator":""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"global",label:"Global search"}),(0,l.Wm)(u,{name:"advanced",label:"Advanced search"})])),_:1},8,["modelValue"]),(0,l.Wm)(i),(0,l.Wm)(W,{modelValue:E.value,"onUpdate:modelValue":t[8]||(t[8]=e=>E.value=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{name:"global"},{default:(0,l.w5)((()=>[(0,l._)("form",{onSubmit:(0,n.iM)(j,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,l.Wm)(d,{clearable:"","clear-icon":"close",dense:"",outlined:"",type:"text",name:"searchText",label:"Search text on all fields...",modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),"onKey:modelValue":t[2]||(t[2]=e=>j(!0)),disable:C.value},{prepend:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"search"})])),_:1},8,["modelValue","disable"])],40,m)])),_:1}),(0,l.Wm)(P,{name:"advanced"},{default:(0,l.w5)((()=>[(0,l._)("form",null,[(0,l.Wm)(d,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[3]||(t[3]=t=>e.text=t),label:"Track title",placeholder:"type text condition",hint:"Search on track title",dense:"",clearable:"","clear-icon":"close",disable:C.value},null,8,["modelValue","disable"]),(0,l.Wm)(d,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[4]||(t[4]=t=>e.text=t),label:"Artist name",placeholder:"type text condition",hint:"Search on artist name",dense:"",clearable:"","clear-icon":"close",disable:C.value},null,8,["modelValue","disable"]),(0,l.Wm)(d,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[5]||(t[5]=t=>e.text=t),label:"Album name",placeholder:"type text condition",hint:"Search on album name",dense:"",clearable:"","clear-icon":"close",disable:C.value},null,8,["modelValue","disable"]),(0,l.Wm)(d,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[6]||(t[6]=t=>e.text=t),label:"Album artist",placeholder:"type text condition",hint:"Search on album artist",dense:"",clearable:"","clear-icon":"close",disable:C.value},null,8,["modelValue","disable"]),(0,l.Wm)(d,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[7]||(t[7]=t=>e.text=t),label:"Year",placeholder:"type year condition",hint:"Search on track year",dense:"",clearable:"","clear-icon":"close",disable:C.value},null,8,["modelValue","disable"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),I.value&&I.value.length>0?((0,l.wg)(),(0,l.iD)("div",p,[T.value>1?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)(Y,{modelValue:Q.value,"onUpdate:modelValue":[t[9]||(t[9]=e=>Q.value=e),D],color:"dark",max:T.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:C.value},null,8,["modelValue","max","disable"])])):(0,l.kq)("",!0),(0,l.Wm)(F,{flat:"",bordered:""},{default:(0,l.w5)((()=>[(0,l._)("caption",h,[(0,l.Wm)(G,{outline:"",onClick:B,disable:!U.value,class:"full-width"},{default:(0,l.w5)((()=>[(0,l.Uk)("Send results to playlist")])),_:1},8,["disable"])]),(0,l._)("thead",null,[(0,l._)("tr",v,[(0,l._)("th",{class:"text-left cursor-pointer",onClick:t[10]||(t[10]=e=>H("title"))},[(0,l.Uk)("Title "),"title"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0)]),(0,l._)("th",{class:"text-left cursor-pointer",onClick:t[11]||(t[11]=e=>H("artistName"))},[(0,l.Uk)("Artist "),"artistName"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0)]),(0,l._)("th",{class:"text-left cursor-pointer",onClick:t[12]||(t[12]=e=>H("albumArtistName"))},[(0,l.Uk)("Album Artist "),"albumArtistName"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0)]),(0,l._)("th",{class:"text-left cursor-pointer",onClick:t[13]||(t[13]=e=>H("releaseTitle"))},[(0,l.Uk)("Album "),"releaseTitle"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0)]),(0,l._)("th",{class:"text-right cursor-pointer",onClick:t[14]||(t[14]=e=>H("trackNumber"))},["trackNumber"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0),(0,l.Uk)(" Album Track nÂº")]),(0,l._)("th",{class:"text-right cursor-pointer",onClick:t[15]||(t[15]=e=>H("year"))},["year"==Z.value?((0,l.wg)(),(0,l.j4)(c,{key:0,size:"xl",name:"DESC"==A.value.value?"arrow_drop_down":"arrow_drop_up"},null,8,["name"])):(0,l.kq)("",!0),(0,l.Uk)(" Year")]),k])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(I.value,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.track.id,class:"non-selectable"},[(0,l._)("td",g,(0,s.zw)(e.track.title),1),(0,l._)("td",x,[e.track.artist&&e.track.artist.name?((0,l.wg)(),(0,l.j4)(K,{key:0,to:{name:"artist",params:{name:e.track.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,s.zw)(e.track.artist.name),1)])),_:2},1032,["to"])):(0,l.kq)("",!0)]),(0,l._)("td",w,[e.track.album&&e.track.album.artist.name?((0,l.wg)(),(0,l.j4)(K,{key:0,to:{name:"artist",params:{name:e.track.album.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,s.zw)(e.track.album.artist.name),1)])),_:2},1032,["to"])):(0,l.kq)("",!0)]),(0,l._)("td",_,[(0,l.Uk)((0,s.zw)(e.track.album?e.track.album.title:null),1),y]),(0,l._)("td",f,(0,s.zw)(e.track.trackNumber),1),(0,l._)("td",S,(0,s.zw)(e.track.album?e.track.album.year:null),1),(0,l._)("td",q,[(0,l.Wm)(L,{outline:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{size:"sm",color:"white","text-color":"grey-5",icon:"play_arrow",title:"Play",disable:C.value,onClick:t=>N(e)},null,8,["disable","onClick"]),(0,l.Wm)(G,{size:"sm",color:"white","text-color":"grey-5",icon:"download",title:"Download",disable:C.value,href:e.track.url},null,8,["disable","href"]),(0,l.Wm)(G,{size:"sm",color:"white","text-color":"grey-5",icon:"favorite",title:"Toggle favorite",disabled:""})])),_:2},1024)])])))),128))]),(0,l.Wm)(R,{showing:C.value},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{size:"50px",color:"pink"})])),_:1},8,["showing"])])),_:1})])):(0,l.kq)("",!0)])),_:1})])),_:1})}}};var W=a(9885),V=a(4458),I=a(2605),C=a(8052),E=a(7817),U=a(7661),T=a(926),Q=a(9800),Z=a(4106),z=a(6611),A=a(2857),D=a(996),H=a(6933),j=a(8879),N=a(7236),B=a(854),Y=a(9120),G=a(9984),K=a.n(G);const L=P,M=L;K()(P,"components",{QPage:W.Z,QCard:V.Z,QBreadcrumbs:I.Z,QBreadcrumbsEl:C.Z,QTabs:E.Z,QTab:U.Z,QSeparator:T.Z,QTabPanels:Q.Z,QTabPanel:Z.Z,QInput:z.Z,QIcon:A.Z,QPagination:D.Z,QMarkupTable:H.Z,QBtn:j.Z,QBtnGroup:N.Z,QInnerLoading:B.Z,QSpinnerGears:Y.Z})}}]);