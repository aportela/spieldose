"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[89],{4089:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var a=l(9835),s=l(499),r=l(6970),u=l(8339),n=l(6647),i=l(9302),o=(l(4376),l(5090)),c=l(1569),m=l(8106);const p={style:{float:"left","margin-right":"2em"}},d={style:{"padding-top":"100px"}},g={key:0},y={key:1},v={class:"text-subtitle2"},k={class:"text-h2 text-weight-bolder"},w={class:"text-subtitle2"},h=(0,a._)("p",{style:{clear:"both"}},null,-1),b={key:0,class:"q-mt-md row q-col-gutter-lg"},f={key:0,class:"q-pa-md"},q={key:0,class:"text-left",style:{width:"1em"}},x=(0,a._)("th",{class:"text-left",style:{width:"2em"}},"#",-1),_={class:"text-left"},I={class:"text-left",style:{width:"5em"}},z={key:0},T=(0,a._)("br",null,null,-1),C={__name:"AlbumPage",setup(e){const{t}=(0,n.QT)(),l=(0,i.Z)(),C=(0,u.yj)(),P=(0,o.H)(),S=(0,a.Fl)((()=>P.getCurrentPlaylistTrackId)),U=(0,a.Fl)((()=>P.isPaused?"pause":"play_arrow")),A=(0,s.iH)(!1),E=(0,s.iH)({mbId:null,title:null,artist:{mbId:null,name:null},year:null,covers:[],media:[]}),D=(0,s.iH)(0),W=(0,s.iH)(0),Q=(0,s.iH)(0);function Z(e,a,s,r,u){D.value=0,W.value=0,Q.value=0,A.value=!0,c.api.album.get(e,a,s,r,u).then((e=>{E.value=e.data.album,E.value.media.forEach((e=>{Q.value++,e.tracks.forEach((e=>{D.value++,W.value+=e.length/1e3}))})),A.value=!1})).catch((e=>{switch(A.value=!1,e.response.status){default:l.notify({type:"negative",message:t("API Error: fatal error"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function j(e,t){if(e&&Number.isInteger(e)&&e>0){var l=Math.floor(e/3600),a=Math.floor((e-3600*l)/60),s=Math.floor(e-3600*l-60*a);return a<10&&(a="0"+a),s<10&&(s="0"+s),a+":"+s}return"00:00"}function H(e){m.dC.play(e).then((e=>{})).catch((e=>{switch(e.response.status){default:l.notify({type:"negative",message:t("API Error: error playing track"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function M(e){m.dC.enqueue(e).then((e=>{})).catch((e=>{switch(e.response.status){default:l.notify({type:"negative",message:t("API Error: error enqueueing track"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function B(){m.up.play(E.value.mbId||null,E.value.title||null,E.value.artist.mbId||null,E.value.artist.name||null,E.value.year||null).then((e=>{})).catch((e=>{switch(e.response.status){default:l.notify({type:"negative",message:t("API Error: error playing album"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function F(){m.up.enqueue(E.value.mbId||null,E.value.title||null,E.value.artist.mbId||null,E.value.artist.name||null,E.value.year||null).then((e=>{})).catch((e=>{switch(e.response.status){default:l.notify({type:"negative",message:t("API Error: error enqueueing album"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}function K(){P.interact(),P.isPlaying?P.pause():P.play()}return(0,a.bv)((()=>{Z(C.query.mbId,C.params.title,C.query.artistMBId,C.query.artistName,C.query.year)})),(e,l)=>{const u=(0,a.up)("q-breadcrumbs-el"),n=(0,a.up)("q-breadcrumbs"),i=(0,a.up)("q-img"),o=(0,a.up)("q-spinner"),c=(0,a.up)("q-icon"),m=(0,a.up)("router-link"),C=(0,a.up)("q-markup-table"),Q=(0,a.up)("q-card-section"),Z=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(Z,{class:"q-pa-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"q-mb-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"home",label:"Spieldose"}),(0,a.Wm)(u,{icon:"album",label:(0,s.SU)(t)("Album")},null,8,["label"])])),_:1}),(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a._)("div",p,[E.value.covers.normal?((0,a.wg)(),(0,a.j4)(i,{key:0,src:E.value.covers.normal,width:"400px",height:"400px","spinner-color":"pink","img-style":{"text-align":"left"}},null,8,["src"])):((0,a.wg)(),(0,a.j4)(i,{key:1,src:"images/vinyl.png",alt:"Vinyl",width:"400px",height:"400px","spinner-color":"pink"}))]),(0,a._)("div",d,[A.value?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(o,{size:"120px",color:"pink",class:"q-ml-xl"})])):((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("p",v,(0,r.zw)((0,s.SU)(t)("Album")),1),(0,a._)("p",k,(0,r.zw)(E.value.title),1),(0,a._)("p",w,(0,r.zw)(E.value.artist.name)+" - "+(0,r.zw)(E.value.year)+" - "+(0,r.zw)(D.value)+" "+(0,r.zw)((0,s.SU)(t)("tracks"))+", "+(0,r.zw)(j(Math.round(W.value))),1),(0,a._)("p",null,[(0,a.Wm)(c,{name:"play_arrow",class:"cursor-pointer",size:"xl",title:(0,s.SU)(t)("play album"),onClick:B},null,8,["title"]),(0,a.Uk)(),(0,a.Wm)(c,{name:"add_box",class:"cursor-pointer",size:"xl",title:(0,s.SU)(t)("enqueue album"),onClick:F},null,8,["title"])])]))])]),h,E.value.media?.length?((0,a.wg)(),(0,a.iD)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.value.media,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)({"col-6":E.value.media?.length>1,"col-12":E.value.media?.length<=1}),key:l},[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[E.value.media?.length>1?((0,a.wg)(),(0,a.iD)("caption",f,[(0,a.Wm)(c,{name:"album",size:"xs"}),(0,a.Uk)(" "+(0,r.zw)((0,s.SU)(t)("Disc"))+" "+(0,r.zw)(l+1),1)])):(0,a.kq)("",!0),(0,a._)("thead",null,[(0,a._)("tr",null,[(0,s.SU)(P)&&(0,s.SU)(P).isCurrentPlaylistElementATrack?((0,a.wg)(),(0,a.iD)("th",q)):(0,a.kq)("",!0),x,(0,a._)("th",_,(0,r.zw)((0,s.SU)(t)("Title")),1),(0,a._)("th",I,[(0,a.Wm)(c,{name:"schedule",size:"xs"})])])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tracks,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.mbId},[(0,s.SU)(P)&&(0,s.SU)(P).isCurrentPlaylistElementATrack?((0,a.wg)(),(0,a.iD)("td",z,[S.value==e.id?((0,a.wg)(),(0,a.j4)(c,{key:0,name:U.value,size:"md",color:(0,s.SU)(P).isStopped?"dark":"pink",class:"cursor-pointer",onClick:K},null,8,["name","color"])):((0,a.wg)(),(0,a.j4)(c,{key:1,name:U.value,size:"md",color:"white",style:{opacity:"0"}},null,8,["name"]))])):(0,a.kq)("",!0),(0,a._)("td",null,(0,r.zw)(e.position),1),(0,a._)("td",null,[e.id?((0,a.wg)(),(0,a.j4)(c,{key:0,name:"play_arrow",class:"cursor-pointer q-mr-sm",size:"sm",onClick:t=>H(e.id)},null,8,["onClick"])):(0,a.kq)("",!0),e.id?((0,a.wg)(),(0,a.j4)(c,{key:1,name:"add_box",class:"cursor-pointer q-mr-sm",size:"sm",onClick:t=>M(e.id)},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,r.zw)(e.title),1),T,(0,a.Wm)(m,{to:{name:"artist",params:{name:e.artist.name},query:{mbid:e.artist.mbId,tab:"overview"}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.artist.name),1)])),_:2},1032,["to"])]),(0,a._)("td",null,(0,r.zw)(j(Math.round(e.length/1e3))),1)])))),128))])])),_:2},1024)],2)))),128))])):(0,a.kq)("",!0)])),_:1})])),_:1})}}};var P=l(4458),S=l(2605),U=l(8052),A=l(3190),E=l(335),D=l(3902),W=l(2857),Q=l(6933),Z=l(9984),j=l.n(Z);const H=C,M=H;j()(C,"components",{QCard:P.Z,QBreadcrumbs:S.Z,QBreadcrumbsEl:U.Z,QCardSection:A.Z,QImg:E.Z,QSpinner:D.Z,QIcon:W.Z,QMarkupTable:Q.Z})}}]);