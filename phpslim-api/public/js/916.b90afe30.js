"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[916],{2719:(e,t,a)=>{a.d(t,{d:()=>c});var l=a(1809),s=a(8612),r=a.n(s),n=a(4958);(0,n.n)();const o={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},c=(0,l.Q_)("currentPlaylist",{state:()=>({tracks:[],currentIndex:-1}),getters:{hasTracks:e=>e.tracks&&e.tracks.length>0,getTracks:e=>e.tracks,getCurrentIndex:e=>e.currentIndex,getCurrentTrack:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex]:null,getCurrentTrackURL:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.tracks.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.tracks.length>0&&e.currentIndex<e.tracks.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=r()(o),t=e.get("currentPlaylistTracks");t&&(this.tracks=t);const a=e.get("currentPlaylistTrackIndex");a>=0&&(this.currentIndex=a)},saveTracks(e){this.tracks=e,this.currentIndex=e&&e.length>0?0:-1;const t=r()(o);t.set("currentPlaylistTracks",e),t.set("currentPlaylistTrackIndex",e&&e.length>0?0:-1)},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=r()(o);t.set("currentPlaylistTrackIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,a)=>{a.d(t,{n:()=>n});var l=a(1809),s=a(1320);const r=(0,s.l)(),n=(0,l.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),r.setStatusStopped()},load(){},play(e){e?(this.element.play(),r.setStatusPlaying()):r.isPlaying?(this.element.pause(),r.setStatusPaused()):r.isPaused?(this.element.play(),r.setStatusPlaying()):(this.element.load(),this.element.play(),r.setStatusPlaying())}}})},1320:(e,t,a)=>{a.d(t,{l:()=>s});var l=a(1809);const s=(0,l.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},5916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var l=a(9835),s=a(6970),r=a(499),n=a(9302),o=a(1569),c=a(1320),u=a(2719);const i={class:"text-center"},d=(0,l._)("thead",null,[(0,l._)("tr",{class:"bg-grey-2 text-grey-10"},[(0,l._)("th",{class:"text-left"},"Title"),(0,l._)("th",{class:"text-left"},"Artist"),(0,l._)("th",{class:"text-left"},"Album Artist"),(0,l._)("th",{class:"text-left"},"Album"),(0,l._)("th",{class:"text-right"},"Album Track nÂº"),(0,l._)("th",{class:"text-right"},"Year"),(0,l._)("th",{class:"text-center"},"Actions")])],-1),m=["onClick"],p={class:"text-left"},h={class:"text-left"},g={class:"text-left"},k={class:"text-left"},x=(0,l._)("span",{class:"is-clickable"},[(0,l._)("i",{class:"fas fa-link ml-1"})],-1),b={class:"text-right"},y={class:"text-right"},w={class:"text-center"},_={__name:"SearchPage",setup(e){const t=(0,n.Z)(),a=(0,u.d)(),_=((0,c.l)(),(0,r.iH)(null)),v=(0,r.iH)([]),f=(0,r.iH)(!1),I=(0,r.iH)([]),T=(0,r.iH)("global");function P(e,a){e&&e.trim().length>0?(I.value=[],f.value=!0,a((()=>{o.api.track.search(0,32,!1,{text:e}).then((e=>{v.value=e.data.tracks,f.value=!1})).catch((e=>{f.value=!1,t.notify({type:"negative",message:"API Error: error searching tracks",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"})}))}))):a((()=>{I.value=[]}))}function S(){a.saveTracks(v.value)}return(e,t)=>{const a=(0,l.up)("q-breadcrumbs-el"),r=(0,l.up)("q-breadcrumbs"),n=(0,l.up)("q-tab"),o=(0,l.up)("q-tabs"),c=(0,l.up)("q-separator"),u=(0,l.up)("q-spinner-pie"),I=(0,l.up)("q-item-section"),q=(0,l.up)("q-item"),W=(0,l.up)("q-select"),V=(0,l.up)("q-tab-panel"),Q=(0,l.up)("q-input"),Z=(0,l.up)("q-tab-panels"),U=(0,l.up)("q-card"),A=(0,l.up)("q-btn"),C=(0,l.up)("q-icon"),z=(0,l.up)("router-link"),H=(0,l.up)("q-btn-group"),j=(0,l.up)("q-markup-table"),D=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{icon:"home",label:"Spieldose"}),(0,l.Wm)(a,{icon:"search",label:"Search"})])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),dense:"",class2:"text-grey","active-color2":"primary","indicator-color2":"primary",align:"justify","narrow-indicator":""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"global",label:"Global search"}),(0,l.Wm)(n,{name:"advanced",label:"Advanced search"})])),_:1},8,["modelValue"]),(0,l.Wm)(c),(0,l.Wm)(Z,{modelValue:T.value,"onUpdate:modelValue":t[7]||(t[7]=e=>T.value=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{name:"global"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{ref:"search",outline:"","use-input":"","hide-selected":"",class:"q-mx-md q-mb-lg",color:"white","stack-label":!1,label:"Search...",modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),style:{width:"100%"},onFilter:P},(0,l.Nv)({_:2},[f.value?{name:"no-option",fn:(0,l.w5)((()=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(u,{color:"grey-5",size:"24px"})])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["modelValue"])])),_:1}),(0,l.Wm)(V,{name:"advanced"},{default:(0,l.w5)((()=>[(0,l._)("form",null,[(0,l.Wm)(Q,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[2]||(t[2]=t=>e.text=t),label:"Track title",placeholder:"type text condition",hint:"Search on track title",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue"]),(0,l.Wm)(Q,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[3]||(t[3]=t=>e.text=t),label:"Artist name",placeholder:"type text condition",hint:"Search on artist name",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue"]),(0,l.Wm)(Q,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[4]||(t[4]=t=>e.text=t),label:"Album name",placeholder:"type text condition",hint:"Search on album name",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue"]),(0,l.Wm)(Q,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[5]||(t[5]=t=>e.text=t),label:"Album artist",placeholder:"type text condition",hint:"Search on album artist",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue"]),(0,l.Wm)(Q,{outlined:"",modelValue:e.text,"onUpdate:modelValue":t[6]||(t[6]=t=>e.text=t),label:"Year",placeholder:"type year condition",hint:"Search on track year",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),v.value&&v.value.length>0?((0,l.wg)(),(0,l.j4)(A,{key:0,onClick:S},{default:(0,l.w5)((()=>[(0,l.Uk)("Send to playlist")])),_:1})):(0,l.kq)("",!0),v.value&&v.value.length>0?((0,l.wg)(),(0,l.j4)(j,{key:1,flat:"",bordered:""},{default:(0,l.w5)((()=>[d,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(v.value,((t,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id,class:(0,s.C_)(["non-selectable cursor-pointer",{"bg-pink text-white":e.currentTrackIndex==a}]),onClick:t=>e.currentTrackIndex=a},[(0,l._)("td",p,(0,s.zw)(t.title),1),(0,l._)("td",h,[t.artist?((0,l.wg)(),(0,l.j4)(z,{key:0,class:(0,s.C_)({"text-white text-bold":e.currentTrackIndex==a}),to:{name:"artist",params:{name:t.artist}}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,s.zw)(t.artist),1)])),_:2},1032,["class","to"])):(0,l.kq)("",!0)]),(0,l._)("td",g,[t.albumArtist?((0,l.wg)(),(0,l.j4)(z,{key:0,class:(0,s.C_)({"text-white text-bold":e.currentTrackIndex==a}),to:{name:"artist",params:{name:t.albumArtist}}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,s.zw)(t.albumArtist),1)])),_:2},1032,["class","to"])):(0,l.kq)("",!0)]),(0,l._)("td",k,[(0,l.Uk)((0,s.zw)(t.album),1),x]),(0,l._)("td",b,(0,s.zw)(t.trackNumber),1),(0,l._)("td",y,(0,s.zw)(t.year),1),(0,l._)("td",w,[(0,l.Wm)(H,{outline:""},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{size:"sm",color:"white","text-color":"grey-5",icon:"north",title:"Up",disabled:""}),(0,l.Wm)(A,{size:"sm",color:"white","text-color":"grey-5",icon:"south",title:"Down",disabled:""}),(0,l.Wm)(A,{size:"sm",color:"white","text-color":"grey-5",icon:"favorite",title:"Toggle favorite",disabled:""}),(0,l.Wm)(A,{size:"sm",color:"white","text-color":"grey-5",icon:"download",title:"Download",disabled:""})])),_:1})])],10,m)))),128))])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})}}};var v=a(9885),f=a(4458),I=a(2605),T=a(8052),P=a(7817),S=a(7661),q=a(926),W=a(9800),V=a(4106),Q=a(3255),Z=a(490),U=a(1233),A=a(132),C=a(6611),z=a(8879),H=a(6933),j=a(2857),D=a(7236),E=a(9984),B=a.n(E);const N=_,Y=N;B()(_,"components",{QPage:v.Z,QCard:f.Z,QBreadcrumbs:I.Z,QBreadcrumbsEl:T.Z,QTabs:P.Z,QTab:S.Z,QSeparator:q.Z,QTabPanels:W.Z,QTabPanel:V.Z,QSelect:Q.Z,QItem:Z.Z,QItemSection:U.Z,QSpinnerPie:A.Z,QInput:C.Z,QBtn:z.Z,QMarkupTable:H.Z,QIcon:j.Z,QBtnGroup:D.Z})}}]);