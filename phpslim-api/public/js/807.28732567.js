"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[807],{3807:(e,a,s)=>{s.r(a),s.d(a,{default:()=>S});s(2879);var l=s(9835),r=s(1957),n=s(6970),t=s(499),u=s(796),o=s(9302),i=s(8339),d=s(6647),m=s(1569);const p={class:"text-grey-8"},v={class:"text-grey-8"},c={class:"text-dark text-weight-bold",style:{"text-decoration":"none"}},g={__name:"SignUpPage",setup(e){const{t:a}=(0,d.QT)(),s=(0,o.Z)(),g=(0,i.tv)(),f=(0,t.iH)(!1),w=(0,t.iH)({email:{hasErrors:!1,message:null},name:{hasErrors:!1,message:null},password:{hasErrors:!1,message:null}}),h=[e=>!!e||a("Field is required")],y=(0,t.iH)(null),b=(0,t.iH)(null),E=(0,t.iH)(null),_=(0,t.iH)(null),k=(0,t.iH)(null),P=(0,t.iH)(null);function S(){w.value.email.hasErrors=!1,w.value.email.message=null,w.value.name.hasErrors=!1,w.value.name.message=null,w.value.password.hasErrors=!1,w.value.password.message=null,b.value.resetValidation(),_.value.resetValidation(),P.value.resetValidation()}function U(){S(),b.value.validate(),_.value.validate(),P.value.validate(),(0,l.Y3)((()=>{b.value.hasError||P.value.hasError||_.value.hasError||W()}))}function W(){f.value=!0,m.api.user.signUp((0,u.Z)(),y.value,k.value,E.value).then((e=>{y.value=null,k.value=null,E.value=null,s.notify({type:"positive",position:"center",message:a("Your account has been created"),actions:[{label:a("Sign in"),color:"white",handler:()=>{g.push({name:"signIn"})}}]}),f.value=!1})).catch((e=>{switch(f.value=!1,e.response.status){case 400:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(s.notify({type:"negative",message:a("API Error: missing email param")}),b.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"name"===e}))?(s.notify({type:"negative",message:a("API Error: missing name param")}),_.value.focus()):e.response.data.invalidOrMissingParams.find((function(e){return"password"===e}))?(s.notify({type:"negative",message:a("API Error: missing password param")}),P.value.focus()):s.notify({type:"negative",message:a("API Error: invalid/missing param")});break;case 409:e.response.data.invalidOrMissingParams.find((function(e){return"email"===e}))?(w.value.email.hasErrors=!0,w.value.email.message=a("Email already used"),(0,l.Y3)((()=>{b.value.focus()}))):e.response.data.invalidOrMissingParams.find((function(e){return"name"===e}))?(w.value.name.hasErrors=!0,w.value.name.message=a("Name already used"),(0,l.Y3)((()=>{_.value.focus()}))):s.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break;default:s.notify({type:"negative",message:a("API Error: fatal error"),caption:a("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})});break}}))}return(e,s)=>{const u=(0,l.up)("q-card-section"),o=(0,l.up)("q-icon"),i=(0,l.up)("q-input"),d=(0,l.up)("q-spinner-hourglass"),m=(0,l.up)("q-btn"),g=(0,l.up)("router-link"),S=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(S,{class:"q-pa-md my_card"},{default:(0,l.w5)((()=>[(0,l._)("form",{onSubmit:(0,r.iM)(U,["prevent","stop"]),autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},[(0,l.Wm)(u,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l._)("h3",null,(0,n.zw)(e.$t("Spieldose")),1),(0,l._)("div",p,(0,n.zw)(e.$t("Sign up below to create your account")),1)])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{dense:"",outlined:"",ref_key:"emailRef",ref:b,modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=e=>y.value=e),type:"email",name:"email",label:(0,t.SU)(a)("Email"),disable:f.value,autofocus:!0,rules:h,"lazy-rules":"",error:w.value.email.hasErrors,errorMessage:w.value.email.message},{prepend:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"alternate_email"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,l.Wm)(i,{dense:"",outlined:"",ref_key:"nameRef",ref:_,modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=e=>E.value=e),type:"text",name:"name",label:(0,t.SU)(a)("Name"),disable:f.value,rules:h,"lazy-rules":"",error:w.value.name.hasErrors,errorMessage:w.value.name.message},{prepend:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"badge"})])),_:1},8,["modelValue","label","disable","error","errorMessage"]),(0,l.Wm)(i,{dense:"",outlined:"",ref_key:"passwordRef",ref:P,modelValue:k.value,"onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e),name:"password",type:"password",label:(0,t.SU)(a)("Password"),disable:f.value,rules:h,"lazy-rules":"",error:w.value.password.hasErrors,errorMessage:w.value.password.message},{prepend:(0,l.w5)((()=>[(0,l.Wm)(o,{name:"key"})])),_:1},8,["modelValue","label","disable","error","errorMessage"])])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"dark",size:"md",label:e.$t("Sign up"),"no-caps":"",class:"full-width",icon:"account_circle",disable:f.value||!(y.value&&k.value),loading:f.value,type:"submit"},{loading:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"on-left"}),(0,l.Uk)(" "+(0,n.zw)((0,t.SU)(a)("Loading...")),1)])),_:1},8,["label","disable","loading"])])),_:1}),(0,l.Wm)(u,{class:"text-center q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("div",v,[(0,l.Uk)((0,n.zw)((0,t.SU)(a)("Already have an account ?"))+" ",1),(0,l.Wm)(g,{to:{name:"signIn"}},{default:(0,l.w5)((()=>[(0,l._)("span",c,(0,n.zw)((0,t.SU)(a)("Click here to sign in")),1)])),_:1})])])),_:1})],32)])),_:1})}}};var f=s(4458),w=s(3190),h=s(6611),y=s(2857),b=s(8879),E=s(6335),_=s(9984),k=s.n(_);const P=g,S=P;k()(g,"components",{QCard:f.Z,QCardSection:w.Z,QInput:h.Z,QIcon:y.Z,QBtn:b.Z,QSpinnerHourglass:E.Z})}}]);