"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[353],{2719:(e,t,l)=>{l.d(t,{d:()=>i});var s=l(1809),a=l(8612),n=l.n(a);const r={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},i=(0,s.Q_)("currentPlaylist",{state:()=>({elements:[],currentIndex:-1}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,getCurrentIndex:e=>e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=n()(r),t=e.get("currentPlaylistElements");t&&(this.elements=t);const l=e.get("currentPlaylistElementIndex");l>=0&&(this.currentIndex=l)},saveElements(e){this.elements=e,this.currentIndex=e&&e.length>0?0:-1;const t=n()(r);t.set("currentPlaylistElements",e),t.set("currentPlaylistElementIndex",e&&e.length>0?0:-1)},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=n()(r);t.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,l)=>{l.d(t,{n:()=>r});var s=l(1809),a=l(1320);const n=(0,a.l)(),r=(0,s.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),n.setStatusStopped()},load(){},play(e){e?(this.element.play(),n.setStatusPlaying()):n.isPlaying?(this.element.pause(),n.setStatusPaused()):n.isPaused?(this.element.play(),n.setStatusPlaying()):(this.element.load(),this.element.play(),n.setStatusPlaying())}}})},1320:(e,t,l)=>{l.d(t,{l:()=>a});var s=l(1809);const a=(0,s.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},353:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var s=l(9835),a=l(499),n=l(1957),r=l(9302),i=l(1569),o=l(4958),u=l(1320),c=l(2719),d=l(6970);const m={class:"text-left"},p={class:"text-left"},g={class:"text-left"},k=(0,s._)("span",{class:"is-clickable"},[(0,s._)("i",{class:"fas fa-link ml-1"})],-1),b={class:"text-right"},h={class:"text-right"},x={class:"text-center"},y={__name:"CurrentPlaylistTableRow",props:{disabled:Boolean,index:Number,selected:Boolean,isPlaying:Boolean,isPaused:Boolean,isStopped:Boolean,element:Object},emits:["changeIndex"],setup(e,{emit:t}){const l=e,a=(0,s.Fl)((()=>l.isPlaying?"play_arrow":l.isPaused?"pause":l.isStopped?"stop":"play_arrow"));function n(e){t("changeIndex",e)}return(t,l)=>{const r=(0,s.up)("q-icon"),i=(0,s.up)("router-link"),o=(0,s.up)("q-btn"),u=(0,s.up)("q-btn-group");return e.element.track?((0,s.wg)(),(0,s.iD)("tr",{key:0,class:(0,d.C_)(["non-selectable",{"bg-pink text-white":e.selected}])},[(0,s._)("td",{class:"text-right cursor-pointer",onClick:l[0]||(l[0]=t=>n(e.index))},[e.selected?((0,s.wg)(),(0,s.j4)(r,{key:0,name:a.value,size:"sm",class:"q-mr-sm"},null,8,["name"])):(0,s.kq)("",!0),(0,s.Uk)((0,d.zw)(e.index+1)+"/32 ",1)]),(0,s._)("td",{class:"text-left cursor-pointer",onClick:l[1]||(l[1]=t=>n(e.index))},(0,d.zw)(e.element.track.title),1),(0,s._)("td",m,[e.element.track.artist&&e.element.track.artist.name?((0,s.wg)(),(0,s.j4)(i,{key:0,class:(0,d.C_)({"text-white text-bold":e.selected}),to:{name:"artist",params:{name:e.element.track.artist.name}}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{name:"link",class:"q-mr-sm"}),(0,s.Uk)((0,d.zw)(e.element.track.artist.name),1)])),_:1},8,["class","to"])):(0,s.kq)("",!0)]),(0,s._)("td",p,[e.element.track.album&&e.element.track.album.artist.name?((0,s.wg)(),(0,s.j4)(i,{key:0,class:(0,d.C_)({"text-white text-bold":e.selected}),to:{name:"artist",params:{name:e.element.track.album.artist.name}}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{name:"link",class:"q-mr-sm"}),(0,s.Uk)((0,d.zw)(e.element.track.album.artist.name),1)])),_:1},8,["class","to"])):(0,s.kq)("",!0)]),(0,s._)("td",g,[(0,s.Uk)((0,d.zw)(e.element.track.album?e.element.track.album.title:null),1),k]),(0,s._)("td",b,(0,d.zw)(e.element.track.trackNumber),1),(0,s._)("td",h,(0,d.zw)(e.element.track.album?e.element.track.album.year:null),1),(0,s._)("td",x,[(0,s.Wm)(u,{outline:""},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{size:"sm",color:"white","text-color":"grey-5",icon:"north",title:"Up",disabled:""}),(0,s.Wm)(o,{size:"sm",color:"white","text-color":"grey-5",icon:"south",title:"Down",disabled:""}),(0,s.Wm)(o,{size:"sm",color:"white","text-color":"grey-5",icon:"favorite",title:"Toggle favorite",disabled:""}),(0,s.Wm)(o,{size:"sm",color:"white","text-color":"grey-5",icon:"download",title:"Download",disable:e.disabled,href:e.element.track.url},null,8,["disable","href"])])),_:1})])],2)):(0,s.kq)("",!0)}}};var w=l(2857),v=l(7236),_=l(8879),P=l(9984),S=l.n(P);const f=y,C=f;S()(y,"components",{QIcon:w.Z,QBtnGroup:v.Z,QBtn:_.Z});const I=(0,s._)("thead",null,[(0,s._)("tr",{class:"bg-grey-2 text-grey-10"},[(0,s._)("th",{class:"text-right"},"Index"),(0,s._)("th",{class:"text-left"},"Title"),(0,s._)("th",{class:"text-left"},"Artist"),(0,s._)("th",{class:"text-left"},"Album Artist"),(0,s._)("th",{class:"text-left"},"Album"),(0,s._)("th",{class:"text-right"},"Album Track nÂº"),(0,s._)("th",{class:"text-right"},"Year"),(0,s._)("th",{class:"text-center"},"Actions")])],-1),q={key:0},U={key:1},E={colspan:"8",class:"text-center"},W={__name:"CurrentPlaylistPage",setup(e){const t=(0,r.Z)(),l=(0,o.n)(),d=(0,c.d)(),m=(0,u.l)(),p=(0,a.iH)([]),g=(0,a.iH)(0),k=(0,a.iH)(!1);function b(){l.stop(),p.value=[],d.saveElements([])}function h(e){l.interact(),d.saveCurrentTrackIndex(e),m.isPlaying||l.play()}function x(){l.interact(),k.value=!0,g.value=0,i.api.track.search(1,32,!0,{}).then((e=>{p.value=e.data.tracks.map((e=>({track:e}))),d.saveElements(p.value),k.value=!1})).catch((e=>{t.notify({type:"negative",message:"API Error: error loading elements",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),k.value=!1}))}const y=(0,s.Fl)((()=>d.getCurrentIndex));function w(){l.stop(),x()}function v(){l.interact(),d.skipPrevious()}function _(){l.interact(),l.play()}function P(){l.interact(),l.play()}function S(){l.interact(),l.play()}function f(){l.stop(),l.setCurrentTime(0)}function W(){l.interact(),d.skipNext()}return(0,s.YP)(y,(e=>{g.value=e})),p.value=d.getElements,g.value=d.getCurrentIndex,(e,t)=>{const l=(0,s.up)("q-breadcrumbs-el"),r=(0,s.up)("q-breadcrumbs"),i=(0,s.up)("q-btn"),o=(0,s.up)("q-btn-group"),u=(0,s.up)("q-spinner"),c=(0,s.up)("q-markup-table"),x=(0,s.up)("q-card"),y=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(x,{class:"q-pa-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"q-mb-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"home",label:"Spieldose"}),(0,s.Wm)(l,{icon:"list_alt",label:"Current playlist"})])),_:1}),(0,s.Wm)(o,{spread:"",class:"q-mb-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outline:"",color:"dark",label:"Clear",icon:"clear",onClick:b,disable:k.value||!(p.value&&p.value.length>0)},null,8,["disable"]),(0,s.Wm)(i,{outline:"",color:"dark",label:"Random",icon:"bolt",onClick:w,disable:k.value},null,8,["disable"]),(0,s.Wm)(i,{outline:"",color:"dark",label:"Previous",icon:"skip_previous",onClick:v,disable:k.value||!(0,a.SU)(d).allowSkipPrevious},null,8,["disable"]),(0,a.SU)(m).isStopped?((0,s.wg)(),(0,s.j4)(i,{key:0,outline:"",color:"dark",label:"Play",icon:"play_arrow",onClick:_,disable:k.value||!(0,a.SU)(d).hasElements},null,8,["disable"])):(0,a.SU)(m).isPlaying?((0,s.wg)(),(0,s.j4)(i,{key:1,outline:"",color:"dark",label:"Pause",icon:"pause",onClick:P,disable:k.value},null,8,["disable"])):(0,a.SU)(m).isPaused?((0,s.wg)(),(0,s.j4)(i,{key:2,outline:"",color:"dark",label:"Resume",icon:"play_arrow",onClick:S,disable:k.value},null,8,["disable"])):(0,s.kq)("",!0),(0,s.Wm)(i,{outline:"",color:"dark",label:"Stop",icon:"stop",onClick:f,disable:k.value||(0,a.SU)(m).isStopped},null,8,["disable"]),(0,s.Wm)(i,{outline:"",color:"dark",label:"Next",icon:"skip_next",onClick:W,disable:k.value||!(0,a.SU)(d).allowSkipNext},null,8,["disable"]),(0,s.Wm)(i,{outline:"",color:"dark",label:"Download",icon:"save_alt",disable:k.value||!(0,a.SU)(d).getCurrentElementURL,href:(0,a.SU)(d).getCurrentElementURL},null,8,["disable","href"])])),_:1}),(0,s.Wm)(c,{flat:"",bordered:""},{default:(0,s.w5)((()=>[I,k.value?((0,s.wg)(),(0,s.iD)("tbody",U,[(0,s._)("tr",null,[(0,s._)("td",E,[(0,s.wy)((0,s.Wm)(u,{color:"pink",size:"xl",class:"q-ml-sm",thickness:10},null,512),[[n.F8,k.value]])])])])):((0,s.wg)(),(0,s.iD)("tbody",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.value,((e,t)=>((0,s.wg)(),(0,s.j4)(C,{key:e.id,element:e,index:t,selected:g.value==t,onChangeIndex:e=>h(t),disabled:k.value,isPlaying:(0,a.SU)(m).isPlaying,isPaused:(0,a.SU)(m).isPaused,isStopped:(0,a.SU)(m).isStopped},null,8,["element","index","selected","onChangeIndex","disabled","isPlaying","isPaused","isStopped"])))),128))]))])),_:1})])),_:1})])),_:1})}}};var T=l(9885),Q=l(4458),z=l(2605),Z=l(8052),B=l(6933),j=l(3902);const D=W,A=D;S()(W,"components",{QPage:T.Z,QCard:Q.Z,QBreadcrumbs:z.Z,QBreadcrumbsEl:Z.Z,QBtnGroup:v.Z,QBtn:_.Z,QMarkupTable:B.Z,QSpinner:j.Z})}}]);