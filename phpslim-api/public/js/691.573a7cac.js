"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[691],{2719:(e,t,a)=>{a.d(t,{d:()=>u});var s=a(1809),l=a(8612),r=a.n(l),n=a(4958);(0,n.n)();const i={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},u=(0,s.Q_)("currentPlaylist",{state:()=>({tracks:[],currentIndex:-1}),getters:{hasTracks:e=>e.tracks&&e.tracks.length>0,getTracks:e=>e.tracks,getCurrentIndex:e=>e.currentIndex,getCurrentTrack:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex]:null,getCurrentTrackURL:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.tracks.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.tracks.length>0&&e.currentIndex<e.tracks.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=r()(i),t=e.get("currentPlaylistTracks");t&&(this.tracks=t);const a=e.get("currentPlaylistTrackIndex");a>=0&&(this.currentIndex=a)},saveTracks(e){this.tracks=e,this.currentIndex=e&&e.length>0?0:-1;const t=r()(i);t.set("currentPlaylistTracks",e),t.set("currentPlaylistTrackIndex",e&&e.length>0?0:-1)},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=r()(i);t.set("currentPlaylistTrackIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,a)=>{a.d(t,{n:()=>n});var s=a(1809),l=a(1320);const r=(0,l.l)(),n=(0,s.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),r.setStatusStopped()},load(){},play(e){e?(this.element.play(),r.setStatusPlaying()):r.isPlaying?(this.element.pause(),r.setStatusPaused()):r.isPaused?(this.element.play(),r.setStatusPlaying()):(this.element.load(),this.element.play(),r.setStatusPlaying())}}})},1320:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(1809);const l=(0,s.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},6729:(e,t,a)=>{a.d(t,{Z:()=>w});var s=a(9835),l=a(6970),r=a(499);const n={class:"animated-album-cover-item"},i={key:0,class:"vinyl no-cover",src:"images/vinyl.png"},u={class:"album-info"},o=["title"],c={key:1,class:"artist-name"},m={key:0},d={key:2},p={__name:"AnimatedAlbumCover",props:{title:String,artistName:String,year:Number,image:String},emits:["play"],setup(e,{emit:t}){const a=e,p=(0,r.iH)(!1),g=(0,r.iH)(!1),v=(0,s.Fl)((()=>a.image&&!g.value?a.image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="));function h(){p.value=!0}function k(){g.value=!0}function y(){t("play")}return(t,a)=>{const r=(0,s.up)("q-img"),b=(0,s.up)("q-icon"),w=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",{class:"play-album",title:"Play album",onClick:y},[(0,s.Wm)(r,{class:(0,l.C_)(["album-thumbnail",{"album-thumbnail-animated":p.value||g.value}]),src:v.value,width:"174px",height:"174px","spinner-color":"pink",onLoad:h,onError:k},null,8,["class","src"]),(0,s.Wm)(b,{name:"play_arrow",class:"browse_album_play_icon",size:"128px",color:"white"}),p.value||g.value?((0,s.wg)(),(0,s.iD)("img",i)):(0,s.kq)("",!0)]),(0,s._)("div",u,[e.title?((0,s.wg)(),(0,s.iD)("p",{key:0,class:"album-name",title:e.title},(0,l.zw)(e.title),9,o)):(0,s.kq)("",!0),e.artistName?((0,s.wg)(),(0,s.iD)("p",c,[(0,s.Uk)("by "),(0,s.Wm)(w,{title:e.artistName,to:{name:"artist",params:{name:e.artistName}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.artistName),1)])),_:1},8,["title","to"]),(0,s.Uk)(),e.year?((0,s.wg)(),(0,s.iD)("span",m,"("+(0,l.zw)(e.year)+")",1)):(0,s.kq)("",!0)])):e.year?((0,s.wg)(),(0,s.iD)("p",d,"("+(0,l.zw)(e.year)+")",1)):(0,s.kq)("",!0)])])}}};var g=a(1639),v=a(335),h=a(2857),k=a(9984),y=a.n(k);const b=(0,g.Z)(p,[["__scopeId","data-v-6fffd5b4"]]),w=b;y()(p,"components",{QImg:v.Z,QIcon:h.Z})},8691:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(9835),l=a(1957),r=a(499),n=a(1569),i=a(9302),u=a(6729),o=a(4958),c=a(2719);const m={key:0,class:"q-pa-lg flex flex-center"},d={class:"q-gutter-md row items-start"},p={__name:"BrowseAlbumsPage",setup(e){const t=(0,i.Z)(),a=(0,o.n)(),p=(0,c.d)(),g=(0,r.iH)(null),v=(0,r.iH)(!1),h=(0,r.iH)(!1),k=(0,r.iH)([]),y=(0,r.iH)(0),b=(0,r.iH)(1);function w(e){e&&(b.value=1),v.value=!1,h.value=!0,n.api.album.search(b.value,32,{title:g.value}).then((e=>{k.value=e.data.data.items.map((e=>(e.coverPathId?e.image="api/2/thumbnail/normal/local/album/?path="+encodeURIComponent(e.coverPathId):e.covertArtArchiveURL?e.image="api/2/thumbnail/normal/remote/album/?url="+encodeURIComponent(e.covertArtArchiveURL):e.image=null,e))),y.value=e.data.data.pager.totalPages,g.value&&e.data.data.pager.totalResults<1&&(v.value=!0),h.value=!1})).catch((e=>{t.notify({type:"negative",message:"API Error: error loading albums",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),h.value=!1}))}function A(e){b.value=e,w(!1)}function I(e){a.interact(),h.value=!0,n.api.track.search(1,0,!1,{albumMbId:e.mbId}).then((e=>{p.saveTracks(e.data.tracks),h.value=!1})).catch((e=>{h.value=!1}))}return w(!0),(e,t)=>{const a=(0,s.up)("q-breadcrumbs-el"),r=(0,s.up)("q-breadcrumbs"),n=(0,s.up)("q-icon"),i=(0,s.up)("q-input"),o=(0,s.up)("q-pagination"),c=(0,s.up)("q-card-section"),p=(0,s.up)("q-card"),P=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(P,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"q-pa-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"q-mb-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{icon:"home",label:"Spieldose"}),(0,s.Wm)(a,{icon:"album",label:"Browse albums"})])),_:1}),k.value?((0,s.wg)(),(0,s.j4)(c,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),rounded:"",clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search albums with title",loading:h.value,disable:h.value,onKeydown:t[1]||(t[1]=(0,l.D2)((0,l.iM)((e=>w(!0)),["prevent"]),["enter"])),onClear:t[2]||(t[2]=e=>{v.value=!1,w(!0)}),error:v.value,errorMessage:"No albums found with specified condition"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"filter_alt"})])),append:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"search",class:"cursor-pointer",onClick:w})])),_:1},8,["modelValue","loading","disable","error"]),y.value>1?((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)(o,{modelValue:b.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>b.value=e),A],color:"dark",max:y.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:h.value},null,8,["modelValue","max","disable"])])):(0,s.kq)("",!0),(0,s._)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.value,(e=>((0,s.wg)(),(0,s.j4)(u.Z,{key:e.mbId||e.title,image:e.image,title:e.title,artistName:e.artist.name,year:e.year,onPlay:t=>I(e)},null,8,["image","title","artistName","year","onPlay"])))),128))])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}}};var g=a(9885),v=a(4458),h=a(2605),k=a(8052),y=a(3190),b=a(6611),w=a(2857),A=a(996),I=a(9984),P=a.n(I);const x=p,S=x;P()(p,"components",{QPage:g.Z,QCard:v.Z,QBreadcrumbs:h.Z,QBreadcrumbsEl:k.Z,QCardSection:y.Z,QInput:b.Z,QIcon:w.Z,QPagination:A.Z})}}]);