"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[152],{152:(l,e,a)=>{a.r(e),a.d(e,{default:()=>yl});var s=a(9835),t=a(499),o=a(1957),i=a(6970),c=a(1569),n=a(9302),u=a(6647),r=a(8339),d=a(8442);const m={class:"row"},p={class:"col-4"},v=["src"],y={class:"col-4"},_=["src"],g={class:"col-4"},b=["src"],w={class:"row"},f={class:"col-4"},k=["src"],W={class:"col-4"},h=["src"],q={class:"col-4"},x=["src"],V={class:"row"},C={class:"col-4"},Z=["src"],Q={class:"col-4"},U=["src"],S={class:"col-4"},P=["src"],H=["src"],A={class:"q-mr-sm"},D="images/vinyl-small.png",B={__name:"BrowsePlaylistItem",props:{playlist:Object,mode:String},emits:["play","delete"],setup(l,{emit:e}){const a=l,t=(0,s.Fl)((()=>"mosaic"==a.mode)),c=(0,s.Fl)((()=>"vinyls"==a.mode));function n(){e("play",a.playlist.id)}function u(){e("delete",a.playlist.id)}function r(){const l="ABCDEF0123456789";let e="#";while(e.length<7)e+=l.charAt(Math.floor(16*Math.random()+1));return e}return(e,a)=>{const B=(0,s.up)("q-card-section"),j=(0,s.up)("q-separator"),I=(0,s.up)("q-avatar"),T=(0,s.up)("q-btn"),z=(0,s.up)("q-btn-group"),E=(0,s.up)("router-link"),M=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(M,{class:"col-xl-2 col-lg-3 col-md-12 col-sm-12 col-xs-12 shadow-box shadow-10 q-mt-lg",bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(l.playlist.name),1)])),_:1}),(0,s.Wm)(j),t.value?((0,s.wg)(),(0,s.j4)(B,{key:0},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",p,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[0]||D},null,8,v)]),(0,s._)("div",y,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[1]||D},null,8,_)]),(0,s._)("div",g,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[2]||D},null,8,b)])]),(0,s._)("div",w,[(0,s._)("div",f,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[3]||D},null,8,k)]),(0,s._)("div",W,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[4]||D},null,8,h)]),(0,s._)("div",q,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[5]||D},null,8,x)])]),(0,s._)("div",V,[(0,s._)("div",C,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[6]||D},null,8,Z)]),(0,s._)("div",Q,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[7]||D},null,8,U)]),(0,s._)("div",S,[(0,s._)("img",{class:"mosaic_cover_element",src:l.playlist.covers[8]||D},null,8,P)])])])),_:1})):c.value?((0,s.wg)(),(0,s.j4)(B,{key:1,style:{height:"140px"}},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(9,(e=>(0,s.Wm)(I,{key:e,size:"100px",class:"overlapping",style:(0,i.j5)(`left: ${25*e}px`)},{default:(0,s.w5)((()=>[l.playlist.covers[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,src:l.playlist.covers[e],class:(0,i.C_)("mosaic_cover_element rotate-"+45*(e-1))},null,10,H)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"no_cover",style:(0,i.j5)("background: "+r())},null,4))])),_:2},1032,["style"]))),64))])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(j),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{spread:"",outline:""},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{label:"play",stack:"",icon:"play_arrow",onClick:(0,o.iM)(n,["prevent"])},null,8,["onClick"]),(0,s.Wm)(T,{label:"edit",stack:"",icon:"edit",disabled:""}),(0,s.Wm)(T,{label:"delete",stack:"",icon:"delete",onClick:(0,o.iM)(u,["prevent"])},null,8,["onClick"])])),_:1})])),_:1}),(0,s.Wm)(j),(0,s.Wm)(B,{class:"text-right"},{default:(0,s.w5)((()=>[(0,s._)("span",A,(0,i.zw)(l.playlist.trackCount)+" track/s",1),(0,s.Wm)(E,{to:{name:"playlistsByUserId",params:{id:l.playlist.owner.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)("by "+(0,i.zw)(l.playlist.owner.name),1)])),_:1},8,["to"]),(0,s.Wm)(d.Z,{className:"q-ml-sm",timestamp:1e3*l.playlist.updated},null,8,["timestamp"])])),_:1})])),_:1})}}};var j=a(4458),I=a(3190),T=a(926),z=a(1357),E=a(7236),M=a(8879),F=a(9984),K=a.n(F);const N=B,Y=N;K()(B,"components",{QCard:j.Z,QCardSection:I.Z,QSeparator:T.Z,QAvatar:z.Z,QBtnGroup:E.Z,QBtn:M.Z});var G=a(8106);const L={class:"row q-gutter-xs"},O={class:"col"},R={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},$={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},J={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},X={class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},ll={key:0,class:"q-pa-lg flex flex-center"},el={class:"q-gutter-sm row items-start"},al=(0,s._)("span",{class:"q-ml-sm"},"Delete playlist",-1),sl=(0,s._)("p",null,"Are you sure ?",-1),tl={__name:"BrowsePlaylistsPage",setup(l){const e=(0,n.Z)(),{t:a}=(0,u.QT)(),d=(0,t.iH)(null),m=(0,t.iH)(!1),p=(0,t.iH)(!1);let v=[];const y=(0,r.yj)(),_=(0,t.iH)("playlistsByUserId"==y.name&&y.params.id?y.params.id:null),g=(0,t.iH)(0),b=(0,t.iH)(1),w=[{label:"All playlists",value:"all",disable:!1},{label:"My playlists",value:"mine",disable:!1},{label:"User playlists",value:"userPlaylists",disable:!0}],f=(0,t.iH)(_.value?w[2]:w[0]),k=[{label:"Name",value:"name"},{label:"Last update",value:"updated"}],W=(0,t.iH)(k[0]),h=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],q=(0,t.iH)(h[0]),x=[{label:"Mosaic",value:"mosaic"},{label:"Vinyl collection",value:"vinyls"}],V=(0,t.iH)(x[0]),C=(0,t.iH)(!1),Z=(0,t.iH)(null);function Q(l){l&&(b.value=1),m.value=!1,p.value=!0,c.api.playlist.search({name:d.value},b.value,32,W.value.value,q.value.value).then((l=>{v=l.data.data.items,g.value=l.data.data.pager.totalPages,d.value&&l.data.data.pager.totalResults<1&&(m.value=!0),p.value=!1})).catch((l=>{e.notify({type:"negative",message:"API Error: error loading playlists",caption:a("API Error: fatal error details",{status:l.response.status,statusText:l.response.statusText})}),p.value=!1}))}function U(l){b.value=l,Q(!1)}function S(l){G.oS.loadPlaylist(l).then((l=>{})).catch((l=>{e.notify({type:"negative",message:a("API Error: error loading playlist"),caption:a("API Error: fatal error details",{status:l.response.status,statusText:l.response.statusText})})}))}function P(l){C.value=!0,Z.value=l}function H(){p.value=!0,c.api.playlist.delete(Z.value).then((l=>{p.value=!1,C.value=!1,Z.value=null,e.notify({type:"positive",message:"Playlist deleted"}),p.value=!1,Q(!0)})).catch((l=>{p.value=!1}))}return Q(!0),(l,e)=>{const a=(0,s.up)("q-breadcrumbs-el"),c=(0,s.up)("q-breadcrumbs"),n=(0,s.up)("q-icon"),u=(0,s.up)("q-input"),r=(0,s.up)("q-select"),y=(0,s.up)("q-pagination"),Z=(0,s.up)("q-avatar"),A=(0,s.up)("q-card-section"),D=(0,s.up)("q-btn"),B=(0,s.up)("q-card-actions"),j=(0,s.up)("q-card"),I=(0,s.up)("q-dialog"),T=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(j,{class:"q-pa-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"q-mb-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{icon:"home",label:"Spieldose"}),(0,s.Wm)(a,{icon:"list",label:"Browse playlists"})])),_:1}),(0,t.SU)(v)?((0,s.wg)(),(0,s.j4)(A,{key:0},{default:(0,s.w5)((()=>[(0,s._)("div",L,[(0,s._)("div",O,[(0,s.Wm)(u,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search playlists with name",loading:p.value,disable:p.value,onKeydown:e[1]||(e[1]=(0,o.D2)((0,o.iM)((l=>Q(!0)),["prevent"]),["enter"])),onClear:e[2]||(e[2]=l=>{m.value=!1,Q(!0)}),error:m.value,errorMessage:"No playlists found with specified condition"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"filter_alt"})])),append:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"search",class:"cursor-pointer",onClick:Q})])),_:1},8,["modelValue","loading","disable","error"])]),(0,s._)("div",R,[(0,s.Wm)(r,{outlined:"",dense:"",modelValue:f.value,"onUpdate:modelValue":[e[3]||(e[3]=l=>f.value=l),e[4]||(e[4]=l=>Q(!0))],options:w,"options-dense":"",label:"Type",disable:p.value||null!=_.value},{"selected-item":(0,s.w5)((l=>[(0,s.Uk)((0,i.zw)(l.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,s._)("div",$,[(0,s.Wm)(r,{outlined:"",dense:"",modelValue:W.value,"onUpdate:modelValue":[e[5]||(e[5]=l=>W.value=l),e[6]||(e[6]=l=>Q(!0))],options:k,"options-dense":"",label:"Sort field",disable:p.value},{"selected-item":(0,s.w5)((l=>[(0,s.Uk)((0,i.zw)(l.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,s._)("div",J,[(0,s.Wm)(r,{outlined:"",dense:"",modelValue:q.value,"onUpdate:modelValue":[e[7]||(e[7]=l=>q.value=l),e[8]||(e[8]=l=>Q(!0))],options:h,"options-dense":"",label:"Sort order",disable:p.value},{"selected-item":(0,s.w5)((l=>[(0,s.Uk)((0,i.zw)(l.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,s._)("div",X,[(0,s.Wm)(r,{outlined:"",dense:"",modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=l=>V.value=l),options:x,"options-dense":"",label:"Style",disable:p.value},{"selected-item":(0,s.w5)((l=>[(0,s.Uk)((0,i.zw)(l.opt.label),1)])),_:1},8,["modelValue","disable"])])]),g.value>1?((0,s.wg)(),(0,s.iD)("div",ll,[(0,s.Wm)(y,{modelValue:b.value,"onUpdate:modelValue":[e[10]||(e[10]=l=>b.value=l),U],color:"dark",max:g.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:p.value},null,8,["modelValue","max","disable"])])):(0,s.kq)("",!0),(0,s._)("div",el,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(v),(l=>((0,s.wg)(),(0,s.j4)(Y,{key:l.id,playlist:l,mode:V.value.value,onPlay:e=>S(l.id),onDelete:e=>P(l.id)},null,8,["playlist","mode","onPlay","onDelete"])))),128))]),(0,s.Wm)(I,{modelValue:C.value,"onUpdate:modelValue":e[11]||(e[11]=l=>C.value=l),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{icon:"info"}),al])),_:1}),(0,s.Wm)(A,null,{default:(0,s.w5)((()=>[sl])),_:1}),(0,s.Wm)(B,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[T]]),(0,s.Wm)(D,{flat:"",label:"YES",color:"primary",onClick:H})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,s.kq)("",!0)])),_:1})}}};var ol=a(2605),il=a(8052),cl=a(6611),nl=a(2857),ul=a(6384),rl=a(996),dl=a(2074),ml=a(1821),pl=a(2146);const vl=tl,yl=vl;K()(tl,"components",{QCard:j.Z,QBreadcrumbs:ol.Z,QBreadcrumbsEl:il.Z,QCardSection:I.Z,QInput:cl.Z,QIcon:nl.Z,QSelect:ul.Z,QPagination:rl.Z,QDialog:dl.Z,QAvatar:z.Z,QCardActions:ml.Z,QBtn:M.Z}),K()(tl,"directives",{ClosePopup:pl.Z})}}]);