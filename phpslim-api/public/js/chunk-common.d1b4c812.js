"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[64],{8106:(t,a,e)=>{e.d(a,{dC:()=>r,oS:()=>u,up:()=>o});var s=e(5090),l=e(1569),i=e(4867);const n=(0,s.H)(),r={setFavorite:function(t){return new Promise(((a,e)=>{l.api.track.setFavorite(t).then((e=>{i.spieldoseEvents.emit.track.setFavorite(t,e.data.favorited),a(e)})).catch((t=>{e(t)}))}))},unSetFavorite:function(t){return new Promise(((a,e)=>{l.api.track.unSetFavorite(t).then((e=>{i.spieldoseEvents.emit.track.unSetFavorite(t),a(e)})).catch((t=>{e(t)}))}))},increasePlayCount:function(t){return new Promise(((a,e)=>{l.api.track.increasePlayCount(t).then((e=>{i.spieldoseEvents.emit.track.increasePlayCount(t),a(e)})).catch((t=>{e(t)}))}))},play:function(t){n.isStopped||n.stop(),n.sendElementsToCurrentPlaylist(Array.isArray(t)?t:[{track:t}])},enqueue:function(t){n.interact(),n.appendElementsToCurrentPlaylist(Array.isArray(t)?t:[{track:t}])}},o={play:function(t){return new Promise(((a,e)=>{l.api.track.search({albumMbId:t.mbId},1,0,!1,"trackNumber","ASC").then((t=>{n.sendElementsToCurrentPlaylist(t.data.data.items.map((t=>({track:t})))),a(t)})).catch((t=>{e(t)}))}))},enqueue:function(t){return new Promise(((t,a)=>{l.api.track.search({albumMbId:album.mbId},1,0,!1,"trackNumber","ASC").then((a=>{n.interact(),n.appendElementsToCurrentPlaylist(a.data.data.items.map((t=>({track:t})))),t(a)})).catch((t=>{a(t)}))}))}},u={loadPlaylist:function(t){return new Promise(((a,e)=>{n.interact(),l.api.playlist.get(t).then((t=>{n.setPlaylistAsCurrent(t.data.playlist),a()})).catch((t=>{e(t)}))}))},saveElements:function(t){n.sendElementsToCurrentPlaylist(Array.isArray(t)?t:[{track:t}])},appendElements:function(t){n.appendElementsToCurrentPlaylist(Array.isArray(t)?t:[{track:t}])},setRadioStation:function(t){n.interact(),n.setCurrentRadioStation(t)}}},5090:(t,a,e)=>{e.d(a,{H:()=>o});var s=e(1809),l=e(8612),i=e.n(l);const n=Array.from(window.location.host).reduce(((t,a)=>0|31*t+a.charCodeAt(0)),0),r={namespace:"spieldose#"+n,storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},o=(0,s.Q_)("spieldose",{state:()=>({data:{audio:null,audioMotionAnalyzerSource:null,fullScreenVisualizationSettings:null,player:{userInteracted:!1,volume:1,status:"stopped",muted:!1,repeatMode:"none",shuffle:!1,sideBarTopArt:{mode:"normal"},sidebarAudioMotionAnalyzer:{visible:!0,mode:7}},currentPlaylistIndex:0,playlists:[{id:null,name:null,owner:{id:null,name:null},public:!1,lastChangeTimestamp:null,currentElementIndex:-1,elements:[],shuffleIndexes:[],currentRadioStation:null}]}}),getters:{getAudioInstance:t=>t.data.audio,hasPreviousUserInteractions:t=>t.data.player.userInteracted,getAudioMotionAnalyzerSource:t=>t.data.audioMotionAnalyzerSource,getFullScreenVisualizationSettings:t=>t.data.fullScreenVisualizationSettings,isSidebarAudioMotionAnalyzerVisible:t=>t.data.player.sidebarAudioMotionAnalyzer.visible,getSidebarAudioMotionAnalyzerMode:t=>t.data.player.sidebarAudioMotionAnalyzer.mode,hasSidebarTopArtAnimationMode:t=>"animation"==t.data.player.sideBarTopArt.mode,getPlayerStatus:t=>t.data.player.status,isMuted:t=>t.data.player.muted,isPlaying:t=>"playing"==t.data.player.status,isStopped:t=>"stopped"==t.data.player.status,isPaused:t=>"paused"==t.data.player.status,getVolume:t=>t.data.player.volume,getDuration:t=>t.data.audio?t.data.audio.duration:0,getRepeatMode:t=>t.data.player.repeatMode,getShuffle:t=>t.data.player.shuffle,currentPlaylistElementCount:t=>t.data.playlists[0].elements?t.data.playlists[0].elements.length:0,hasCurrentPlaylistElements(t){return this.currentPlaylistElementCount>0},getCurrentPlaylist:t=>t.data.playlists[0],getCurrentPlaylistIndex:t=>t.data.playlists[0].currentElementIndex,getShuffleCurrentPlaylistIndex:t=>t.data.playlists[0].shuffleIndexes[t.data.playlists[0].currentElementIndex],getCurrentPlaylistLastChangedTimestamp:t=>t.data.playlists[0].lastChangeTimestamp,isCurrentPlaylistElementATrack(t){return!this.hasCurrentPlaylistARadioStation&&this.hasCurrentPlaylistElements&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track},hasCurrentPlaylistARadioStation:t=>null!=t.data.playlists[0].currentRadioStation,getCurrentPlaylistElement(t){return this.hasCurrentPlaylistARadioStation?{radioStation:t.data.playlists[0].currentRadioStation}:this.hasCurrentPlaylistElements&&t.data.playlists[0].currentElementIndex>=0?this.getShuffle?t.data.playlists[0].elements[t.data.playlists[0].shuffleIndexes[t.data.playlists[0].currentElementIndex]]:t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex]:null},getCurrentPlaylistElementURL(t){return this.hasCurrentPlaylistARadioStation?t.data.playlists[0].currentRadioStation.directStream:this.hasCurrentPlaylistElements&&t.data.playlists[0].currentElementIndex>=0?this.getShuffle?t.data.playlists[0].elements[t.data.playlists[0].shuffleIndexes[t.data.playlists[0].currentElementIndex]].track.url:t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.url:null},getCurrentPlaylistElementNormalImage(t){return this.hasCurrentPlaylistARadioStation?t.data.playlists[0].currentRadioStation.images&&t.data.playlists[0].currentRadioStation.images.normal?t.data.playlists[0].currentRadioStation.images.normal:null:this.hasCurrentPlaylistElements&&t.data.playlists[0].currentElementIndex>=0&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers.normal?this.getShuffle?t.data.playlists[0].elements[t.data.playlists[0].shuffleIndexes[t.data.playlists[0].currentElementIndex]].track.covers.normal:t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers.normal:null},getCurrentPlaylistElementSmallImage(t){return this.hasCurrentPlaylistARadioStation?t.data.playlists[0].currentRadioStation.images&&t.data.playlists[0].currentRadioStation.images.small?t.data.playlists[0].currentRadioStation.images.small:null:this.hasCurrentPlaylistElements&&t.data.playlists[0].currentElementIndex>=0&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers&&t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers.small?this.getShuffle?t.data.playlists[0].elements[t.data.playlists[0].shuffleIndexes[t.data.playlists[0].currentElementIndex]].track.covers.small:t.data.playlists[0].elements[t.data.playlists[0].currentElementIndex].track.covers.small:null},allowSkipPrevious:t=>t.data.playlists[0].currentElementIndex>0,allowSkipNext:t=>t.data.playlists[0].currentElementIndex<t.data.playlists[0].elements.length-1},actions:{create:function(t){null==this.data.audio?(this.data.audio=void 0!==t?new Audio(t):new Audio,this.data.audio.autoplay=!1,this.data.audio.crossOrigin="anonymous"):(this.data.audio.src=null,this.data.audio.crossOrigin="anonymous"),this.restoreFullScreenVisualizationSettings(),this.restorePlayerSettings(this.hasPreviousUserInteractions),this.restoreCurrentPlaylist()},setAudioSource(t){void 0!==t&&t&&(this.data.audio&&(this.data.audio.src=t),this.hasPreviousUserInteractions&&!this.isPlaying&&this.play(!0))},setAudioMotionAnalyzerSource:function(t){this.data.audioMotionAnalyzerSource=t},toggleSidebarAudioMotionAnalyzer:function(){this.data.player.sidebarAudioMotionAnalyzer.visible=!this.data.player.sidebarAudioMotionAnalyzer.visible,this.savePlayerSettings()},setSidebarAudioMotionAnalyzerMode:function(t){this.data.player.sidebarAudioMotionAnalyzer.mode=t,this.savePlayerSettings()},toggleSidebarTopArtAnimationMode:function(){"animation"==this.data.player.sideBarTopArt.mode?this.data.player.sideBarTopArt.mode="normal":this.data.player.sideBarTopArt.mode="animation",this.savePlayerSettings()},interact:function(){this.data.player.userInteracted=!0},savePlayerSettings:function(){const t=i()(r);t.set("playerSettings",this.data.player)},restorePlayerSettings:function(t){const a=i()(r),e=a.get("playerSettings");e?(this.data.player=e,this.data.player.status="stopped",this.data.player.userInteracted=void 0!==t&&1==t,this.data.audio&&(this.data.audio.volume=this.data.player.volume,this.data.audio.muted=this.data.player.muted)):this.data.audio&&(this.data.audio.volume=this.data.player.volume,this.data.audio.muted=this.data.player.muted)},setVolume:function(t){t>=0&&t<=1&&(this.data.player.volume=t,this.data.audio&&(this.data.audio.volume=t),this.savePlayerSettings())},toggleMute:function(){this.data.player.muted=!this.data.player.muted,this.data.audio&&(this.data.audio.muted=this.data.player.muted),this.savePlayerSettings()},setCurrentTime:function(t){this.data.audio&&(this.data.audio.currentTime=t)},play:function(t){this.hasPreviousUserInteractions?t?(this.data.audio&&this.data.audio.play(),this.data.player.status="playing"):this.isPlaying?(this.data.audio&&this.data.audio.pause(),this.data.player.status="paused"):(this.isPaused,this.data.audio&&this.data.audio.play(),this.data.player.status="playing"):console.error("play error: no previous user interactions")},pause:function(){this.isPlaying&&(this.data.audio&&this.data.audio.pause(),this.data.player.status="paused")},resume:function(){this.isPaused&&(this.data.audio&&this.data.audio.play(),this.data.player.status="playing")},stop:function(){this.isStopped||(this.data.audio&&(this.data.audio.pause(),this.data.audio.currentTime=0),this.data.player.status="stopped")},toggleRepeatMode:function(){switch(this.data.player.repeatMode){case"none":this.data.player.repeatMode="track";break;case"track":this.data.player.repeatMode="playlist";break;case"playlist":this.data.player.repeatMode="none";break}this.savePlayerSettings()},toggleShuffeMode:function(){this.data.player.shuffle=!this.data.player.shuffle,this.savePlayerSettings()},clearCurrentPlaylist:function(t){this.stop(),this.data.playlists[0]={id:null,name:null,owner:{id:null,name:null},public:!1,lastChangeTimestamp:Date.now(),currentIndex:-1,elements:[],shuffleIndexes:[],currentRadioStation:null},this.data.currentPlaylistIndex=0,t||this.saveCurrentPlaylist()},setPlaylistAsCurrent:function(t){this.stop(),this.data.playlists[0]={id:t.id,name:t.name,owner:t.owner,public:t.public||!1,lastChangeTimestamp:Date.now(),currentElementIndex:t.tracks.length>0?0:-1,elements:t.tracks?t.tracks.map((t=>({track:t}))):[],shuffleIndexes:[...Array(t.tracks?t.tracks.length:0).keys()].sort((function(){return.5-Math.random()})),currentRadioStation:null},this.data.currentPlaylistIndex=0,this.saveCurrentPlaylist(),this.hasCurrentPlaylistElements&&(this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0))},setCurrentRadioStation:function(t){this.data.playlists[0].currentRadioStation=t,this.saveCurrentPlaylist(),this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0)},sendElementsToCurrentPlaylist:function(t){this.interact(),this.stop();const a=t&&Array.isArray(t)&&t.length>0;a&&(this.data.playlists[0]={id:null,name:null,owner:{id:null,name:null},public:!1,lastChangeTimestamp:Date.now(),currentElementIndex:a?0:-1,elements:a?t:[],shuffleIndexes:a?[...Array(t.length).keys()].sort((function(){return.5-Math.random()})):[],currentRadioStation:null},this.data.currentPlaylistIndex=0,this.saveCurrentPlaylist(),this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0))},appendElementsToCurrentPlaylist:function(t){this.interact();const a=this.data.playlists[0].elements.length>0,e=t&&Array.isArray(t)&&t.length>0;e&&(this.data.playlists[0].elements=this.data.playlists[0].elements.concat(t),this.data.playlists[0].shuffleIndexes=[...Array(this.data.playlists[0].elements.length).keys()].sort((function(){return.5-Math.random()})),this.data.playlists[0].currentRadioStation=null,a||(this.data.playlists[0].currentElementIndex=e?0:-1),this.data.currentPlaylistIndex=0,this.data.playlists[0].lastChangeTimestamp=Date.now(),this.saveCurrentPlaylist(),this.isPlaying||(this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0)))},restoreCurrentPlaylist:function(){this.clearCurrentPlaylist(!0);const t=i()(r),a=t.get("currentPlaylist");a&&(this.data.playlists[0]=a,(this.hasCurrentPlaylistElements||this.hasCurrentPlaylistARadioStation)&&this.setAudioSource(this.getCurrentPlaylistElementURL))},saveCurrentPlaylist:function(){const t=i()(r);t.set("currentPlaylist",this.data.playlists[0])},skipPrevious:function(){this.allowSkipPrevious&&(this.interact(),this.data.playlists[0].currentRadioStation&&(this.data.playlists[0].currentRadioStation=null),this.data.playlists[0].currentElementIndex--,this.data.playlists[0].lastChangeTimestamp=Date.now(),this.saveCurrentPlaylist(),this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0))},skipNext:function(){this.allowSkipNext&&(this.interact(),this.data.playlists[0].currentRadioStation&&(this.data.playlists[0].currentRadioStation=null),this.data.playlists[0].currentElementIndex++,this.data.playlists[0].lastChangeTimestamp=Date.now(),this.saveCurrentPlaylist(),this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0))},skipToIndex:function(t){t>=0&&t<this.data.playlists[0].elements.length&&(this.interact(),this.data.playlists[0].currentRadioStation&&(this.data.playlists[0].currentRadioStation=null),this.data.playlists[0].currentElementIndex=t,this.data.playlists[0].lastChangeTimestamp=Date.now(),this.saveCurrentPlaylist(),this.setAudioSource(this.getCurrentPlaylistElementURL),this.play(!0))},restoreFullScreenVisualizationSettings:function(){const t=i()(r),a=t.get("fullScreenVisualizationSettings");if(a)try{this.data.fullScreenVisualizationSettings=JSON.parse(a)}catch(e){}},saveFullScreenVisualizationSettings(t){this.data.fullScreenVisualizationSettings=t;const a=i()(r);a.set("fullScreenVisualizationSettings",this.data.fullScreenVisualizationSettings?JSON.stringify(this.data.fullScreenVisualizationSettings):null)}}})},5226:(t,a,e)=>{e.d(a,{Z:()=>k});var s=e(9835),l=e(6970),i=e(499);const n={class:"animated-album-cover-item"},r={class:"play-album"},o={class:"album-actions"},u=(0,s._)("span",{class:"clear: both;"},null,-1),d={key:0,class:"vinyl no-cover",src:"images/vinyl-medium.png"},c={class:"album-info"},y=["title"],p={key:1,class:"artist-name"},m={key:0},h={key:2},g={__name:"AnimatedAlbumCover",props:{title:String,artistName:String,year:Number,image:String},emits:["play","enqueue"],setup(t,{emit:a}){const e=t,g=(0,i.iH)(!1),f=(0,i.iH)(!1),S=(0,s.Fl)((()=>e.image&&!f.value?e.image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="));function A(){g.value=!0}function v(){f.value=!0}function P(){a("play")}function k(){a("enqueue")}return(a,e)=>{const i=(0,s.up)("q-img"),b=(0,s.up)("q-icon"),w=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",r,[(0,s.Wm)(i,{class:(0,l.C_)(["album-thumbnail",{"album-thumbnail-animated":g.value||f.value}]),src:S.value,width:"174px",height:"174px","spinner-color":"pink",onLoad:A,onError:v},null,8,["class","src"]),(0,s._)("div",o,[(0,s.Wm)(b,{class:"cursor-pointer",name:"add_box",size:"80px",color:"pink",title:"Enqueue album",style:{left:"10px"},onClick:k}),(0,s.Wm)(b,{class:"cursor-pointer",name:"play_arrow",size:"80px",color:"pink",title:"Play album",style:{left:"80px"},onClick:P}),u]),g.value||f.value?((0,s.wg)(),(0,s.iD)("img",d)):(0,s.kq)("",!0)]),(0,s._)("div",c,[t.title?((0,s.wg)(),(0,s.iD)("p",{key:0,class:"album-name",title:t.title},(0,l.zw)(t.title),9,y)):(0,s.kq)("",!0),t.artistName?((0,s.wg)(),(0,s.iD)("p",p,[(0,s.Uk)("by "),(0,s.Wm)(w,{title:t.artistName,to:{name:"artist",params:{name:t.artistName}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.artistName),1)])),_:1},8,["title","to"]),(0,s.Uk)(),t.year?((0,s.wg)(),(0,s.iD)("span",m,"("+(0,l.zw)(t.year)+")",1)):(0,s.kq)("",!0)])):t.year?((0,s.wg)(),(0,s.iD)("p",h,"("+(0,l.zw)(t.year)+")",1)):(0,s.kq)("",!0)])])}}};var f=e(335),S=e(2857),A=e(9984),v=e.n(A);const P=g,k=P;v()(g,"components",{QImg:f.Z,QIcon:S.Z})},2665:(t,a,e)=>{e.d(a,{Z:()=>v});var s=e(9835),l=e(6970),i=e(499),n=e(6647);const r={class:"text-h6 row"},o={class:"col text-left"},u={class:"col text-right"},d={key:1},c={__name:"DashboardBaseBlock",props:{className:{type:String},loading:{type:Boolean},icon:{type:String},title:{type:String}},emits:["refresh"],setup(t,{emit:a}){const{t:e}=(0,n.QT)();function c(){a("refresh")}return(a,n)=>{const y=(0,s.up)("q-icon"),p=(0,s.up)("q-spinner"),m=(0,s.up)("q-card-section"),h=(0,s.up)("q-skeleton"),g=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(g,{class:"my-card q-ma-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"bg-grey-3 text-black"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",o,[(0,s.Wm)(y,{name:t.icon,class:"cursor-pointer q-mr-sm"},null,8,["name"]),(0,s.Uk)((0,l.zw)(t.title),1)]),(0,s._)("div",u,[t.loading?((0,s.wg)(),(0,s.j4)(p,{key:0,color:"pink",size:"sm",class:"q-ml-sm",thickness:8})):((0,s.wg)(),(0,s.j4)(y,{key:1,name:"refresh",class:"cursor-pointer",onClick:c,title:(0,i.SU)(e)("reload")},null,8,["title"]))])])])),_:1}),(0,s.Wm)(m,{class:"bg-white text-black",style:{"min-height":"17em"}},{default:(0,s.w5)((()=>[(0,s.WI)(a.$slots,"body",{},(()=>[t.loading?((0,s.wg)(),(0,s.j4)(h,{key:0,type:"text",square:"",animation:"blink",height:"198px"})):((0,s.wg)(),(0,s.iD)("div",d,[(0,s.WI)(a.$slots,"tabs"),(0,s.WI)(a.$slots,"list"),(0,s.WI)(a.$slots,"chart")]))]))])),_:3})])),_:3})}}};var y=e(4458),p=e(3190),m=e(2857),h=e(3902),g=e(7133),f=e(9984),S=e.n(f);const A=c,v=A;S()(c,"components",{QCard:y.Z,QCardSection:p.Z,QIcon:m.Z,QSpinner:h.Z,QSkeleton:g.ZP})},7149:(t,a,e)=>{e.d(a,{Z:()=>b});var s=e(9835),l=e(499),i=e(1957),n=e(6970),r=e(9302),o=e(796),u=e(6647),d=e(9844),c=e(2665),y=e(1569);const p={key:0},m={key:0,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},h={key:1,class:"text-h5 text-center q-py-sm q-mt-xl q-mt-sm"},g={__name:"DashboardBaseBlockChart",props:{icon:{type:String,trackId:String},globalStats:Boolean},setup(t){const a=t,e=(0,r.Z)(),{t:g}=(0,u.QT)(),f="ct-chart-"+(0,o.Z)(),S=(0,l.iH)(!1);let A=[];const v=(0,l.iH)("hour"),P=(0,l.iH)(null);(0,s.YP)(v,(t=>{E()}));const k=[{label:"Hour",value:"hour"},{label:"Weekday",value:"weekday"},{label:"Month",value:"month"},{label:"Year",value:"year"},{label:"Always",value:"fullDate"}],b=(0,s.Fl)((()=>a.globalStats||!1));(0,s.YP)(b,(t=>{E()}));const w={low:0,showArea:!0,fullWidth:!0,chartPadding:{left:48,right:48},showPoint:!1},C={low:0,showArea:!0,fullWidth:!0,chartPadding:{left:48,right:48},showLabel:!1,axisX:{showGrid:!1,showLabel:!1,offset:0},showPoint:!1};function I(){let t=[],a=[];switch(v.value){case"hour":t=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],a=new Array(24).fill(0),A.forEach((t=>{a[new Number(t.hour)]=t.total}));break;case"weekday":t=[g("Sunday"),g("Monday"),g("Tuesday"),g("Wednesday"),g("Thursday"),g("Friday"),g("Saturday")],a=new Array(7).fill(0),A.forEach((t=>{a[new Number(t.weekday)]=t.total}));break;case"month":t=[g("January"),g("February"),g("March"),g("April"),g("May"),g("June"),g("July"),g("August"),g("September"),g("October"),g("November"),g("December")],a=new Array(12).fill(0),A.forEach((t=>{a[new Number(t.month)]=t.total}));break;case"year":t=A.map((t=>t.year)),a=A.map((t=>t.total));break;case"fullDate":t=A.map((t=>t.fullDate)),a=A.map((t=>t.total));break}P.value&&P.value.detach(),t.length>1?P.value=new d.wW("#"+f,{labels:t,series:[a]},"fullDate"!=v.value?w:C):P.value=new d.vz("#"+f,{labels:t,series:[a]},"fullDate"!=v.value?w:C)}const x=(0,l.iH)(!1);function E(){x.value=!1,v.value&&(S.value=!0,y.api.metrics.getDataRanges({trackId:a.trackId||null,dateRange:v.value,global:b.value}).then((t=>{A=t.data.data,S.value=!1,(0,s.Y3)((()=>{I()}))})).catch((t=>{x.value=!0,S.value=!1,e.notify({type:"negative",message:"API Error: error loading metrics",caption:g("API Error: fatal error details",{status:t.response.status,statusText:t.response.statusText})})})))}return(0,s.bv)((()=>{E()})),(a,e)=>{const r=(0,s.up)("q-tab"),o=(0,s.up)("q-tabs"),u=(0,s.up)("q-icon");return(0,s.wg)(),(0,s.j4)((0,s.LL)(c.Z),{icon:t.icon||"analytics",title:(0,l.SU)(g)("Play stats"),loading:S.value,onRefresh:E},{tabs:(0,s.w5)((()=>[(0,s.Wm)(o,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),"no-caps":"",class:"text-pink-7 q-mb-md"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(k,(t=>(0,s.Wm)(r,{key:t.value,name:t.value,label:(0,l.SU)(g)(t.label)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),chart:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",{id:f},null,512),[[i.F8,(0,l.SU)(A)&&(0,l.SU)(A).length>0]]),S.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,[x.value?((0,s.wg)(),(0,s.iD)("h5",m,[(0,s.Wm)(u,{name:"error",size:"xl"}),(0,s.Uk)(" "+(0,n.zw)((0,l.SU)(g)("Error loading data")),1)])):(0,l.SU)(A)&&(0,l.SU)(A).length>0?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h5",h,[(0,s.Wm)(u,{name:"warning",size:"xl"}),(0,s.Uk)(" "+(0,n.zw)((0,l.SU)(g)("No enought data")),1)]))]))])),_:1},40,["icon","title","loading"])}}};var f=e(7817),S=e(7661),A=e(2857),v=e(9984),P=e.n(v);const k=g,b=k;P()(g,"components",{QTabs:f.Z,QTab:S.Z,QIcon:A.Z})},8442:(t,a,e)=>{e.d(a,{Z:()=>u});var s=e(9835),l=e(6970),i=e(4376),n=e(6647);const r={__name:"LabelTimestampAgo",props:{className:{type:String},timestamp:{type:Number}},setup(t){const a=t,{t:e}=(0,n.QT)(),r=(0,s.Fl)((()=>{let t="",s=i.ZP.getDateDiff(Date.now(),a.timestamp,"years");return s<1?(s=i.ZP.getDateDiff(Date.now(),a.timestamp,"months"),s<1?(s=i.ZP.getDateDiff(Date.now(),a.timestamp,"days"),s<1?(s=i.ZP.getDateDiff(Date.now(),a.timestamp,"hours"),s<1?(s=i.ZP.getDateDiff(Date.now(),a.timestamp,"minutes"),s<1?(s=i.ZP.getDateDiff(Date.now(),a.timestamp,"seconds"),t=e(s>1?"nSecondsAgo":"oneSecondAgo",{count:s})):t=e(s>1?"nMinutesAgo":"oneMinuteAgo",{count:s})):t=e(s>1?"nHoursAgo":"oneHourAgo",{count:s})):t=e(s>1?"nDaysAgo":"oneDayAgo",{count:s})):t=e(s>1?"nMonthsAgo":"oneMonthAgo",{count:s})):t=e(s>1?"nYearsAgo":"oneYearAgo",{count:s}),t}));return(a,e)=>((0,s.wg)(),(0,s.iD)("span",{class:(0,l.C_)(t.className)},[(0,s.WI)(a.$slots,"prepend"),(0,s.Uk)((0,l.zw)(r.value),1),(0,s.WI)(a.$slots,"append")],2))}},o=r,u=o}}]);