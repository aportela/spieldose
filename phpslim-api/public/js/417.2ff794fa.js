"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[417],{8106:(e,l,t)=>{t.d(l,{dC:()=>u,oS:()=>o});var a=t(6223),n=t(2719),s=t(1569),i=t(4867);const r=(0,n.d)(),u={setFavorite:function(e){return new Promise(((l,t)=>{s.api.track.setFavorite(e).then((t=>{i.spieldoseEvents.emit.track.setFavorite(e,t.data.favorited),l(t)})).catch((e=>{t(e)}))}))},unSetFavorite:function(e){return new Promise(((l,t)=>{s.api.track.unSetFavorite(e).then((t=>{i.spieldoseEvents.emit.track.unSetFavorite(e),l(t)})).catch((e=>{t(e)}))}))},play:function(e){a.spieldosePlayer.interact(),a.spieldosePlayer.isStopped()||a.spieldosePlayer.actions.stop(),r.saveElements(Array.isArray(e)?e:[{track:e}]),a.spieldosePlayer.actions.play(!0)},enqueue:function(e){player.interact(),r.appendElements(Array.isArray(e)?e:[{track:e}])}},o={saveElements:function(e){r.saveElements(e)},appendElements:function(e){r.appendElements(e)},clear:function(){r.clear()},skipPrevious:function(){r.skipPrevious()},skipNext:function(){r.skipNext()}}},2719:(e,l,t)=>{t.d(l,{d:()=>u});var a=t(1809),n=t(8612),s=t.n(n),i=t(6223);const r={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},u=(0,a.Q_)("currentPlaylist",{state:()=>({elements:[],shuffleIndexes:[],currentIndex:-1,elementsLastChangeTimestamp:null}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,elementCount:e=>e.elements?e.elements.length:0,getElementsLastChangeTimestamp:e=>e.elementsLastChangeTimestamp,getCurrentIndex:e=>i.spieldosePlayer.getShuffle()?e.shuffleIndexes[e.currentIndex]:e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=s()(r),l=e.get("currentPlaylistElements");l&&(this.elements=l);const t=e.get("shuffleIndexes");t&&(this.shuffleIndexes=t);const a=e.get("currentPlaylistElementIndex");a>=0&&(this.currentIndex=a)},saveCurrentElements(){const e=s()(r);e.set("currentPlaylistElements",this.elements),e.set("currentPlaylistElementIndex",this.currentIndex),e.set("shuffleIndexes",this.shuffleIndexes),this.elementsLastChangeTimestamp=Date.now()},saveElements(e){this.elements=e,this.shuffleIndexes=[...Array(e.length).keys()].sort((function(){return.5-Math.random()})),this.currentIndex=e&&e.length>0?0:-1,this.saveCurrentElements()},appendElements(e){this.elements=this.elements.concat(e),this.saveCurrentElements()},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const l=s()(r);l.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.saveCurrentTrackIndex(--this.currentIndex)},skipNext(){this.saveCurrentTrackIndex(++this.currentIndex)},clear(){this.elements=[],this.saveCurrentElements()}}})},5226:(e,l,t)=>{t.d(l,{Z:()=>A});var a=t(9835),n=t(6970),s=t(499);const i={class:"animated-album-cover-item"},r={class:"play-album"},u={class:"album-actions"},o=(0,a._)("span",{class:"clear: both;"},null,-1),c={key:0,class:"vinyl no-cover",src:"images/vinyl-medium.png"},m={class:"album-info"},d=["title"],p={key:1,class:"artist-name"},v={key:0},g={key:2},h={__name:"AnimatedAlbumCover",props:{title:String,artistName:String,year:Number,image:String},emits:["play","enqueue"],setup(e,{emit:l}){const t=e,h=(0,s.iH)(!1),b=(0,s.iH)(!1),k=(0,a.Fl)((()=>t.image&&!b.value?t.image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="));function y(){h.value=!0}function x(){b.value=!0}function f(){l("play")}function A(){l("enqueue")}return(l,t)=>{const s=(0,a.up)("q-img"),w=(0,a.up)("q-icon"),I=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,[(0,a.Wm)(s,{class:(0,n.C_)(["album-thumbnail",{"album-thumbnail-animated":h.value||b.value}]),src:k.value,width:"174px",height:"174px","spinner-color":"pink",onLoad:y,onError:x},null,8,["class","src"]),(0,a._)("div",u,[(0,a.Wm)(w,{class:"cursor-pointer",name:"add_box",size:"80px",color:"pink",title:"Enqueue album",style:{left:"10px"},onClick:A}),(0,a.Wm)(w,{class:"cursor-pointer",name:"play_arrow",size:"80px",color:"pink",title:"Play album",style:{left:"80px"},onClick:f}),o]),h.value||b.value?((0,a.wg)(),(0,a.iD)("img",c)):(0,a.kq)("",!0)]),(0,a._)("div",m,[e.title?((0,a.wg)(),(0,a.iD)("p",{key:0,class:"album-name",title:e.title},(0,n.zw)(e.title),9,d)):(0,a.kq)("",!0),e.artistName?((0,a.wg)(),(0,a.iD)("p",p,[(0,a.Uk)("by "),(0,a.Wm)(I,{title:e.artistName,to:{name:"artist",params:{name:e.artistName}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.artistName),1)])),_:1},8,["title","to"]),(0,a.Uk)(),e.year?((0,a.wg)(),(0,a.iD)("span",v,"("+(0,n.zw)(e.year)+")",1)):(0,a.kq)("",!0)])):e.year?((0,a.wg)(),(0,a.iD)("p",g,"("+(0,n.zw)(e.year)+")",1)):(0,a.kq)("",!0)])])}}};var b=t(335),k=t(2857),y=t(9984),x=t.n(y);const f=h,A=f;x()(h,"components",{QImg:b.Z,QIcon:k.Z})},8417:(e,l,t)=>{t.r(l),t.d(l,{default:()=>q});var a=t(9835),n=t(499),s=t(6970),i=t(1957),r=t(1569),u=t(9302),o=t(5226),c=t(8106);const m={class:"row q-gutter-xs"},d={class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},p={class:"col"},v={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},g={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},h={key:0,class:"q-pa-lg flex flex-center"},b={class:"q-gutter-md row items-start"},k={__name:"BrowseAlbumsPage",setup(e){const l=(0,u.Z)(),t=(0,a.f3)("spieldosePlayer"),k=(0,n.iH)(null),y=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Title & Artist",value:"all"}],x=(0,n.iH)(y[2]),f=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Year",value:"year"}],A=(0,n.iH)(f[0]),w=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],I=(0,n.iH)(w[0]),E=(0,n.iH)(!1),C=(0,n.iH)(!1);let S=[];const P=(0,n.iH)(0),_=(0,n.iH)(1),q=(0,n.iH)(null);function N(e){e&&(_.value=1),E.value=!1,C.value=!0;let t={title:"title"==x.value.value?k.value:null,albumArtistName:"albumArtistName"==x.value.value?k.value:null,text:"all"==x.value.value?k.value:null};r.api.album.search(t,_.value,32,A.value.value,I.value.value).then((e=>{S=e.data.data.items.map((e=>(e.image=e.covers.small,e))),P.value=e.data.data.pager.totalPages,k.value&&e.data.data.pager.totalResults<1&&(E.value=!0),(0,a.Y3)((()=>{q.value.$el.focus()})),C.value=!1})).catch((e=>{l.notify({type:"negative",message:"API Error: error loading albums",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),C.value=!1}))}function U(e){_.value=e,N(!1)}function V(e){t.interact(),C.value=!0,r.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{c.oS.saveElements(e.data.data.items.map((e=>({track:e})))),C.value=!1})).catch((e=>{C.value=!1}))}function T(e){t.interact(),C.value=!0,r.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{c.oS.appendElements(e.data.data.items.map((e=>({track:e})))),C.value=!1})).catch((e=>{C.value=!1}))}return N(!0),(e,l)=>{const t=(0,a.up)("q-breadcrumbs-el"),r=(0,a.up)("q-breadcrumbs"),u=(0,a.up)("q-select"),c=(0,a.up)("q-icon"),H=(0,a.up)("q-input"),Q=(0,a.up)("q-pagination"),W=(0,a.up)("q-card-section"),D=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(D,{class:"q-pa-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"q-mb-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{icon:"home",label:"Spieldose"}),(0,a.Wm)(t,{icon:"album",label:"Browse albums"})])),_:1}),(0,n.SU)(S)?((0,a.wg)(),(0,a.j4)(W,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",d,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:x.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>x.value=e),l[1]||(l[1]=e=>N(!0))],options:y,"options-dense":"",label:"Search on",disable:C.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,a._)("div",p,[(0,a.Wm)(H,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=e=>k.value=e),clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search albums with specified condition",loading:C.value,disable:C.value,onKeydown:l[3]||(l[3]=(0,i.D2)((0,i.iM)((e=>N(!0)),["prevent"]),["enter"])),onClear:l[4]||(l[4]=e=>{E.value=!1,N(!0)}),error:E.value,errorMessage:"No albums found with specified condition",ref_key:"searchTextRef",ref:q},{prepend:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"filter_alt"})])),append:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"search",class:"cursor-pointer",onClick:N})])),_:1},8,["modelValue","loading","disable","error"])]),(0,a._)("div",v,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:A.value,"onUpdate:modelValue":[l[5]||(l[5]=e=>A.value=e),l[6]||(l[6]=e=>N(!0))],options:f,"options-dense":"",label:"Sort field",disable:C.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,a._)("div",g,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:I.value,"onUpdate:modelValue":[l[7]||(l[7]=e=>I.value=e),l[8]||(l[8]=e=>N(!0))],options:w,"options-dense":"",label:"Sort order",disable:C.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])])]),P.value>1?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(Q,{modelValue:_.value,"onUpdate:modelValue":[l[9]||(l[9]=e=>_.value=e),U],color:"dark",max:P.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:C.value},null,8,["modelValue","max","disable"])])):(0,a.kq)("",!0),(0,a._)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,n.SU)(S),(e=>((0,a.wg)(),(0,a.j4)(o.Z,{key:e.mbId||e.title,image:e.image,title:e.title,artistName:e.artist.name,year:e.year,onPlay:l=>V(e),onEnqueue:l=>T(e)},null,8,["image","title","artistName","year","onPlay","onEnqueue"])))),128))])])),_:1})):(0,a.kq)("",!0)])),_:1})}}};var y=t(4458),x=t(2605),f=t(8052),A=t(3190),w=t(6384),I=t(6611),E=t(2857),C=t(996),S=t(9984),P=t.n(S);const _=k,q=_;P()(k,"components",{QCard:y.Z,QBreadcrumbs:x.Z,QBreadcrumbsEl:f.Z,QCardSection:A.Z,QSelect:w.Z,QInput:I.Z,QIcon:E.Z,QPagination:C.Z})}}]);