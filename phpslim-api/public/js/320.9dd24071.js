"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[320],{6320:(e,a,l)=>{l.r(a),l.d(a,{default:()=>G});var s=l(9835),o=l(1957),n=l(499),r=l(6970),i=l(8339),u=l(1569),d=l(9302);const c={class:"row q-gutter-xs q-mb-md"},m={class:"col"},p={key:0,class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},v={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},g={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},b={key:0},w={key:0,class:"flex flex-center"},k={class:"q-mt-md q-gutter-md row items-start"},f={class:"absolute-bottom text-subtitle1 text-center"},x={class:"text-caption q-mb-none"},h={class:"absolute-full flex flex-center bg-grey-3 text-dark"},q={class:"absolute-bottom text-subtitle1 text-center bg-grey-5 q-py-md"},_={class:"text-caption q-mb-none"},y={class:"absolute-full flex flex-center bg-grey-3 text-dark"},U={class:"absolute-bottom text-subtitle1 text-center bg-grey-5 q-py-md"},Q={class:"text-caption q-mb-none"},T={__name:"BrowseArtistsPage",setup(e){const a=(0,d.Z)(),l=(0,n.iH)(null),T=(0,n.iH)(!1),V=(0,n.iH)(!1),W=(0,n.iH)([]),Z=(0,n.iH)(0),S=(0,i.yj)(),H=[{label:"Name",value:"name"},{label:"Total tracks",value:"totalTracks"}],C=(0,n.iH)(H[0]),I=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],z=(0,n.iH)(I[0]);let D=[],A=(0,n.iH)([]);const P=(0,n.iH)(S.params.genre||null),E=(0,n.iH)(0),j=(0,n.iH)(1),B=(0,n.iH)(null);function N(e){e&&(j.value=1),T.value=!1,V.value=!0,u.api.artist.search({genre:P.value||null,name:l.value||null},j.value,32,C.value.value,z.value.value).then((e=>{W.value=e.data.data.items,E.value=e.data.data.pager.totalPages,e.data.data.pager.totalResults<1&&(T.value=!0),V.value=!1,Z.value=Date.now(),(0,s.Y3)((()=>{B.value.$el.focus()}))})).catch((e=>{W.value=[],a.notify({type:"negative",message:"API Error: error loading artists",caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})}),V.value=!1,Z.value=Date.now()}))}function M(e){j.value=e,N(!1)}function F(){V.value=!0,u.api.artistGenres.get().then((e=>{D=e.data.genres,S.params.genre&&(P.value=S.params.genre),A.value=D,V.value=!1})).catch((e=>{a.notify({type:"negative",message:"API Error: error loading genres ",caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})}),V.value=!1}))}function G(e,a,l){e.length<3?l():a((()=>{const a=e.toLowerCase();A.value=D.filter((e=>e.toLowerCase().indexOf(a)>-1))}))}return F(),N(!0),(e,a)=>{const t=(0,s.up)("q-breadcrumbs-el"),i=(0,s.up)("q-breadcrumbs"),u=(0,s.up)("q-icon"),d=(0,s.up)("q-input"),F=(0,s.up)("q-chip"),K=(0,s.up)("q-badge"),L=(0,s.up)("q-item-section"),R=(0,s.up)("q-item"),Y=(0,s.up)("q-select"),O=(0,s.up)("q-pagination"),$=(0,s.up)("q-spinner"),J=(0,s.up)("q-img"),X=(0,s.up)("router-link"),ee=(0,s.up)("q-card-section"),ae=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(ae,{class:"q-pa-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"q-mb-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(t,{icon:"home",label:"Spieldose"}),(0,s.Wm)(t,{icon:"person",label:"Browse artists"})])),_:1}),(0,s.Wm)(ee,null,{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("div",m,[(0,s.Wm)(d,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search artists with name",loading:V.value,onKeydown:a[1]||(a[1]=(0,o.D2)((0,o.iM)((e=>N(!0)),["prevent"]),["enter"])),onClear:a[2]||(a[2]=e=>{T.value=!1,N(!0)}),error:T.value,errorMessage:"No artists found with specified condition",disable:V.value,ref_key:"artistNameRef",ref:B},{prepend:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"filter_alt"})])),append:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"search",class:"cursor-pointer",onClick:N})])),_:1},8,["modelValue","loading","error","disable"])]),(0,n.SU)(D)&&(0,n.SU)(D).length>0?((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(Y,{outlined:"",dense:"",modelValue:P.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>P.value=e),a[4]||(a[4]=e=>N(!0))],options:(0,n.SU)(A),"options-dense":"",label:"Genre",disable:V.value||null!=(0,n.SU)(S).params.genre,"emit-value":"",filled:"",clearable:"",hint:P.value?"Filtering by genre":"Minimum 3 characters to trigger filtering","use-input":"","hide-selected":"","input-debounce":"0",onFilter:G},{selected:(0,s.w5)((()=>[P.value?((0,s.wg)(),(0,s.j4)(F,{key:0,dense:"",square:"",color:"white","text-color":"primary",class:"q-my-none q-ml-xs q-mr-none"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(P.value.name),1)])),_:1})):((0,s.wg)(),(0,s.j4)(K,{key:1},{default:(0,s.w5)((()=>[(0,s.Uk)("*none*")])),_:1}))])),"no-option":(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,{class:"text-grey"},{default:(0,s.w5)((()=>[(0,s.Uk)(" No results ")])),_:1})])),_:1})])),_:1},8,["modelValue","options","disable","hint"])])):(0,s.kq)("",!0),(0,s._)("div",v,[(0,s.Wm)(Y,{outlined:"",dense:"",modelValue:C.value,"onUpdate:modelValue":[a[5]||(a[5]=e=>C.value=e),a[6]||(a[6]=e=>N(!0))],options:H,"options-dense":"",label:"Sort field",disable:V.value},{"selected-item":(0,s.w5)((e=>[(0,s.Uk)((0,r.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,s._)("div",g,[(0,s.Wm)(Y,{outlined:"",dense:"",modelValue:z.value,"onUpdate:modelValue":[a[7]||(a[7]=e=>z.value=e),a[8]||(a[8]=e=>N(!0))],options:I,"options-dense":"",label:"Sort order",disable:V.value},{"selected-item":(0,s.w5)((e=>[(0,s.Uk)((0,r.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])])]),W.value&&W.value.length>0?((0,s.wg)(),(0,s.iD)("div",b,[E.value>1?((0,s.wg)(),(0,s.iD)("div",w,[(0,s.Wm)(O,{modelValue:j.value,"onUpdate:modelValue":[a[9]||(a[9]=e=>j.value=e),M],color:"dark",max:E.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:V.value},null,8,["modelValue","max","disable"])])):(0,s.kq)("",!0),(0,s._)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(W.value,((e,a,l,t)=>{const o=[Z.value];if(t&&t.key===e.hash&&(0,s.nQ)(t,o))return t;const n=((0,s.wg)(),(0,s.j4)(X,{to:{name:e.mbId&&e.name?"mbArtist":"artist",params:{mbid:e.mbId,name:e.name}},key:e.hash},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{"img-class":"artist_image",src:e.image||"#",width:"250px",height:"250px",fit:"cover"},{loading:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s.Wm)($,{color:"pink",size:"xl"}),(0,s._)("div",q,[(0,s.Uk)((0,r.zw)(e.name)+" ",1),(0,s._)("p",_,(0,r.zw)(e.totalTracks+" "+(e.totalTracks>1?"tracks":"track")),1)])])])),error:(0,s.w5)((()=>[(0,s._)("div",y,[(0,s._)("div",U,[(0,s.Uk)((0,r.zw)(e.name)+" ",1),(0,s._)("p",Q,(0,r.zw)(e.totalTracks+" "+(e.totalTracks>1?"tracks":"track")),1)])])])),default:(0,s.w5)((()=>[(0,s._)("div",f,[(0,s.Uk)((0,r.zw)(e.name)+" ",1),(0,s._)("p",x,(0,r.zw)(e.totalTracks+" "+(e.totalTracks>1?"tracks":"track")),1)])])),_:2},1032,["src"])])),_:2},1032,["to"]));return n.memo=o,n}),a,10),128))])])):(0,s.kq)("",!0)])),_:1})])),_:1})}}};var V=l(4458),W=l(2605),Z=l(8052),S=l(3190),H=l(6611),C=l(2857),I=l(6384),z=l(7691),D=l(990),A=l(490),P=l(1233),E=l(996),j=l(335),B=l(3902),N=l(9984),M=l.n(N);const F=T,G=F;M()(T,"components",{QCard:V.Z,QBreadcrumbs:W.Z,QBreadcrumbsEl:Z.Z,QCardSection:S.Z,QInput:H.Z,QIcon:C.Z,QSelect:I.Z,QChip:z.Z,QBadge:D.Z,QItem:A.Z,QItemSection:P.Z,QPagination:E.Z,QImg:j.Z,QSpinner:B.Z})}}]);