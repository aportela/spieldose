"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[441],{3441:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});t(2879);var l=t(9835),s=t(499),r=t(8339),u=t(1569),n=t(9302),o=t(6647),i=t(8330);const c={__name:"ArtistsGenreSelector",props:["disable","defaultGenre"],emits:["change"],setup(e,{emit:a}){const t=e,r=a,{t:i}=(0,o.QT)(),c=(0,n.Z)();let d=[];const v=(0,s.iH)(t.defaultGenre||null),m=(0,s.iH)([]),g=(0,s.iH)(!1);function p(){g.value=!0,u.api.artistGenres.get().then((e=>{d=e.data.genres,m.value=d,g.value=!1})).catch((e=>{c.notify({type:"negative",message:i("API Error: error loading artists genres"),caption:i("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})}),g.value=!1}))}function b(e,a,t){e.length<3?t():a((()=>{const a=e.toLowerCase();m.value=d.filter((e=>e.toLowerCase().indexOf(a)>-1))}))}function f(e){r("change",e)}return p(),(a,t)=>{const r=(0,l.up)("q-select");return(0,l.wg)(),(0,l.j4)(r,{outlined:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>v.value=e),f],options:m.value,"options-dense":"",label:(0,s.SU)(i)("Genre"),disable:g.value||e.disable,"emit-value":"",filled:"",clearable:"",hint:v.value?null:(0,s.SU)(i)("Minimum 3 characters to trigger autocomplete"),"use-input":"","input-debounce":"0",onFilter:b},null,8,["modelValue","options","label","disable","hint"])}}};var d=t(6384),v=t(9984),m=t.n(v);const g=c,p=g;m()(c,"components",{QSelect:d.Z});var b=t(7618),f=t(5919),y=t(8077),k=t(6970);const h={class:"absolute-bottom text-subtitle1 text-center"},q={class:"text-caption q-mb-none"},w={class:"absolute-full flex flex-center bg-grey-3 text-dark"},x={class:"absolute-bottom text-subtitle1 text-center bg-grey-5 q-py-md"},T={class:"text-caption q-mb-none"},_={class:"absolute-full flex flex-center bg-grey-3 text-dark"},S={class:"absolute-bottom text-subtitle1 text-center bg-grey-5 q-py-md"},H={class:"text-caption q-mb-none"},C={__name:"ArtistAvatarLink",props:["mbId","name","image","totalTracks"],setup(e){const{t:a}=(0,o.QT)();return(t,r)=>{const u=(0,l.up)("q-spinner"),n=(0,l.up)("q-img"),o=(0,l.up)("router-link");return(0,l.wg)(),(0,l.j4)(o,{to:{name:"artist",params:{name:e.name},query:{mbid:e.mbId,tab:"overview"}}},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{"img-class":"sp-artist-image-filter",src:e.image||"#",width:"250px",height:"250px",fit:"cover"},{loading:(0,l.w5)((()=>[(0,l._)("div",w,[(0,l.Wm)(u,{color:"pink",size:"xl"}),(0,l._)("div",x,[(0,l.Uk)((0,k.zw)(e.name)+" ",1),(0,l._)("p",T,(0,k.zw)(e.totalTracks)+" "+(0,k.zw)((0,s.SU)(a)(e.totalTracks>1?"tracks":"track")),1)])])])),error:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l._)("div",S,[(0,l.Uk)((0,k.zw)(e.name)+" ",1),(0,l._)("p",H,(0,k.zw)(e.totalTracks)+" "+(0,k.zw)((0,s.SU)(a)(e.totalTracks>1?"tracks":"track")),1)])])])),default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l.Uk)((0,k.zw)(e.name)+" ",1),(0,l._)("p",q,(0,k.zw)(e.totalTracks)+" "+(0,k.zw)((0,s.SU)(a)(e.totalTracks>1?"tracks":"track")),1)])])),_:1},8,["src"])])),_:1},8,["to"])}}};var I=t(335),U=t(3902);const V=C,A=V;m()(C,"components",{QImg:I.Z,QSpinner:U.Z});const P={class:"row q-gutter-xs q-mb-md"},z={class:"col"},E={class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},Z={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},Q={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},D={__name:"BrowseArtistsPage",setup(e){const a=(0,n.Z)(),{t}=(0,o.QT)(),c=(0,r.yj)(),d=(0,r.tv)(),v=(0,s.iH)(null),m=(0,s.iH)(c.query.name||null),g=(0,s.iH)(c.query.genre||null),k=[{label:"Sort by artist name",value:"name"},{label:"Sort by total tracks",value:"totalTracks"}],h=(0,s.iH)("totalTracks"==c.query.sortField?"totalTracks":"name"),q=(0,s.iH)("DESC"==c.query.sortOrder?"DESC":"ASC"),w=(0,s.iH)(!1),x=(0,s.iH)(!1),T=(0,s.iH)([]),_=(0,s.iH)(0),S=(0,s.iH)(0),H=(0,s.iH)(0),C=(0,s.iH)(parseInt(c.query.page||1));function I(e,a,t,l,s){const r=Object.assign({},c.query||{});r.page=e||1,r.name=a||null,r.genre=t||null,r.sortField=l||"name",r.sortOrder=s||"ASC",d.push({name:"artists",query:r})}function U(e){I(e,m.value,g.value,h.value,q.value)}function V(){I(1,m.value,g.value,h.value,q.value)}function D(e){I(1,m.value,e,h.value,q.value)}function F(e){I(C.value,m.value,g.value,e,q.value)}function G(e){I(C.value,m.value,g.value,h.value,e)}function O(){w.value=!1,x.value=!0,u.api.artist.search({genre:g.value||null,name:m.value||null},C.value,32,h.value,q.value).then((e=>{T.value=e.data.data.items,S.value=e.data.data.pager.totalPages,H.value=e.data.data.pager.totalResults,w.value=e.data.data.pager.totalResults<1,x.value=!1,_.value=Date.now(),(0,l.Y3)((()=>{v.value&&v.value.focus()}))})).catch((e=>{T.value=[],S.value=0,H.value=0,a.notify({type:"negative",message:t("API Error: error loading artists"),caption:t("API Error: fatal error details",{status:e.response.status,statusText:e.response.statusText})}),x.value=!1,_.value=Date.now()}))}return d.beforeEach((async(e,a)=>{"artists"==a.name&&(C.value=parseInt(e.query.page||1),m.value=e.query.name||null,g.value=e.query.genre||null,q.value="DESC"==e.query.sortOrder?"DESC":"ASC",h.value=k["totalTracks"==e.query.sortField?1:0].value,"artists"!=e.name||e.query.page==a.query.page&&e.query.name==a.query.name&&e.query.genre==a.query.genre&&e.query.sortOrder==a.query.sortOrder&&e.query.sortField==a.query.sortField||(0,l.Y3)((()=>{O()})))})),(0,l.bv)((()=>{O()})),(e,a)=>{const r=(0,l.up)("q-breadcrumbs-el");return(0,l.wg)(),(0,l.j4)(i.Z,{disable:x.value,currentPageIndex:C.value,totalPages:S.value,totalResults:H.value,onPaginationChanged:U},{breacrumb:(0,l.w5)((()=>[(0,l.Wm)(r,{icon:"person",label:(0,s.SU)(t)("Browse artists")},null,8,["label"])])),filter:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l._)("div",z,[(0,l.Wm)(b.Z,{disable:x.value,loading:x.value&&m.value?.length>0,hint:"Search by artist name",placeholder:"Text condition",error:w.value&&m.value?.length>0,errorMessage:"No artists found with the specified condition filter",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),onSubmit:V,onClear:V,ref_key:"autoFocusRef",ref:v},null,8,["disable","loading","error","modelValue"])]),(0,l._)("div",E,[(0,l.Wm)(p,{disable:x.value,defaultGenre:g.value,onChange:D},null,8,["disable","defaultGenre"])]),(0,l._)("div",Z,[(0,l.Wm)(f.Z,{disable:x.value,label:"Sort field",options:k,modelValue:h.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>h.value=e),F]},null,8,["disable","modelValue"])]),(0,l._)("div",Q,[(0,l.Wm)(y.Z,{disable:x.value,modelValue:q.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>q.value=e),G]},null,8,["disable","modelValue"])])])])),items:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.value,((e,a,t,s)=>{const r=[_.value];if(s&&s.key===e.hash&&(0,l.nQ)(s,r))return s;const u=((0,l.wg)(),(0,l.j4)(A,{key:e.hash,mbId:e.mbId,name:e.name,image:e.image,totalTracks:e.totalTracks},null,8,["mbId","name","image","totalTracks"]));return u.memo=r,u}),a,3),128))])),_:1},8,["disable","currentPageIndex","totalPages","totalResults"])}}};var F=t(8052);const G=D,O=G;m()(D,"components",{QBreadcrumbsEl:F.Z})}}]);