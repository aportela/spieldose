"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[633],{2719:(e,t,a)=>{a.d(t,{d:()=>u});var l=a(1809),s=a(8612),r=a.n(s),n=a(4958);(0,n.n)();const i={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},u=(0,l.Q_)("currentPlaylist",{state:()=>({tracks:[],currentIndex:-1}),getters:{hasTracks:e=>e.tracks&&e.tracks.length>0,getTracks:e=>e.tracks,getCurrentIndex:e=>e.currentIndex,getCurrentTrack:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex]:null,getCurrentTrackURL:e=>e.currentIndex>=0&&e.tracks.length>0?e.tracks[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.tracks.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.tracks.length>0&&e.currentIndex<e.tracks.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=r()(i),t=e.get("currentPlaylistTracks");t&&(this.tracks=t);const a=e.get("currentPlaylistTrackIndex");a>=0&&(this.currentIndex=a)},saveTracks(e){this.tracks=e,this.currentIndex=e&&e.length>0?0:-1;const t=r()(i);t.set("currentPlaylistTracks",e),t.set("currentPlaylistTrackIndex",e&&e.length>0?0:-1)},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=r()(i);t.set("currentPlaylistTrackIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},4958:(e,t,a)=>{a.d(t,{n:()=>n});var l=a(1809),s=a(1320);const r=(0,s.l)(),n=(0,l.Q_)("player",{state:()=>({element:null,hasPreviousUserInteractions:!1}),getters:{getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),r.setStatusStopped()},load(){},play(e){e?(this.element.play(),r.setStatusPlaying()):r.isPlaying?(this.element.pause(),r.setStatusPaused()):r.isPaused?(this.element.play(),r.setStatusPlaying()):(this.element.load(),this.element.play(),r.setStatusPlaying())}}})},1320:(e,t,a)=>{a.d(t,{l:()=>s});var l=a(1809);const s=(0,l.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},1633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(9835),s=a(499),r=a(6970),n=a(1957),i=a(9302),u=a(1569),o=a(4958),c=a(1320),d=a(2719);const k=(0,l._)("thead",null,[(0,l._)("tr",{class:"bg-grey-2 text-grey-10"},[(0,l._)("th",{class:"text-right"},"Index"),(0,l._)("th",{class:"text-left"},"Title"),(0,l._)("th",{class:"text-left"},"Artist"),(0,l._)("th",{class:"text-left"},"Album Artist"),(0,l._)("th",{class:"text-left"},"Album"),(0,l._)("th",{class:"text-right"},"Album Track nÂº"),(0,l._)("th",{class:"text-right"},"Year"),(0,l._)("th",{class:"text-center"},"Actions")])],-1),m={key:0},p=["onClick"],g=["onClick"],h={class:"text-left"},b={class:"text-left"},x={class:"text-left"},y=(0,l._)("span",{class:"is-clickable"},[(0,l._)("i",{class:"fas fa-link ml-1"})],-1),v={class:"text-right"},w={class:"text-right"},_={class:"text-center"},f={key:1},P={colspan:"8",class:"text-center"},C={__name:"CurrentPlaylistPage",setup(e){const t=(0,i.Z)(),a=(0,o.n)(),C=(0,d.d)(),S=(0,c.l)(),T=(0,s.iH)([]),I=(0,s.iH)(0),q=(0,s.iH)(!1);function W(){a.stop(),T.value=[],C.saveTracks([])}function U(e){a.interact(),C.saveCurrentTrackIndex(e)}function z(){a.interact(),q.value=!0,I.value=0,u.api.track.search(1,32,!0,{}).then((e=>{T.value=e.data.tracks,C.saveTracks(e.data.tracks),q.value=!1})).catch((e=>{t.notify({type:"negative",message:"API Error: error loading tracks",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),q.value=!1}))}const Q=(0,l.Fl)((()=>C.getCurrentIndex));function Z(){a.stop(),z()}function D(){a.interact(),C.skipPrevious()}function A(){a.interact(),a.play()}function j(){a.interact(),a.play()}function N(){a.interact(),a.play()}function R(){a.stop(),a.setCurrentTime(0)}function E(){a.interact(),C.skipNext()}return(0,l.YP)(Q,(e=>{I.value=e})),T.value=C.getTracks,I.value=C.getCurrentIndex,(e,t)=>{const a=(0,l.up)("q-breadcrumbs-el"),i=(0,l.up)("q-breadcrumbs"),u=(0,l.up)("q-btn"),o=(0,l.up)("q-btn-group"),c=(0,l.up)("q-icon"),d=(0,l.up)("router-link"),z=(0,l.up)("q-spinner"),Q=(0,l.up)("q-markup-table"),H=(0,l.up)("q-card"),B=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(H,{class:"q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{icon:"home",label:"Spieldose"}),(0,l.Wm)(a,{icon:"list_alt",label:"Current playlist"})])),_:1}),(0,l.Wm)(o,{spread:"",class:"q-mb-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{outline:"",color:"dark",label:"Clear",icon:"clear",onClick:W,disable:q.value||!(T.value&&T.value.length>0)},null,8,["disable"]),(0,l.Wm)(u,{outline:"",color:"dark",label:"Random",icon:"bolt",onClick:Z,disable:q.value},null,8,["disable"]),(0,l.Wm)(u,{outline:"",color:"dark",label:"Previous",icon:"skip_previous",onClick:D,disable:q.value||!(0,s.SU)(C).allowSkipPrevious},null,8,["disable"]),(0,s.SU)(S).isStopped?((0,l.wg)(),(0,l.j4)(u,{key:0,outline:"",color:"dark",label:"Play",icon:"play_arrow",onClick:A,disable:q.value||!(0,s.SU)(C).hasTracks},null,8,["disable"])):(0,s.SU)(S).isPlaying?((0,l.wg)(),(0,l.j4)(u,{key:1,outline:"",color:"dark",label:"Pause",icon:"pause",onClick:j,disable:q.value},null,8,["disable"])):(0,s.SU)(S).isPaused?((0,l.wg)(),(0,l.j4)(u,{key:2,outline:"",color:"dark",label:"Resume",icon:"play_arrow",onClick:N,disable:q.value},null,8,["disable"])):(0,l.kq)("",!0),(0,l.Wm)(u,{outline:"",color:"dark",label:"Stop",icon:"stop",onClick:R,disable:q.value||(0,s.SU)(S).isStopped},null,8,["disable"]),(0,l.Wm)(u,{outline:"",color:"dark",label:"Next",icon:"skip_next",onClick:E,disable:q.value||!(0,s.SU)(C).allowSkipNext},null,8,["disable"]),(0,l.Wm)(u,{outline:"",color:"dark",label:"Download",icon:"save_alt",disable:q.value||!(0,s.SU)(C).getCurrentTrackURL,href:(0,s.SU)(C).getCurrentTrackURL},null,8,["disable","href"])])),_:1}),(0,l.Wm)(Q,{flat:"",bordered:""},{default:(0,l.w5)((()=>[k,q.value?((0,l.wg)(),(0,l.iD)("tbody",f,[(0,l._)("tr",null,[(0,l._)("td",P,[(0,l.wy)((0,l.Wm)(z,{color:"pink",size:"xl",class:"q-ml-sm",thickness:10},null,512),[[n.F8,q.value]])])])])):((0,l.wg)(),(0,l.iD)("tbody",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(T.value,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id,class:(0,r.C_)(["non-selectable",{"bg-pink text-white":I.value==t}])},[(0,l._)("td",{class:"text-right cursor-pointer",onClick:e=>U(t)},[I.value==t?((0,l.wg)(),(0,l.j4)(c,{key:0,name:"play_arrow",size:"sm",class:"q-mr-sm"})):(0,l.kq)("",!0),(0,l.Uk)((0,r.zw)(t+1)+"/32",1)],8,p),(0,l._)("td",{class:"text-left cursor-pointer",onClick:e=>U(t)},(0,r.zw)(e.title),9,g),(0,l._)("td",h,[e.artist&&e.artist.name?((0,l.wg)(),(0,l.j4)(d,{key:0,class:(0,r.C_)({"text-white text-bold":I.value==t}),to:{name:"artist",params:{name:e.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,r.zw)(e.artist.name),1)])),_:2},1032,["class","to"])):(0,l.kq)("",!0)]),(0,l._)("td",b,[e.album&&e.album.artist.name?((0,l.wg)(),(0,l.j4)(d,{key:0,class:(0,r.C_)({"text-white text-bold":I.value==t}),to:{name:"artist",params:{name:e.album.artist.name}}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"link",class:"q-mr-sm"}),(0,l.Uk)((0,r.zw)(e.album.artist.name),1)])),_:2},1032,["class","to"])):(0,l.kq)("",!0)]),(0,l._)("td",x,[(0,l.Uk)((0,r.zw)(e.album?e.album.title:null),1),y]),(0,l._)("td",v,(0,r.zw)(e.trackNumber),1),(0,l._)("td",w,(0,r.zw)(e.album?e.album.year:null),1),(0,l._)("td",_,[(0,l.Wm)(o,{outline:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{size:"sm",color:"white","text-color":"grey-5",icon:"north",title:"Up",disabled:""}),(0,l.Wm)(u,{size:"sm",color:"white","text-color":"grey-5",icon:"south",title:"Down",disabled:""}),(0,l.Wm)(u,{size:"sm",color:"white","text-color":"grey-5",icon:"favorite",title:"Toggle favorite",disabled:""}),(0,l.Wm)(u,{size:"sm",color:"white","text-color":"grey-5",icon:"download",title:"Download",disable:q.value,href:"api/2/file/"+e.id},null,8,["disable","href"])])),_:2},1024)])],2)))),128))]))])),_:1})])),_:1})])),_:1})}}};var S=a(9885),T=a(4458),I=a(2605),q=a(8052),W=a(7236),U=a(8879),z=a(6933),Q=a(2857),Z=a(3902),D=a(9984),A=a.n(D);const j=C,N=j;A()(C,"components",{QPage:S.Z,QCard:T.Z,QBreadcrumbs:I.Z,QBreadcrumbsEl:q.Z,QBtnGroup:W.Z,QBtn:U.Z,QMarkupTable:z.Z,QIcon:Q.Z,QSpinner:Z.Z})}}]);