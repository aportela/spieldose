"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[805],{2719:(e,t,n)=>{n.d(t,{d:()=>u});var l=n(1809),s=n(8612),a=n.n(s);const r={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},u=(0,l.Q_)("currentPlaylist",{state:()=>({elements:[],currentIndex:-1,elementsLastChangeTimestamp:null}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,getElementsLastChangeTimestamp:e=>e.elementsLastChangeTimestamp,getCurrentIndex:e=>e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=a()(r),t=e.get("currentPlaylistElements");t&&(this.elements=t);const n=e.get("currentPlaylistElementIndex");n>=0&&(this.currentIndex=n)},saveElements(e){this.elements=e,this.currentIndex=e&&e.length>0?0:-1;const t=a()(r);t.set("currentPlaylistElements",e),t.set("currentPlaylistElementIndex",e&&e.length>0?0:-1),this.elementsLastChangeTimestamp=Date.now()},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=a()(r);t.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.currentIndex--},skipNext(){this.currentIndex++}}})},7805:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var l=n(9835),s=n(6970),a=n(499),r=n(1569),u=n(9302),i=n(2719);const c={key:0},o={key:1},d={__name:"BrowsePathsPage",setup(e){const t=(0,u.Z)(),n=(0,i.d)(),d=(0,a.iH)(!1),m=(0,a.iH)(!1),h=(0,a.iH)([]),p=(0,a.iH)(null);function g(){d.value=!1,m.value=!0,r.api.path.getTree().then((e=>{h.value=e.data.items,m.value=!1})).catch((e=>{t.notify({type:"negative",message:"API Error: error loading paths",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),m.value=!1}))}function v(e,t){var n,l,s;if(e==t.hash)return t;for(n=0;n<t.children.length;n+=1)if(l=t.children[n],s=v(e,l),!1!==s)return s;return!1}function x(e){let t=v(e,h.value[0]);return t&&t.id&&(m.value=!0,r.api.track.search({path:t.id},1,0,!1,"title","ASC").then((e=>{n.saveElements(e.data.tracks),m.value=!1})).catch((e=>{m.value=!1}))),!0}return g(),(e,t)=>{const n=(0,l.up)("q-breadcrumbs-el"),a=(0,l.up)("q-breadcrumbs"),r=(0,l.up)("q-icon"),u=(0,l.up)("q-tree"),i=(0,l.up)("q-card-section"),d=(0,l.up)("q-card"),m=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{icon:"home",label:"Spieldose"}),(0,l.Wm)(n,{icon:"person",label:"Browse paths"})])),_:1}),h.value&&h.value.length>0?((0,l.wg)(),(0,l.j4)(i,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(u,{nodes:h.value,selected:p.value,"onUpdate:selected":[t[0]||(t[0]=e=>p.value=e),x],"node-key":"hash","label-key":"name","children-key":"children","no-transition":""},{"default-header":(0,l.w5)((e=>[e.node.totalFiles>0?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(r,{name:"playlist_play"}),(0,l.Uk)(),(0,l.Wm)(r,{name:"playlist_add"}),(0,l.Uk)(" "+(0,s.zw)(e.node.name)+" ("+(0,s.zw)(e.node.totalFiles)+" total tracks) ",1)])):((0,l.wg)(),(0,l.iD)("span",o,(0,s.zw)(e.node.name),1))])),_:1},8,["nodes","selected"])])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})}}};var m=n(9885),h=n(4458),p=n(2605),g=n(8052),v=n(3190),x=n(1831),w=n(2857),I=n(9984),k=n.n(I);const y=d,P=y;k()(d,"components",{QPage:m.Z,QCard:h.Z,QBreadcrumbs:p.Z,QBreadcrumbsEl:g.Z,QCardSection:v.Z,QTree:x.Z,QIcon:w.Z})}}]);