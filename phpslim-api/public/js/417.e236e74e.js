"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[417],{2719:(e,t,l)=>{l.d(t,{d:()=>o});var a=l(1809),s=l(8612),n=l.n(s),i=l(4958);const r=(0,i.n)(),u={namespace:"spieldose",storages:["local","cookie","session","memory"],storage:"local",expireDays:3650},o=(0,a.Q_)("currentPlaylist",{state:()=>({elements:[],shuffleIndexes:[],currentIndex:-1,elementsLastChangeTimestamp:null}),getters:{hasElements:e=>e.elements&&e.elements.length>0,getElements:e=>e.elements,elementCount:e=>e.elements?e.elements.length:0,getElementsLastChangeTimestamp:e=>e.elementsLastChangeTimestamp,getCurrentIndex:e=>r.getShuffle?e.shuffleIndexes[e.currentIndex]:e.currentIndex,getCurrentElement:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex]:null,getCurrentElementURL:e=>e.currentIndex>=0&&e.elements.length>0?e.elements[e.currentIndex].url:null,allowSkipPrevious:e=>e.currentIndex>0&&e.elements.length>0,allowSkipNext:e=>e.currentIndex>=0&&e.elements.length>0&&e.currentIndex<e.elements.length-1,allowPlay:e=>!0,allowPause:e=>!0,allowResume:e=>!0,allowStop:e=>!0},actions:{load(){const e=n()(u),t=e.get("currentPlaylistElements");t&&(this.elements=t);const l=e.get("shuffleIndexes");l&&(this.shuffleIndexes=l);const a=e.get("currentPlaylistElementIndex");a>=0&&(this.currentIndex=a)},saveCurrentElements(){const e=n()(u);e.set("currentPlaylistElements",this.elements),e.set("currentPlaylistElementIndex",this.currentIndex),e.set("shuffleIndexes",this.shuffleIndexes),this.elementsLastChangeTimestamp=Date.now()},saveElements(e){this.elements=e,this.shuffleIndexes=[...Array(e.length).keys()].sort((function(){return.5-Math.random()})),this.currentIndex=e&&e.length>0?0:-1,this.saveCurrentElements()},appendElements(e){this.elements=this.elements.concat(e),this.saveCurrentElements()},saveCurrentTrackIndex(e){this.currentIndex=e>=0?e:-1;const t=n()(u);t.set("currentPlaylistElementIndex",this.currentIndex)},skipPrevious(){this.saveCurrentTrackIndex(--this.currentIndex)},skipNext(){this.saveCurrentTrackIndex(++this.currentIndex)},clear(){this.elements=[],this.currentIndex=-1;const e=n()(u);e.set("currentPlaylistElements",[]),e.set(-1),this.elementsLastChangeTimestamp=Date.now()},setFavoriteTrack(e,t){const l=this.elements.findIndex((t=>t.track&&t.track.id==e));-1!==l&&(this.elements[l].track.favorited=t,this.saveCurrentElements())},unSetFavoriteTrack(e){const t=this.elements.findIndex((t=>t.track&&t.track.id==e));-1!==t&&(this.elements[t].track.favorited=null,this.saveCurrentElements())}}})},4958:(e,t,l)=>{l.d(t,{n:()=>i});var a=l(1809),s=l(1320);const n=(0,s.l)(),i=(0,a.Q_)("player",{state:()=>({repeatMode:null,shuffle:!1,element:null,hasPreviousUserInteractions:!1,originalAudioMotionAnalyzerSource:null}),getters:{getRepeatMode:e=>e.repeatMode,getShuffle:e=>e.shuffle,getElement:e=>e.element,getDuration:e=>e.element.duration},actions:{interact(){this.hasPreviousUserInteractions=!0},create(){this.element=document.createElement("audio"),this.element.id="audio_player",this.element.crossOrigin="anonymous"},setVolume(e){this.element.volume=e},setCurrentTime(e){this.element.currentTime=e},stop(){this.element.pause(),n.setStatusStopped()},load(){},play(e){e?(this.element.play(),n.setStatusPlaying()):n.isPlaying?(this.element.pause(),n.setStatusPaused()):n.isPaused?(this.element.play(),n.setStatusPlaying()):(this.element.load(),this.element.play(),n.setStatusPlaying())},setRepeatMode(e){this.repeatMode=e},toggleShuffle(){this.shuffle=!this.shuffle},setAudioMotionAnalyzerSource:function(e){this.originalAudioMotionAnalyzerSource=e},getAudioMotionAnalyzerSource:function(){return this.originalAudioMotionAnalyzerSource}}})},1320:(e,t,l)=>{l.d(t,{l:()=>s});var a=l(1809);const s=(0,a.Q_)("playerStatus",{state:()=>({status:"stopped"}),getters:{getStatus(e){return e.status},isPlaying(e){return"playing"==e.status},isStopped(e){return"stopped"==e.status},isPaused(e){return"paused"==e.status}},actions:{setStatusPlaying(){this.status="playing"},setStatusStopped(){this.status="stopped"},setStatusPaused(){this.status="paused"}}})},5226:(e,t,l)=>{l.d(t,{Z:()=>A});var a=l(9835),s=l(6970),n=l(499);const i={class:"animated-album-cover-item"},r={class:"play-album"},u={class:"album-actions"},o=(0,a._)("span",{class:"clear: both;"},null,-1),m={key:0,class:"vinyl no-cover",src:"images/vinyl-medium.png"},c={class:"album-info"},d=["title"],p={key:1,class:"artist-name"},h={key:0},v={key:2},g={__name:"AnimatedAlbumCover",props:{title:String,artistName:String,year:Number,image:String},emits:["play","enqueue"],setup(e,{emit:t}){const l=e,g=(0,n.iH)(!1),b=(0,n.iH)(!1),y=(0,a.Fl)((()=>l.image&&!b.value?l.image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="));function f(){g.value=!0}function x(){b.value=!0}function k(){t("play")}function A(){t("enqueue")}return(t,l)=>{const n=(0,a.up)("q-img"),I=(0,a.up)("q-icon"),w=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",r,[(0,a.Wm)(n,{class:(0,s.C_)(["album-thumbnail",{"album-thumbnail-animated":g.value||b.value}]),src:y.value,width:"174px",height:"174px","spinner-color":"pink",onLoad:f,onError:x},null,8,["class","src"]),(0,a._)("div",u,[(0,a.Wm)(I,{class:"cursor-pointer",name:"add_box",size:"80px",color:"pink",title:"Enqueue album",style:{left:"10px"},onClick:A}),(0,a.Wm)(I,{class:"cursor-pointer",name:"play_arrow",size:"80px",color:"pink",title:"Play album",style:{left:"80px"},onClick:k}),o]),g.value||b.value?((0,a.wg)(),(0,a.iD)("img",m)):(0,a.kq)("",!0)]),(0,a._)("div",c,[e.title?((0,a.wg)(),(0,a.iD)("p",{key:0,class:"album-name",title:e.title},(0,s.zw)(e.title),9,d)):(0,a.kq)("",!0),e.artistName?((0,a.wg)(),(0,a.iD)("p",p,[(0,a.Uk)("by "),(0,a.Wm)(w,{title:e.artistName,to:{name:"artist",params:{name:e.artistName}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.artistName),1)])),_:1},8,["title","to"]),(0,a.Uk)(),e.year?((0,a.wg)(),(0,a.iD)("span",h,"("+(0,s.zw)(e.year)+")",1)):(0,a.kq)("",!0)])):e.year?((0,a.wg)(),(0,a.iD)("p",v,"("+(0,s.zw)(e.year)+")",1)):(0,a.kq)("",!0)])])}}};var b=l(335),y=l(2857),f=l(9984),x=l.n(f);const k=g,A=k;x()(g,"components",{QImg:b.Z,QIcon:y.Z})},8417:(e,t,l)=>{l.r(t),l.d(t,{default:()=>T});var a=l(9835),s=l(499),n=l(6970),i=l(1957),r=l(1569),u=l(9302),o=l(5226),m=l(4958),c=l(2719);const d={class:"row q-gutter-xs"},p={class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},h={class:"col"},v={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},g={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},b={key:0,class:"q-pa-lg flex flex-center"},y={class:"q-gutter-md row items-start"},f={__name:"BrowseAlbumsPage",setup(e){const t=(0,u.Z)(),l=(0,m.n)(),f=(0,c.d)(),x=(0,s.iH)(null),k=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Title & Artist",value:"all"}],A=(0,s.iH)(k[2]),I=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Year",value:"year"}],w=(0,s.iH)(I[0]),S=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],C=(0,s.iH)(S[0]),E=(0,s.iH)(!1),P=(0,s.iH)(!1);let _=[];const q=(0,s.iH)(0),T=(0,s.iH)(1),U=(0,s.iH)(null);function N(e){e&&(T.value=1),E.value=!1,P.value=!0;let l={title:"title"==A.value.value?x.value:null,albumArtistName:"albumArtistName"==A.value.value?x.value:null,text:"all"==A.value.value?x.value:null};r.api.album.search(l,T.value,32,w.value.value,C.value.value).then((e=>{_=e.data.data.items.map((e=>(e.image=e.covers.small,e))),q.value=e.data.data.pager.totalPages,x.value&&e.data.data.pager.totalResults<1&&(E.value=!0),(0,a.Y3)((()=>{U.value.$el.focus()})),P.value=!1})).catch((e=>{t.notify({type:"negative",message:"API Error: error loading albums",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),P.value=!1}))}function V(e){T.value=e,N(!1)}function Q(e){l.interact(),P.value=!0,r.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{f.saveElements(e.data.data.items.map((e=>({track:e})))),P.value=!1})).catch((e=>{P.value=!1}))}function D(e){l.interact(),P.value=!0,r.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{f.appendElements(e.data.data.items.map((e=>({track:e})))),P.value=!1})).catch((e=>{P.value=!1}))}return N(!0),(e,t)=>{const l=(0,a.up)("q-breadcrumbs-el"),r=(0,a.up)("q-breadcrumbs"),u=(0,a.up)("q-select"),m=(0,a.up)("q-icon"),c=(0,a.up)("q-input"),f=(0,a.up)("q-pagination"),M=(0,a.up)("q-card-section"),z=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(z,{class:"q-pa-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"q-mb-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{icon:"home",label:"Spieldose"}),(0,a.Wm)(l,{icon:"album",label:"Browse albums"})])),_:1}),(0,s.SU)(_)?((0,a.wg)(),(0,a.j4)(M,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",p,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:A.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>A.value=e),t[1]||(t[1]=e=>N(!0))],options:k,"options-dense":"",label:"Search on",disable:P.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,n.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,a._)("div",h,[(0,a.Wm)(c,{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=e=>x.value=e),clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search albums with specified condition",loading:P.value,disable:P.value,onKeydown:t[3]||(t[3]=(0,i.D2)((0,i.iM)((e=>N(!0)),["prevent"]),["enter"])),onClear:t[4]||(t[4]=e=>{E.value=!1,N(!0)}),error:E.value,errorMessage:"No albums found with specified condition",ref_key:"searchTextRef",ref:U},{prepend:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"filter_alt"})])),append:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"search",class:"cursor-pointer",onClick:N})])),_:1},8,["modelValue","loading","disable","error"])]),(0,a._)("div",v,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:w.value,"onUpdate:modelValue":[t[5]||(t[5]=e=>w.value=e),t[6]||(t[6]=e=>N(!0))],options:I,"options-dense":"",label:"Sort field",disable:P.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,n.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,a._)("div",g,[(0,a.Wm)(u,{outlined:"",dense:"",modelValue:C.value,"onUpdate:modelValue":[t[7]||(t[7]=e=>C.value=e),t[8]||(t[8]=e=>N(!0))],options:S,"options-dense":"",label:"Sort order",disable:P.value},{"selected-item":(0,a.w5)((e=>[(0,a.Uk)((0,n.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])])]),q.value>1?((0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(f,{modelValue:T.value,"onUpdate:modelValue":[t[9]||(t[9]=e=>T.value=e),V],color:"dark",max:q.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:P.value},null,8,["modelValue","max","disable"])])):(0,a.kq)("",!0),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(_),(e=>((0,a.wg)(),(0,a.j4)(o.Z,{key:e.mbId||e.title,image:e.image,title:e.title,artistName:e.artist.name,year:e.year,onPlay:t=>Q(e),onEnqueue:t=>D(e)},null,8,["image","title","artistName","year","onPlay","onEnqueue"])))),128))])])),_:1})):(0,a.kq)("",!0)])),_:1})}}};var x=l(4458),k=l(2605),A=l(8052),I=l(3190),w=l(6384),S=l(6611),C=l(2857),E=l(996),P=l(9984),_=l.n(P);const q=f,T=q;_()(f,"components",{QCard:x.Z,QBreadcrumbs:k.Z,QBreadcrumbsEl:A.Z,QCardSection:I.Z,QSelect:w.Z,QInput:S.Z,QIcon:C.Z,QPagination:E.Z})}}]);