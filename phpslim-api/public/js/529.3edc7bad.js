"use strict";(globalThis["webpackChunkspieldose"]=globalThis["webpackChunkspieldose"]||[]).push([[529],{8417:(e,l,a)=>{a.r(l),a.d(l,{default:()=>U});var t=a(9835),u=a(499),s=a(6970),o=a(1957),i=a(1569),n=a(9302),d=a(5226),r=a(8106),c=a(5090);const m={class:"row q-gutter-xs"},v={class:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-4"},b={class:"col"},p={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},g={class:"col-xl-1 col-lg-2 col-md-3 col-sm-4 col-xs-4"},w={key:0,class:"q-pa-lg flex flex-center"},h={class:"q-gutter-md row items-start"},k={__name:"BrowseAlbumsPage",setup(e){const l=(0,n.Z)(),a=(0,c.H)(),k=(0,u.iH)(null),f=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Title & Artist",value:"all"}],q=(0,u.iH)(f[2]),_=[{label:"Title",value:"title"},{label:"Artist",value:"albumArtistName"},{label:"Year",value:"year"}],x=(0,u.iH)(_[0]),y=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],S=(0,u.iH)(y[0]),V=(0,u.iH)(!1),A=(0,u.iH)(!1);let H=[];const C=(0,u.iH)(0),T=(0,u.iH)(1),U=(0,u.iH)(null);function W(e){e&&(T.value=1),V.value=!1,A.value=!0;let a={title:"title"==q.value.value?k.value:null,albumArtistName:"albumArtistName"==q.value.value?k.value:null,text:"all"==q.value.value?k.value:null};i.api.album.search(a,T.value,32,x.value.value,S.value.value).then((e=>{H=e.data.data.items.map((e=>(e.image=e.covers.small,e))),C.value=e.data.data.pager.totalPages,k.value&&e.data.data.pager.totalResults<1&&(V.value=!0),(0,t.Y3)((()=>{U.value.$el.focus()})),A.value=!1})).catch((e=>{l.notify({type:"negative",message:"API Error: error loading albums",caption:"API Error: fatal error details: HTTP {"+e.response.status+"} ({"+e.response.statusText+"})"}),A.value=!1}))}function Z(e){T.value=e,W(!1)}function I(e){a.interact(),A.value=!0,i.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{r.oS.saveElements(e.data.data.items.map((e=>({track:e})))),A.value=!1})).catch((e=>{A.value=!1}))}function N(e){a.interact(),A.value=!0,i.api.track.search({albumMbId:e.mbId},1,0,!1,"trackNumber","ASC").then((e=>{r.oS.appendElements(e.data.data.items.map((e=>({track:e})))),A.value=!1})).catch((e=>{A.value=!1}))}return W(!0),(e,l)=>{const a=(0,t.up)("q-breadcrumbs-el"),i=(0,t.up)("q-breadcrumbs"),n=(0,t.up)("q-select"),r=(0,t.up)("q-icon"),c=(0,t.up)("q-input"),E=(0,t.up)("q-pagination"),P=(0,t.up)("q-card-section"),Q=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(Q,{class:"q-pa-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"q-mb-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{icon:"home",label:"Spieldose"}),(0,t.Wm)(a,{icon:"album",label:"Browse albums"})])),_:1}),(0,u.SU)(H)?((0,t.wg)(),(0,t.j4)(P,{key:0},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",v,[(0,t.Wm)(n,{outlined:"",dense:"",modelValue:q.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>q.value=e),l[1]||(l[1]=e=>W(!0))],options:f,"options-dense":"",label:"Search on",disable:A.value},{"selected-item":(0,t.w5)((e=>[(0,t.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,t._)("div",b,[(0,t.Wm)(c,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=e=>k.value=e),clearable:"",type:"search",outlined:"",dense:"",placeholder:"Text condition",hint:"Search albums with specified condition",loading:A.value,disable:A.value,onKeydown:l[3]||(l[3]=(0,o.D2)((0,o.iM)((e=>W(!0)),["prevent"]),["enter"])),onClear:l[4]||(l[4]=e=>{V.value=!1,W(!0)}),error:V.value,errorMessage:"No albums found with specified condition",ref_key:"searchTextRef",ref:U},{prepend:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"filter_alt"})])),append:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"search",class:"cursor-pointer",onClick:W})])),_:1},8,["modelValue","loading","disable","error"])]),(0,t._)("div",p,[(0,t.Wm)(n,{outlined:"",dense:"",modelValue:x.value,"onUpdate:modelValue":[l[5]||(l[5]=e=>x.value=e),l[6]||(l[6]=e=>W(!0))],options:_,"options-dense":"",label:"Sort field",disable:A.value},{"selected-item":(0,t.w5)((e=>[(0,t.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])]),(0,t._)("div",g,[(0,t.Wm)(n,{outlined:"",dense:"",modelValue:S.value,"onUpdate:modelValue":[l[7]||(l[7]=e=>S.value=e),l[8]||(l[8]=e=>W(!0))],options:y,"options-dense":"",label:"Sort order",disable:A.value},{"selected-item":(0,t.w5)((e=>[(0,t.Uk)((0,s.zw)(e.opt.label),1)])),_:1},8,["modelValue","disable"])])]),C.value>1?((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(E,{modelValue:T.value,"onUpdate:modelValue":[l[9]||(l[9]=e=>T.value=e),Z],color:"dark",max:C.value,"max-pages":5,"boundary-numbers":"","direction-links":"","boundary-links":"",disable:A.value},null,8,["modelValue","max","disable"])])):(0,t.kq)("",!0),(0,t._)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(H),(e=>((0,t.wg)(),(0,t.j4)(d.Z,{key:e.mbId||e.title,image:e.image,title:e.title,artistName:e.artist.name,year:e.year,onPlay:l=>I(e),onEnqueue:l=>N(e)},null,8,["image","title","artistName","year","onPlay","onEnqueue"])))),128))])])),_:1})):(0,t.kq)("",!0)])),_:1})}}};var f=a(4458),q=a(2605),_=a(8052),x=a(3190),y=a(6384),S=a(6611),V=a(2857),A=a(996),H=a(9984),C=a.n(H);const T=k,U=T;C()(k,"components",{QCard:f.Z,QBreadcrumbs:q.Z,QBreadcrumbsEl:_.Z,QCardSection:x.Z,QSelect:y.Z,QInput:S.Z,QIcon:V.Z,QPagination:A.Z})}}]);